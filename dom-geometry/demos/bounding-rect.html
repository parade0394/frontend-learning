<!doctype html>
<html data-theme="light" lang="zh-CN">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>getBoundingClientRect() - DOM å…ƒç´ å°ºå¯¸å’Œä½ç½® API</title>
    <link href="../styles.css" rel="stylesheet" />
    <script type="module" src="/src/theme-sync.js"></script>
  </head>
  <body>
    <!-- å·¦ä¾§è¾¹æ å¯¼èˆª -->
    <aside class="sidebar">
      <div class="sidebar-header">
        <h1>DOM å…ƒç´ å°ºå¯¸å’Œä½ç½® API</h1>
        <a class="back-home" href="../index.html">â† è¿”å›ä¸»é¡µ</a>
      </div>
      <nav class="sidebar-nav">
        <div class="nav-section">
          <h3>åŸºç¡€å±æ€§</h3>
          <a class="nav-item" href="offset.html">offset* å±æ€§</a>
          <a class="nav-item" href="client.html">client* å±æ€§</a>
          <a class="nav-item" href="scroll.html">scroll* å±æ€§</a>
          <a class="nav-item" href="offset-parent.html">offsetParent</a>
        </div>

        <div class="nav-section">
          <h3>æ ¸å¿ƒ API</h3>
          <a class="nav-item active" href="bounding-rect.html">getBoundingClientRect()</a>
          <a class="nav-item" href="client-rects.html">getClientRects()</a>
          <a class="nav-item" href="scroll-into-view.html">scrollIntoView()</a>
        </div>

        <div class="nav-section">
          <h3>çª—å£å’Œæ–‡æ¡£</h3>
          <a class="nav-item" href="window-api.html">window API</a>
          <a class="nav-item" href="document-scroll.html">document æ»šåŠ¨å…¼å®¹</a>
        </div>

        <div class="nav-section">
          <h3>ç°ä»£ Observer API</h3>
          <a class="nav-item" href="resize-observer.html">ResizeObserver</a>
          <a class="nav-item" href="intersection-observer.html">IntersectionObserver</a>
        </div>

        <div class="nav-section">
          <h3>å®æˆ˜åº”ç”¨</h3>
          <a class="nav-item" href="../practical-demos/drag-drop.html">æ‹–æ‹½å…ƒç´ </a>
          <a class="nav-item" href="../practical-demos/snap-align.html">å…ƒç´ å¸é™„å¯¹é½</a>
          <a class="nav-item" href="../practical-demos/tooltip.html">å·¥å…·æç¤ºå®šä½</a>
          <a class="nav-item" href="../practical-demos/dropdown.html">ä¸‹æ‹‰èœå•å®šä½</a>
          <a class="nav-item" href="../practical-demos/modal-center.html">æ¨¡æ€æ¡†å±…ä¸­</a>
          <a class="nav-item" href="../practical-demos/scroll-progress.html">æ»šåŠ¨è¿›åº¦æ¡</a>
        </div>
      </nav>
    </aside>

    <main class="main-content">
      <div class="demo-page">
        <h1>getBoundingClientRect()</h1>
        <p class="subtitle">è·å–å…ƒç´ ç›¸å¯¹äºè§†å£çš„ä½ç½®å’Œå°ºå¯¸ä¿¡æ¯</p>

        <section class="section">
          <h2>æ–¹æ³•è¯´æ˜</h2>
          <p>
            <span class="highlight">getBoundingClientRect()</span> è¿”å›å…ƒç´ çš„å¤§å°åŠå…¶ç›¸å¯¹äºè§†å£çš„ä½ç½®ã€‚è¿™æ˜¯æœ€å¸¸ç”¨çš„å®šä½
            APIï¼Œè¿”å›ä¸€ä¸ª DOMRect å¯¹è±¡ã€‚
          </p>

          <pre
            class="code-block"
          ><code><span class="keyword">const</span> rect = element.<span class="function">getBoundingClientRect</span>();
<span class="comment">// è¿”å›å€¼ï¼šDOMRect å¯¹è±¡</span>
{
  x: <span class="value">100</span>,           <span class="comment">// å…ƒç´ å·¦è¾¹ç¼˜è·ç¦»è§†å£å·¦ä¾§çš„è·ç¦»</span>
  y: <span class="value">200</span>,           <span class="comment">// å…ƒç´ ä¸Šè¾¹ç¼˜è·ç¦»è§†å£é¡¶éƒ¨çš„è·ç¦»</span>
  width: <span class="value">300</span>,       <span class="comment">// å…ƒç´ å®½åº¦</span>
  height: <span class="value">150</span>,      <span class="comment">// å…ƒç´ é«˜åº¦</span>
  top: <span class="value">200</span>,         <span class="comment">// ç­‰åŒäº y</span>
  right: <span class="value">400</span>,       <span class="comment">// x + width</span>
  bottom: <span class="value">350</span>,      <span class="comment">// y + height</span>
  left: <span class="value">100</span>         <span class="comment">// ç­‰åŒäº x</span>
}</code></pre>

          <ul>
            <li><strong>x / left</strong> - å…ƒç´ å·¦è¾¹ç¼˜è·ç¦»è§†å£å·¦ä¾§çš„è·ç¦»</li>
            <li><strong>y / top</strong> - å…ƒç´ ä¸Šè¾¹ç¼˜è·ç¦»è§†å£é¡¶éƒ¨çš„è·ç¦»</li>
            <li><strong>right</strong> - å…ƒç´ å³è¾¹ç¼˜è·ç¦»è§†å£å·¦ä¾§çš„è·ç¦»ï¼ˆx + widthï¼‰</li>
            <li><strong>bottom</strong> - å…ƒç´ ä¸‹è¾¹ç¼˜è·ç¦»è§†å£é¡¶éƒ¨çš„è·ç¦»ï¼ˆy + heightï¼‰</li>
            <li><strong>width</strong> - å…ƒç´ å®½åº¦</li>
            <li><strong>height</strong> - å…ƒç´ é«˜åº¦</li>
          </ul>

          <div class="tip">
            <h4>ğŸ’¡ æ ¸å¿ƒä¼˜åŠ¿</h4>
            <p>
              ä¸ offset å±æ€§ä¸åŒï¼ŒgetBoundingClientRect()
              è¿”å›çš„æ˜¯ç›¸å¯¹äº<strong>è§†å£</strong>çš„ä½ç½®ï¼Œè€Œä¸æ˜¯ç›¸å¯¹äºçˆ¶å…ƒç´ ã€‚å½“é¡µé¢æ»šåŠ¨æ—¶ï¼Œè¿™äº›å€¼ä¼šå®æ—¶æ›´æ–°ã€‚
            </p>
          </div>
        </section>

        <section class="section">
          <h2>ç¤ºä¾‹ 1ï¼šåŸºç¡€æµ‹é‡</h2>
          <p>ç§»åŠ¨é¼ æ ‡æˆ–æ»šåŠ¨é¡µé¢ï¼Œè§‚å¯Ÿæ•°å€¼çš„å®æ—¶å˜åŒ–</p>

          <div id="demo1" class="demo-container">
            <div id="box1" class="demo-box">ç›®æ ‡å…ƒç´ </div>
          </div>

          <div class="info-panel">
            <h4>å®æ—¶æ•°æ®ï¼ˆç›¸å¯¹äºè§†å£ï¼‰</h4>
            <div class="info-row">
              <span class="info-label">x (left):</span>
              <span id="val1-x" class="info-value">0px</span>
            </div>
            <div class="info-row">
              <span class="info-label">y (top):</span>
              <span id="val1-y" class="info-value">0px</span>
            </div>
            <div class="info-row">
              <span class="info-label">right:</span>
              <span id="val1-right" class="info-value">0px</span>
            </div>
            <div class="info-row">
              <span class="info-label">bottom:</span>
              <span id="val1-bottom" class="info-value">0px</span>
            </div>
            <div class="info-row">
              <span class="info-label">width:</span>
              <span id="val1-width" class="info-value">0px</span>
            </div>
            <div class="info-row">
              <span class="info-label">height:</span>
              <span id="val1-height" class="info-value">0px</span>
            </div>
          </div>

          <pre
            class="code-block"
          ><code><span class="keyword">const</span> box = document.<span class="function">getElementById</span>(<span class="string">'box'</span>);
<span class="keyword">const</span> rect = box.<span class="function">getBoundingClientRect</span>();

<span class="function">console</span>.<span class="function">log</span>(<span class="string">`å·¦ä¸Šè§’ä½ç½®: (${rect.x}, ${rect.y})`</span>);
<span class="function">console</span>.<span class="function">log</span>(<span class="string">`å…ƒç´ å°ºå¯¸: ${rect.width} Ã— ${rect.height}`</span>);</code></pre>
        </section>

        <section class="section">
          <h2>ç¤ºä¾‹ 2ï¼šæ£€æµ‹å…ƒç´ æ˜¯å¦åœ¨è§†å£ä¸­</h2>
          <p>åˆ¤æ–­å…ƒç´ æ˜¯å¦å®Œå…¨æˆ–éƒ¨åˆ†å¯è§</p>

          <div id="scroll2" class="scroll-container" style="height: 250px">
            <p style="margin-bottom: 50px; color: var(--text-secondary)">â†“ å‘ä¸‹æ»šåŠ¨æ‰¾åˆ°ç›®æ ‡å…ƒç´  â†“</p>
            <div id="box2" class="demo-box" style="margin: 20px 0">ç›®æ ‡å…ƒç´ </div>
            <p style="margin-top: 100px; color: var(--text-secondary)">ç»§ç»­æ»šåŠ¨...</p>
          </div>

          <div class="info-panel">
            <h4>å¯è§æ€§æ£€æµ‹</h4>
            <div class="info-row">
              <span class="info-label">å…ƒç´ çŠ¶æ€:</span>
              <span id="val2-status" class="info-value">æ£€æµ‹ä¸­...</span>
            </div>
            <div class="info-row">
              <span class="info-label">top:</span>
              <span id="val2-top" class="info-value">0px</span>
            </div>
            <div class="info-row">
              <span class="info-label">bottom:</span>
              <span id="val2-bottom" class="info-value">0px</span>
            </div>
            <div class="info-row">
              <span class="info-label">è§†å£é«˜åº¦:</span>
              <span id="val2-viewport" class="info-value">0px</span>
            </div>
          </div>

          <pre
            class="code-block"
          ><code><span class="keyword">function</span> <span class="function">isInViewport</span>(element) {
  <span class="keyword">const</span> rect = element.<span class="function">getBoundingClientRect</span>();
  <span class="keyword">return</span> (
    rect.top >= <span class="value">0</span> &&
    rect.left >= <span class="value">0</span> &&
    rect.bottom <= window.innerHeight &&
    rect.right <= window.innerWidth
  );
}</code></pre>

          <button class="control-button" onclick="document.getElementById('scroll2').scrollTop = 0">é‡ç½®æ»šåŠ¨</button>
        </section>

        <section class="section">
          <h2>ç¤ºä¾‹ 3ï¼šè®¡ç®—å…ƒç´ é‡å åŒºåŸŸ</h2>
          <p>æ£€æµ‹ä¸¤ä¸ªå…ƒç´ æ˜¯å¦é‡å </p>

          <div class="demo-container" style="position: relative; height: 350px">
            <div id="box3a" class="demo-box" style="position: absolute; left: 50px; top: 50px; background: #3b82f6">
              å…ƒç´  A
            </div>
            <div id="box3b" class="demo-box" style="position: absolute; left: 120px; top: 80px; background: #ef4444">
              å…ƒç´  B
            </div>

            <div
              id="overlap-highlight"
              class="rect-highlight"
              style="display: none; background: rgba(16, 185, 129, 0.3); border-color: #10b981"
            ></div>
          </div>

          <div class="info-panel">
            <h4>é‡å æ£€æµ‹ç»“æœ</h4>
            <div class="info-row">
              <span class="info-label">æ˜¯å¦é‡å :</span>
              <span id="val3-overlap" class="info-value">-</span>
            </div>
            <div class="info-row">
              <span class="info-label">é‡å åŒºåŸŸå®½åº¦:</span>
              <span id="val3-overlap-w" class="info-value">0px</span>
            </div>
            <div class="info-row">
              <span class="info-label">é‡å åŒºåŸŸé«˜åº¦:</span>
              <span id="val3-overlap-h" class="info-value">0px</span>
            </div>
          </div>

          <button class="control-button secondary" onclick="randomizePositions()">éšæœºä½ç½®</button>

          <pre
            class="code-block"
          ><code><span class="keyword">function</span> <span class="function">checkOverlap</span>(el1, el2) {
  <span class="keyword">const</span> rect1 = el1.<span class="function">getBoundingClientRect</span>();
  <span class="keyword">const</span> rect2 = el2.<span class="function">getBoundingClientRect</span>();

  <span class="keyword">return</span> !(
    rect1.right < rect2.left ||
    rect1.left > rect2.right ||
    rect1.bottom < rect2.top ||
    rect1.top > rect2.bottom
  );
}</code></pre>
        </section>

        <section class="section">
          <h2>ç¤ºä¾‹ 4ï¼šæ»šåŠ¨æ—¶å®æ—¶æ›´æ–°ä½ç½®</h2>
          <p>è§‚å¯Ÿé¡µé¢æ»šåŠ¨æ—¶å…ƒç´ ä½ç½®çš„å˜åŒ–</p>

          <div
            style="
              height: 150px;
              border: 2px dashed var(--border-color);
              border-radius: var(--radius-md);
              padding: 20px;
              margin-bottom: 20px;
              overflow: hidden;
              position: relative;
            "
          >
            <div style="color: var(--text-secondary); font-size: 0.9rem">
              <p>â†“ æ»šåŠ¨æ•´ä¸ªé¡µé¢ â†“</p>
              <p>è§‚å¯Ÿä¸‹æ–¹å…ƒç´ ç›¸å¯¹äºè§†å£ä½ç½®çš„å˜åŒ–</p>
            </div>
          </div>

          <div id="demo4" class="demo-container">
            <div id="box4" class="demo-box">è§‚å¯Ÿæˆ‘</div>
          </div>

          <div class="info-panel">
            <h4>ä½ç½®è¿½è¸ª</h4>
            <div class="info-row">
              <span class="info-label">Y (top):</span>
              <span id="val4-y" class="info-value">0px</span>
            </div>
            <div class="info-row">
              <span class="info-label">ç›¸å¯¹äºè§†å£é¡¶éƒ¨:</span>
              <span id="val4-from-top" class="info-value">0px</span>
            </div>
            <div class="info-row">
              <span class="info-label">é¡µé¢æ»šåŠ¨è·ç¦»:</span>
              <span id="val4-scroll" class="info-value">0px</span>
            </div>
          </div>

          <div class="tip">
            <h4>ğŸ’¡ å…³é”®ç‚¹</h4>
            <p>
              é¡µé¢æ»šåŠ¨æ—¶ï¼ŒgetBoundingClientRect()
              çš„è¿”å›å€¼ä¼šå®æ—¶æ›´æ–°ã€‚å¦‚æœéœ€è¦è·å–å…ƒç´ ç›¸å¯¹äºæ–‡æ¡£çš„ä½ç½®ï¼ˆä¸å—æ»šåŠ¨å½±å“ï¼‰ï¼Œéœ€è¦åŠ ä¸Š scrollYï¼š
              <br />
              <code class="code-inline">absoluteTop = rect.top + window.scrollY</code>
            </p>
          </div>
        </section>

        <section class="section">
          <h2>ç¤ºä¾‹ 5ï¼šå…ƒç´ å®šä½é”šç‚¹</h2>
          <p>åœ¨æŸä¸ªå…ƒç´ é™„è¿‘å®šä½å¦ä¸€ä¸ªå…ƒç´ ï¼ˆå¦‚å·¥å…·æç¤ºï¼‰</p>

          <div class="demo-container" style="min-height: 400px">
            <div id="box5" class="demo-box" style="margin: 100px auto">ç›®æ ‡å…ƒç´ </div>

            <div
              id="tooltip5"
              style="
                position: fixed;
                background: #1f2937;
                color: white;
                padding: 8px 16px;
                border-radius: 8px;
                font-size: 0.9rem;
                pointer-events: none;
                display: none;
                z-index: 1000;
              "
            >
              è¿™æ˜¯å·¥å…·æç¤º
            </div>
          </div>

          <button class="control-button" onmouseover="showTooltip(event)" onmouseout="hideTooltip()">
            æ‚¬åœæ˜¾ç¤ºå·¥å…·æç¤º
          </button>

          <div class="info-panel">
            <h4>å·¥å…·æç¤ºä½ç½®</h4>
            <div class="info-row">
              <span class="info-label">å…ƒç´ é¡¶éƒ¨:</span>
              <span id="val5-top" class="info-value">0px</span>
            </div>
            <div class="info-row">
              <span class="info-label">å…ƒç´ å·¦ä¾§:</span>
              <span id="val5-left" class="info-value">0px</span>
            </div>
            <div class="info-row">
              <span class="info-label">æç¤ºæ¡† Y:</span>
              <span id="val5-tooltip-y" class="info-value">0px</span>
            </div>
            <div class="info-row">
              <span class="info-label">æç¤ºæ¡† X:</span>
              <span id="val5-tooltip-x" class="info-value">0px</span>
            </div>
          </div>

          <pre
            class="code-block"
          ><code><span class="keyword">function</span> <span class="function">positionTooltip</span>(element, tooltip) {
  <span class="keyword">const</span> rect = element.<span class="function">getBoundingClientRect</span>();

  <span class="comment">// åœ¨å…ƒç´ ä¸Šæ–¹å±…ä¸­æ˜¾ç¤ºå·¥å…·æç¤º</span>
  tooltip.style.top = (rect.top - tooltip.offsetHeight - <span class="value">10</span>) + <span class="string">'px'</span>;
  tooltip.style.left = (rect.left + rect.width / <span class="value">2</span> - tooltip.offsetWidth / <span class="value">2</span>) + <span class="string">'px'</span>;
}</code></pre>
        </section>

        <section class="section">
          <h2>ç¤ºä¾‹ 6ï¼šå›ºå®šå®šä½å…ƒç´ çš„ç‰¹æ®Šæƒ…å†µ</h2>
          <p>å›ºå®šå®šä½å…ƒç´ çš„ä½ç½®æ˜¯ç›¸å¯¹äºè§†å£çš„</p>

          <div class="demo-container" style="position: relative; height: 300px">
            <div id="box6a" class="demo-box" style="position: relative; background: #3b82f6">ç›¸å¯¹å®šä½</div>
            <div
              id="box6b"
              class="demo-box"
              style="position: fixed; right: 40px; top: 40px; background: #ef4444; width: 120px; height: 80px"
            >
              å›ºå®šå®šä½
            </div>
          </div>

          <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px">
            <div class="info-panel">
              <h4>ç›¸å¯¹å®šä½å…ƒç´ </h4>
              <div class="info-row">
                <span class="info-label">top:</span>
                <span id="val6a-top" class="info-value">0px</span>
              </div>
              <div class="info-row">
                <span class="info-label">left:</span>
                <span id="val6a-left" class="info-value">0px</span>
              </div>
            </div>
            <div class="info-panel">
              <h4>å›ºå®šå®šä½å…ƒç´ </h4>
              <div class="info-row">
                <span class="info-label">top:</span>
                <span id="val6b-top" class="info-value">0px</span>
              </div>
              <div class="info-row">
                <span class="info-label">left:</span>
                <span id="val6b-left" class="info-value">0px</span>
              </div>
            </div>
          </div>

          <div class="note">
            <h4>ğŸ’¡ æ³¨æ„</h4>
            <p>
              å›ºå®šå®šä½å…ƒç´ ï¼ˆposition: fixedï¼‰çš„ getBoundingClientRect()
              è¿”å›çš„å€¼ä¸ä¼šéšé¡µé¢æ»šåŠ¨è€Œå˜åŒ–ï¼Œå› ä¸ºå®ƒæœ¬èº«å°±æ˜¯ç›¸å¯¹äºè§†å£å®šä½çš„ã€‚
            </p>
          </div>
        </section>

        <section class="section">
          <h2>æµè§ˆå™¨å…¼å®¹æ€§</h2>
          <table class="compatibility-table">
            <thead>
              <tr>
                <th>æ–¹æ³•</th>
                <th>Chrome</th>
                <th>Firefox</th>
                <th>Safari</th>
                <th>Edge</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td>getBoundingClientRect()</td>
                <td class="supported">âœ“ å…¨ç‰ˆæœ¬</td>
                <td class="supported">âœ“ å…¨ç‰ˆæœ¬</td>
                <td class="supported">âœ“ å…¨ç‰ˆæœ¬</td>
                <td class="supported">âœ“ å…¨ç‰ˆæœ¬</td>
              </tr>
              <tr>
                <td>è¿”å›å€¼ width/height</td>
                <td class="supported">âœ“ å…¨ç‰ˆæœ¬</td>
                <td class="supported">âœ“ å…¨ç‰ˆæœ¬</td>
                <td class="supported">âœ“ å…¨ç‰ˆæœ¬</td>
                <td class="supported">âœ“ å…¨ç‰ˆæœ¬</td>
              </tr>
              <tr>
                <td>è¿”å›å€¼ x/y</td>
                <td class="supported">âœ“ å…¨ç‰ˆæœ¬</td>
                <td class="supported">âœ“ å…¨ç‰ˆæœ¬</td>
                <td class="supported">âœ“ å…¨ç‰ˆæœ¬</td>
                <td class="supported">âœ“ å…¨ç‰ˆæœ¬</td>
              </tr>
            </tbody>
          </table>
        </section>

        <section class="section">
          <h2>æ€»ç»“</h2>
          <ul>
            <li><strong>ç›¸å¯¹äºè§†å£</strong>ï¼šè¿”å›å€¼æ˜¯ç›¸å¯¹äºè§†å£çš„ä½ç½®ï¼Œä¸æ˜¯ç›¸å¯¹äºæ–‡æ¡£</li>
            <li><strong>å®æ—¶æ›´æ–°</strong>ï¼šæ»šåŠ¨æˆ–ç¼©æ”¾æ—¶ï¼Œè¿”å›å€¼ä¼šè‡ªåŠ¨æ›´æ–°</li>
            <li><strong>åŒ…å« border</strong>ï¼šwidth/height åŒ…å«å…ƒç´ çš„ border</li>
            <li><strong>å¸¸ç”¨åœºæ™¯</strong>ï¼šæ£€æµ‹å¯è§æ€§ã€å…ƒç´ å®šä½ã€ç¢°æ’æ£€æµ‹ã€æ‡’åŠ è½½ç­‰</li>
            <li><strong>æ€§èƒ½è€ƒè™‘</strong>ï¼šé¢‘ç¹è°ƒç”¨ä¼šè§¦å‘ reflowï¼Œå»ºè®®ç¼“å­˜ç»“æœ</li>
          </ul>
        </section>
      </div>
    </main>

    <script>
      // ç¤ºä¾‹ 1ï¼šåŸºç¡€æµ‹é‡
      const box1 = document.getElementById('box1');

      function updateBox1() {
        const rect = box1.getBoundingClientRect();
        document.getElementById('val1-x').textContent = Math.round(rect.x) + 'px';
        document.getElementById('val1-y').textContent = Math.round(rect.y) + 'px';
        document.getElementById('val1-right').textContent = Math.round(rect.right) + 'px';
        document.getElementById('val1-bottom').textContent = Math.round(rect.bottom) + 'px';
        document.getElementById('val1-width').textContent = Math.round(rect.width) + 'px';
        document.getElementById('val1-height').textContent = Math.round(rect.height) + 'px';
      }

      window.addEventListener('scroll', updateBox1);
      window.addEventListener('resize', updateBox1);
      updateBox1();

      // ç¤ºä¾‹ 2ï¼šæ£€æµ‹å¯è§æ€§
      const box2 = document.getElementById('box2');
      const scroll2 = document.getElementById('scroll2');

      function checkVisibility() {
        const rect = box2.getBoundingClientRect();
        const viewportHeight = window.innerHeight;

        document.getElementById('val2-top').textContent = Math.round(rect.top) + 'px';
        document.getElementById('val2-bottom').textContent = Math.round(rect.bottom) + 'px';
        document.getElementById('val2-viewport').textContent = Math.round(viewportHeight) + 'px';

        const isVisible = rect.top < viewportHeight && rect.bottom > 0;
        document.getElementById('val2-status').textContent = isVisible ? 'âœ“ å¯è§' : 'âœ— ä¸å¯è§';
        document.getElementById('val2-status').style.color = isVisible ? 'var(--success)' : 'var(--error)';
      }

      scroll2.addEventListener('scroll', checkVisibility);
      checkVisibility();

      // ç¤ºä¾‹ 3ï¼šé‡å æ£€æµ‹
      const box3a = document.getElementById('box3a');
      const box3b = document.getElementById('box3b');
      const overlapHighlight = document.getElementById('overlap-highlight');

      function checkOverlap() {
        const rectA = box3a.getBoundingClientRect();
        const rectB = box3b.getBoundingClientRect();

        const overlap = !(
          rectA.right < rectB.left ||
          rectA.left > rectB.right ||
          rectA.bottom < rectB.top ||
          rectA.top > rectB.bottom
        );

        if (overlap) {
          const x1 = Math.max(rectA.left, rectB.left);
          const y1 = Math.max(rectA.top, rectB.top);
          const x2 = Math.min(rectA.right, rectB.right);
          const y2 = Math.min(rectA.bottom, rectB.bottom);

          const overlapWidth = x2 - x1;
          const overlapHeight = y2 - y1;

          // è·å–å®¹å™¨çš„ç›¸å¯¹ä½ç½®
          const containerRect = box3a.parentElement.getBoundingClientRect();
          overlapHighlight.style.display = 'block';
          overlapHighlight.style.left = x1 - containerRect.left + 'px';
          overlapHighlight.style.top = y1 - containerRect.top + 'px';
          overlapHighlight.style.width = overlapWidth + 'px';
          overlapHighlight.style.height = overlapHeight + 'px';

          document.getElementById('val3-overlap').textContent = 'âœ“ æ˜¯';
          document.getElementById('val3-overlap').style.color = 'var(--success)';
          document.getElementById('val3-overlap-w').textContent = Math.round(overlapWidth) + 'px';
          document.getElementById('val3-overlap-h').textContent = Math.round(overlapHeight) + 'px';
        } else {
          overlapHighlight.style.display = 'none';
          document.getElementById('val3-overlap').textContent = 'âœ— å¦';
          document.getElementById('val3-overlap').style.color = 'var(--error)';
          document.getElementById('val3-overlap-w').textContent = '0px';
          document.getElementById('val3-overlap-h').textContent = '0px';
        }
      }

      function randomizePositions() {
        const container = box3a.parentElement;
        const maxX = container.offsetWidth - 150;
        const maxY = container.offsetHeight - 150;

        box3a.style.left = Math.random() * maxX + 'px';
        box3a.style.top = Math.random() * maxY + 'px';
        box3b.style.left = Math.random() * maxX + 'px';
        box3b.style.top = Math.random() * maxY + 'px';

        checkOverlap();
      }

      window.randomizePositions = randomizePositions;

      checkOverlap();

      // ç¤ºä¾‹ 4ï¼šæ»šåŠ¨è¿½è¸ª
      const box4 = document.getElementById('box4');

      function updateBox4() {
        const rect = box4.getBoundingClientRect();
        document.getElementById('val4-y').textContent = Math.round(rect.y) + 'px';
        document.getElementById('val4-from-top').textContent = Math.round(rect.top) + 'px';
        document.getElementById('val4-scroll').textContent = Math.round(window.scrollY) + 'px';
      }

      window.addEventListener('scroll', updateBox4);
      updateBox4();

      // ç¤ºä¾‹ 5ï¼šå·¥å…·æç¤ºå®šä½
      const box5 = document.getElementById('box5');
      const tooltip5 = document.getElementById('tooltip5');

      window.showTooltip = function () {
        const rect = box5.getBoundingClientRect();

        tooltip5.style.display = 'block';
        tooltip5.style.left = rect.left + rect.width / 2 - tooltip5.offsetWidth / 2 + 'px';
        tooltip5.style.top = rect.top - tooltip5.offsetHeight - 10 + 'px';

        document.getElementById('val5-top').textContent = Math.round(rect.top) + 'px';
        document.getElementById('val5-left').textContent = Math.round(rect.left) + 'px';
        document.getElementById('val5-tooltip-y').textContent =
          Math.round(rect.top - tooltip5.offsetHeight - 10) + 'px';
        document.getElementById('val5-tooltip-x').textContent =
          Math.round(rect.left + rect.width / 2 - tooltip5.offsetWidth / 2) + 'px';
      };

      window.hideTooltip = function () {
        tooltip5.style.display = 'none';
      };

      // ç¤ºä¾‹ 6ï¼šå›ºå®šå®šä½
      const box6a = document.getElementById('box6a');
      const box6b = document.getElementById('box6b');

      function updateBox6() {
        const rectA = box6a.getBoundingClientRect();
        const rectB = box6b.getBoundingClientRect();

        document.getElementById('val6a-top').textContent = Math.round(rectA.top) + 'px';
        document.getElementById('val6a-left').textContent = Math.round(rectA.left) + 'px';
        document.getElementById('val6b-top').textContent = Math.round(rectB.top) + 'px';
        document.getElementById('val6b-left').textContent = Math.round(rectB.left) + 'px';
      }

      window.addEventListener('scroll', updateBox6);
      updateBox6();
    </script>
  </body>
</html>
