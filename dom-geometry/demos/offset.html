<!doctype html>
<html data-theme="light" lang="zh-CN">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>offset* å±æ€§ - DOM å…ƒç´ å°ºå¯¸å’Œä½ç½® API</title>
    <link href="../styles.css" rel="stylesheet" />
    <script type="module" src="/src/theme-sync.js"></script>
  </head>
  <body>
    <!-- å·¦ä¾§è¾¹æ å¯¼èˆª -->
    <aside class="sidebar">
      <div class="sidebar-header">
        <h1>DOM å…ƒç´ å°ºå¯¸å’Œä½ç½® API</h1>
        <a class="back-home" href="../index.html">â† è¿”å›ä¸»é¡µ</a>
      </div>
      <nav class="sidebar-nav">
        <div class="nav-section">
          <h3>åŸºç¡€å±æ€§</h3>
          <a class="nav-item active" href="offset.html">offset* å±æ€§</a>
          <a class="nav-item" href="client.html">client* å±æ€§</a>
          <a class="nav-item" href="scroll.html">scroll* å±æ€§</a>
          <a class="nav-item" href="offset-parent.html">offsetParent</a>
        </div>

        <div class="nav-section">
          <h3>æ ¸å¿ƒ API</h3>
          <a class="nav-item" href="bounding-rect.html">getBoundingClientRect()</a>
          <a class="nav-item" href="client-rects.html">getClientRects()</a>
          <a class="nav-item" href="scroll-into-view.html">scrollIntoView()</a>
        </div>

        <div class="nav-section">
          <h3>çª—å£å’Œæ–‡æ¡£</h3>
          <a class="nav-item" href="window-api.html">window API</a>
          <a class="nav-item" href="document-scroll.html">document æ»šåŠ¨å…¼å®¹</a>
        </div>

        <div class="nav-section">
          <h3>ç°ä»£ Observer API</h3>
          <a class="nav-item" href="resize-observer.html">ResizeObserver</a>
          <a class="nav-item" href="intersection-observer.html">IntersectionObserver</a>
        </div>

        <div class="nav-section">
          <h3>å®æˆ˜åº”ç”¨</h3>
          <a class="nav-item" href="../practical-demos/drag-drop.html">æ‹–æ‹½å…ƒç´ </a>
          <a class="nav-item" href="../practical-demos/snap-align.html">å…ƒç´ å¸é™„å¯¹é½</a>
          <a class="nav-item" href="../practical-demos/tooltip.html">å·¥å…·æç¤ºå®šä½</a>
          <a class="nav-item" href="../practical-demos/dropdown.html">ä¸‹æ‹‰èœå•å®šä½</a>
          <a class="nav-item" href="../practical-demos/modal-center.html">æ¨¡æ€æ¡†å±…ä¸­</a>
          <a class="nav-item" href="../practical-demos/scroll-progress.html">æ»šåŠ¨è¿›åº¦æ¡</a>
        </div>
      </nav>
    </aside>

    <main class="main-content">
      <div class="demo-page">
        <h1>offset* å±æ€§</h1>
        <p class="subtitle">è·å–å…ƒç´ çš„å¸ƒå±€å°ºå¯¸å’Œç›¸å¯¹äº offsetParent çš„ä½ç½®</p>

        <section class="section">
          <h2>å±æ€§è¯´æ˜</h2>
          <p><span class="highlight">offset*</span> ç³»åˆ—å±æ€§æä¾›äº†å…ƒç´ å¸ƒå±€å°ºå¯¸å’Œä½ç½®çš„ä¿¡æ¯ï¼Œæ˜¯æœ€å¸¸ç”¨çš„å…ƒç´ æµ‹é‡æ–¹å¼ã€‚</p>
          <ul>
            <li><strong>offsetWidth</strong> - å…ƒç´ çš„å®½åº¦ï¼ˆåŒ…å« borderã€paddingã€æ»šåŠ¨æ¡ï¼Œä¸åŒ…å« marginï¼‰</li>
            <li><strong>offsetHeight</strong> - å…ƒç´ çš„é«˜åº¦ï¼ˆåŒ…å« borderã€paddingã€æ»šåŠ¨æ¡ï¼Œä¸åŒ…å« marginï¼‰</li>
            <li><strong>offsetLeft</strong> - å…ƒç´ å·¦è¾¹ç¼˜ç›¸å¯¹äº offsetParent å·¦è¾¹ç¼˜çš„è·ç¦»</li>
            <li><strong>offsetTop</strong> - å…ƒç´ ä¸Šè¾¹ç¼˜ç›¸å¯¹äº offsetParent ä¸Šè¾¹ç¼˜çš„è·ç¦»</li>
            <li><strong>offsetParent</strong> - å…ƒç´ çš„å®šä½çˆ¶çº§å…ƒç´ </li>
          </ul>
        </section>

        <section class="section">
          <h2>ç¤ºä¾‹ 1ï¼šåŸºæœ¬æµ‹é‡</h2>
          <p>å°†é¼ æ ‡æ‚¬åœåœ¨ä¸‹æ–¹å…ƒç´ ä¸ŠæŸ¥çœ‹å…¶ offset å±æ€§å€¼</p>

          <div id="demo1" class="demo-container">
            <div id="box1" class="demo-box">æ‚¬åœæˆ‘</div>
          </div>

          <div class="info-panel">
            <h4>å®æ—¶æ•°æ®</h4>
            <div class="info-row">
              <span class="info-label">offsetWidth:</span>
              <span id="val1-width" class="info-value">0px</span>
            </div>
            <div class="info-row">
              <span class="info-label">offsetHeight:</span>
              <span id="val1-height" class="info-value">0px</span>
            </div>
            <div class="info-row">
              <span class="info-label">offsetLeft:</span>
              <span id="val1-left" class="info-value">0px</span>
            </div>
            <div class="info-row">
              <span class="info-label">offsetTop:</span>
              <span id="val1-top" class="info-value">0px</span>
            </div>
          </div>

          <pre
            class="code-block"
          ><code><span class="keyword">const</span> box = document.<span class="function">getElementById</span>(<span class="string">'box'</span>);
<span class="function">console</span>.<span class="function">log</span>(box.offsetWidth);   <span class="comment">// å…ƒç´ å®½åº¦</span>
<span class="function">console</span>.<span class="function">log</span>(box.offsetHeight);  <span class="comment">// å…ƒç´ é«˜åº¦</span>
<span class="function">console</span>.<span class="function">log</span>(box.offsetLeft);    <span class="comment">// ç›¸å¯¹äº offsetParent çš„å·¦ä¾§è·ç¦»</span>
<span class="function">console</span>.<span class="function">log</span>(box.offsetTop);     <span class="comment">// ç›¸å¯¹äº offsetParent çš„é¡¶éƒ¨è·ç¦»</span></code></pre>
        </section>

        <section class="section">
          <h2>ç¤ºä¾‹ 2ï¼šborder çš„å½±å“</h2>
          <p>offsetWidth å’Œ offsetHeight <strong>åŒ…å«</strong> border çš„å®½åº¦</p>

          <div class="demo-container" style="display: flex; gap: 30px; align-items: center">
            <div id="box2a" class="demo-box" style="border: 0">æ— è¾¹æ¡†</div>
            <div id="box2b" class="demo-box" style="border: 20px solid #ef4444">20px è¾¹æ¡†</div>
          </div>

          <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px; margin-top: 20px">
            <div class="info-panel">
              <h4>æ— è¾¹æ¡†å…ƒç´ </h4>
              <div class="info-row">
                <span class="info-label">offsetWidth:</span>
                <span id="val2a-width" class="info-value">0px</span>
              </div>
              <div class="info-row">
                <span class="info-label">border:</span>
                <span class="info-value">0px</span>
              </div>
            </div>
            <div class="info-panel">
              <h4>20px è¾¹æ¡†å…ƒç´ </h4>
              <div class="info-row">
                <span class="info-label">offsetWidth:</span>
                <span id="val2b-width" class="info-value">0px</span>
              </div>
              <div class="info-row">
                <span class="info-label">border:</span>
                <span class="info-value">20px Ã— 2 = 40px</span>
              </div>
            </div>
          </div>

          <div class="note">
            <h4>ğŸ’¡ æ³¨æ„</h4>
            <p>
              border ä¼šç›´æ¥å¢åŠ  offsetWidth å’Œ offsetHeight çš„å€¼ã€‚20px çš„è¾¹æ¡†ä¼šä½¿å…ƒç´ çš„æ€»å°ºå¯¸å¢åŠ  40pxï¼ˆå·¦å³æˆ–ä¸Šä¸‹å„
              20pxï¼‰ã€‚
            </p>
          </div>
        </section>

        <section class="section">
          <h2>ç¤ºä¾‹ 3ï¼šç†è§£ offsetParent</h2>
          <p>offsetLeft å’Œ offsetTop æ˜¯ç›¸å¯¹äº offsetParent çš„ä½ç½®</p>

          <div
            id="demo3-parent"
            class="demo-container"
            style="position: relative; padding: 40px; border: 3px dashed #3b82f6"
          >
            <div style="margin-bottom: 20px; color: var(--text-secondary); font-size: 0.9rem">
              offsetParent (position: relative)
            </div>
            <div id="box3" class="demo-box" style="margin-left: 50px; margin-top: 30px">å­å…ƒç´ </div>
          </div>

          <div class="info-panel">
            <h4>ä½ç½®ä¿¡æ¯</h4>
            <div class="info-row">
              <span class="info-label">å­å…ƒç´  offsetLeft:</span>
              <span id="val3-left" class="info-value">0px</span>
            </div>
            <div class="info-row">
              <span class="info-label">å­å…ƒç´  offsetTop:</span>
              <span id="val3-top" class="info-value">0px</span>
            </div>
            <div class="info-row">
              <span class="info-label">å­å…ƒç´  margin-left:</span>
              <span class="info-value">50px</span>
            </div>
            <div class="info-row">
              <span class="info-label">å­å…ƒç´  margin-top:</span>
              <span class="info-value">30px</span>
            </div>
            <div class="info-row">
              <span class="info-label">çˆ¶å…ƒç´  padding-left:</span>
              <span class="info-value">40px</span>
            </div>
          </div>

          <div class="tip">
            <h4>ğŸ’¡ å…³é”®ç‚¹</h4>
            <p>
              offsetLeft/offsetTop åŒ…å«äº† margin çš„å€¼ï¼Œä½†ä¸åŒ…å«çˆ¶å…ƒç´ çš„ paddingã€‚å€¼æ˜¯ç›¸å¯¹äº offsetParent çš„ padding
              è¾¹ç¼˜è®¡ç®—çš„ã€‚
            </p>
          </div>
        </section>

        <section class="section">
          <h2>ç¤ºä¾‹ 4ï¼šæ»šåŠ¨å®¹å™¨å†…çš„å…ƒç´ </h2>
          <p>æ»šåŠ¨æ“ä½œä¸ä¼šå½±å“ offsetLeft å’Œ offsetTop</p>

          <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px">
            <div>
              <div id="scroll4" class="scroll-container">
                <div style="padding: 20px">
                  <p style="margin-bottom: 100px; color: var(--text-secondary)">â†“ å‘ä¸‹æ»šåŠ¨ â†“</p>
                  <div id="box4" class="demo-box">ç›®æ ‡å…ƒç´ </div>
                  <p style="margin-top: 100px; color: var(--text-secondary)">å†…å®¹ç»“æŸ</p>
                </div>
              </div>
              <button class="control-button" onclick="document.getElementById('scroll4').scrollTop = 0">
                é‡ç½®æ»šåŠ¨
              </button>
            </div>
            <div class="info-panel">
              <h4>offsetTop å€¼</h4>
              <div class="info-row">
                <span class="info-label">å…ƒç´  offsetTop:</span>
                <span id="val4-top" class="info-value">0px</span>
              </div>
              <div class="info-row">
                <span class="info-label">æ»šåŠ¨ä½ç½®:</span>
                <span id="val4-scroll" class="info-value">0px</span>
              </div>
              <p style="margin-top: 15px; font-size: 0.9rem; color: var(--text-secondary)">
                æ»šåŠ¨å®¹å™¨æ—¶ï¼ŒoffsetTop ä¿æŒä¸å˜ã€‚å¦‚æœéœ€è¦è·å–ç›¸å¯¹äºè§†å£çš„ä½ç½®ï¼Œè¯·ä½¿ç”¨ getBoundingClientRect()
              </p>
            </div>
          </div>
        </section>

        <section class="section">
          <h2>ç¤ºä¾‹ 5ï¼šåŠ¨æ€è°ƒæ•´å°ºå¯¸</h2>
          <p>æ‹–åŠ¨æ»‘å—è°ƒæ•´å…ƒç´ å°ºå¯¸ï¼Œè§‚å¯Ÿ offset å±æ€§çš„å˜åŒ–</p>

          <div class="demo-container">
            <div id="box5" class="demo-box" style="width: 150px; height: 150px">
              <span id="box5-label">150 Ã— 150</span>
            </div>
          </div>

          <div style="margin: 20px 0">
            <label style="display: block; margin-bottom: 10px; color: var(--text-secondary)">
              å®½åº¦: <span id="width5-val">150</span>px
            </label>
            <input id="width5" type="range" value="150" min="100" max="300" style="width: 100%" />
          </div>

          <div style="margin: 20px 0">
            <label style="display: block; margin-bottom: 10px; color: var(--text-secondary)">
              é«˜åº¦: <span id="height5-val">150</span>px
            </label>
            <input id="height5" type="range" value="150" min="100" max="300" style="width: 100%" />
          </div>

          <div class="info-panel">
            <h4>å®æ—¶æµ‹é‡</h4>
            <div class="info-row">
              <span class="info-label">offsetWidth:</span>
              <span id="val5-width" class="info-value">0px</span>
            </div>
            <div class="info-row">
              <span class="info-label">offsetHeight:</span>
              <span id="val5-height" class="info-value">0px</span>
            </div>
          </div>
        </section>

        <section class="section">
          <h2>æµè§ˆå™¨å…¼å®¹æ€§</h2>
          <table class="compatibility-table">
            <thead>
              <tr>
                <th>å±æ€§</th>
                <th>Chrome</th>
                <th>Firefox</th>
                <th>Safari</th>
                <th>Edge</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td>offsetWidth/Height</td>
                <td class="supported">âœ“ å…¨ç‰ˆæœ¬</td>
                <td class="supported">âœ“ å…¨ç‰ˆæœ¬</td>
                <td class="supported">âœ“ å…¨ç‰ˆæœ¬</td>
                <td class="supported">âœ“ å…¨ç‰ˆæœ¬</td>
              </tr>
              <tr>
                <td>offsetLeft/Top</td>
                <td class="supported">âœ“ å…¨ç‰ˆæœ¬</td>
                <td class="supported">âœ“ å…¨ç‰ˆæœ¬</td>
                <td class="supported">âœ“ å…¨ç‰ˆæœ¬</td>
                <td class="supported">âœ“ å…¨ç‰ˆæœ¬</td>
              </tr>
            </tbody>
          </table>
        </section>

        <section class="section">
          <h2>æ€»ç»“</h2>
          <ul>
            <li><strong>offsetWidth/offsetHeight</strong> = content + padding + borderï¼ˆåŒ…å«æ»šåŠ¨æ¡ï¼‰</li>
            <li><strong>offsetLeft/offsetTop</strong> ç›¸å¯¹äº offsetParentï¼ŒåŒ…å« margin</li>
            <li>è¿™äº›å±æ€§æ˜¯<strong>åªè¯»</strong>çš„ï¼Œéœ€è¦é€šè¿‡ style ä¿®æ”¹å…ƒç´ å°ºå¯¸</li>
            <li>æ»šåŠ¨æ“ä½œä¸å½±å“ offset å€¼</li>
            <li>é€‚ç”¨äºéœ€è¦è·å–å…ƒç´ å¸ƒå±€å°ºå¯¸çš„åœºæ™¯</li>
          </ul>
        </section>
      </div>
    </main>

    <script>
      // ç¤ºä¾‹ 1ï¼šåŸºæœ¬æµ‹é‡
      const box1 = document.getElementById('box1');

      function updateBox1() {
        document.getElementById('val1-width').textContent = box1.offsetWidth + 'px';
        document.getElementById('val1-height').textContent = box1.offsetHeight + 'px';
        document.getElementById('val1-left').textContent = box1.offsetLeft + 'px';
        document.getElementById('val1-top').textContent = box1.offsetTop + 'px';
      }

      box1.addEventListener('mouseenter', updateBox1);
      box1.addEventListener('mouseleave', () => {
        document.getElementById('val1-width').textContent = '0px';
        document.getElementById('val1-height').textContent = '0px';
        document.getElementById('val1-left').textContent = '0px';
        document.getElementById('val1-top').textContent = '0px';
      });
      updateBox1();

      // ç¤ºä¾‹ 2ï¼šborder å½±å“
      document.getElementById('val2a-width').textContent = document.getElementById('box2a').offsetWidth + 'px';
      document.getElementById('val2b-width').textContent = document.getElementById('box2b').offsetWidth + 'px';

      // ç¤ºä¾‹ 3ï¼šoffsetParent
      const box3 = document.getElementById('box3');
      function updateBox3() {
        document.getElementById('val3-left').textContent = box3.offsetLeft + 'px';
        document.getElementById('val3-top').textContent = box3.offsetTop + 'px';
      }
      updateBox3();

      // ç¤ºä¾‹ 4ï¼šæ»šåŠ¨å®¹å™¨
      const box4 = document.getElementById('box4');
      const scroll4 = document.getElementById('scroll4');

      function updateBox4() {
        document.getElementById('val4-top').textContent = box4.offsetTop + 'px';
        document.getElementById('val4-scroll').textContent = Math.round(scroll4.scrollTop) + 'px';
      }

      updateBox4();
      scroll4.addEventListener('scroll', updateBox4);

      // ç¤ºä¾‹ 5ï¼šåŠ¨æ€è°ƒæ•´
      const box5 = document.getElementById('box5');
      const width5 = document.getElementById('width5');
      const height5 = document.getElementById('height5');

      function updateBox5() {
        const width = width5.value;
        const height = height5.value;

        box5.style.width = width + 'px';
        box5.style.height = height + 'px';
        document.getElementById('box5-label').textContent = width + ' Ã— ' + height;
        document.getElementById('width5-val').textContent = width;
        document.getElementById('height5-val').textContent = height;

        document.getElementById('val5-width').textContent = box5.offsetWidth + 'px';
        document.getElementById('val5-height').textContent = box5.offsetHeight + 'px';
      }

      width5.addEventListener('input', updateBox5);
      height5.addEventListener('input', updateBox5);
      updateBox5();
    </script>
  </body>
</html>
