<!doctype html>
<html data-theme="light" lang="zh-CN">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>window API - DOM å…ƒç´ å°ºå¯¸å’Œä½ç½® API</title>
    <link href="../styles.css" rel="stylesheet" />
    <script type="module" src="/src/theme-sync.js"></script>
  </head>
  <body>
    <aside class="sidebar">
      <div class="sidebar-header">
        <h1>DOM å…ƒç´ å°ºå¯¸å’Œä½ç½® API</h1>
        <a class="back-home" href="../index.html">â† è¿”å›ä¸»é¡µ</a>
      </div>
      <nav class="sidebar-nav">
        <div class="nav-section">
          <h3>åŸºç¡€å±æ€§</h3>
          <a class="nav-item" href="offset.html">offset* å±æ€§</a>
          <a class="nav-item" href="client.html">client* å±æ€§</a>
          <a class="nav-item" href="scroll.html">scroll* å±æ€§</a>
          <a class="nav-item" href="offset-parent.html">offsetParent</a>
        </div>

        <div class="nav-section">
          <h3>æ ¸å¿ƒ API</h3>
          <a class="nav-item" href="bounding-rect.html">getBoundingClientRect()</a>
          <a class="nav-item" href="client-rects.html">getClientRects()</a>
          <a class="nav-item" href="scroll-into-view.html">scrollIntoView()</a>
        </div>

        <div class="nav-section">
          <h3>çª—å£å’Œæ–‡æ¡£</h3>
          <a class="nav-item active" href="window-api.html">window API</a>
          <a class="nav-item" href="document-scroll.html">document æ»šåŠ¨å…¼å®¹</a>
        </div>

        <div class="nav-section">
          <h3>ç°ä»£ Observer API</h3>
          <a class="nav-item" href="resize-observer.html">ResizeObserver</a>
          <a class="nav-item" href="intersection-observer.html">IntersectionObserver</a>
        </div>

        <div class="nav-section">
          <h3>å®æˆ˜åº”ç”¨</h3>
          <a class="nav-item" href="../practical-demos/drag-drop.html">æ‹–æ‹½å…ƒç´ </a>
          <a class="nav-item" href="../practical-demos/scroll-progress.html">æ»šåŠ¨è¿›åº¦æ¡</a>
        </div>
      </nav>
    </aside>

    <main class="main-content">
      <div class="demo-page">
        <h1>window API</h1>
        <p class="subtitle">æµè§ˆå™¨çª—å£å°ºå¯¸å’Œæ»šåŠ¨ä½ç½®</p>

        <section class="section">
          <h2>API è¯´æ˜</h2>
          <p><span class="highlight">window</span> å¯¹è±¡æä¾›äº†æµè§ˆå™¨çª—å£çš„å°ºå¯¸å’Œæ»šåŠ¨ä½ç½®ä¿¡æ¯ã€‚</p>

          <pre class="code-block"><code><span class="comment">// çª—å£å°ºå¯¸</span>
<span class="function">console</span>.<span class="function">log</span>(window.innerWidth);   <span class="comment">// çª—å£å†…éƒ¨å®½åº¦</span>
<span class="function">console</span>.<span class="function">log</span>(window.innerHeight);  <span class="comment">// çª—å£å†…éƒ¨é«˜åº¦</span>
<span class="function">console</span>.<span class="function">log</span>(window.outerWidth);   <span class="comment">// çª—å£å¤–éƒ¨å®½åº¦ï¼ˆåŒ…å«è¾¹æ¡†ï¼‰</span>
<span class="function">console</span>.<span class="function">log</span>(window.outerHeight);  <span class="comment">// çª—å£å¤–éƒ¨é«˜åº¦</span>

<span class="comment">// æ»šåŠ¨ä½ç½®</span>
<span class="function">console</span>.<span class="function">log</span>(window.scrollX);      <span class="comment">// æ°´å¹³æ»šåŠ¨ä½ç½®</span>
<span class="function">console</span>.<span class="function">log</span>(window.scrollY);      <span class="comment">// å‚ç›´æ»šåŠ¨ä½ç½®</span>
<span class="function">console</span>.<span class="function">log</span>(window.pageXOffset); <span class="comment">// scrollX çš„åˆ«å</span>
<span class="function">console</span>.<span class="function">log</span>(window.pageYOffset); <span class="comment">// scrollY çš„åˆ«å</span></code></pre>

          <ul>
            <li><strong>innerWidth / innerHeight</strong> - æµè§ˆå™¨çª—å£çš„å†…éƒ¨å°ºå¯¸ï¼ˆä¸å«è¾¹æ¡†ï¼‰</li>
            <li><strong>outerWidth / outerHeight</strong> - æµè§ˆå™¨çª—å£çš„å¤–éƒ¨å°ºå¯¸ï¼ˆå«è¾¹æ¡†ï¼‰</li>
            <li><strong>scrollX / scrollY</strong> - æ–‡æ¡£çš„æ»šåŠ¨ä½ç½®</li>
          </ul>
        </section>

        <section class="section">
          <h2>ç¤ºä¾‹ 1ï¼šçª—å£å°ºå¯¸</h2>
          <p>å®æ—¶æ˜¾ç¤ºçª—å£å°ºå¯¸</p>

          <div class="info-panel">
            <h4>çª—å£å°ºå¯¸ï¼ˆè°ƒæ•´æµè§ˆå™¨çª—å£å¤§å°è§‚å¯Ÿå˜åŒ–ï¼‰</h4>
            <div class="info-row">
              <span class="info-label">innerWidth:</span>
              <span id="val1-inner-w" class="info-value">0px</span>
            </div>
            <div class="info-row">
              <span class="info-label">innerHeight:</span>
              <span id="val1-inner-h" class="info-value">0px</span>
            </div>
            <div class="info-row">
              <span class="info-label">outerWidth:</span>
              <span id="val1-outer-w" class="info-value">0px</span>
            </div>
            <div class="info-row">
              <span class="info-label">outerHeight:</span>
              <span id="val1-outer-h" class="info-value">0px</span>
            </div>
          </div>

          <div class="tip">
            <h4>ğŸ’¡ inner vs outer</h4>
            <p>
              innerWidth/Height æ˜¯æ–‡æ¡£å¯æ˜¾ç¤ºåŒºåŸŸçš„å°ºå¯¸<br />
              outerWidth/Height æ˜¯æ•´ä¸ªæµè§ˆå™¨çª—å£çš„å°ºå¯¸<br />
              å“åº”å¼è®¾è®¡åº”è¯¥ä½¿ç”¨ innerWidth
            </p>
          </div>
        </section>

        <section class="section">
          <h2>ç¤ºä¾‹ 2ï¼šæ»šåŠ¨ä½ç½®</h2>
          <p>ç›‘å¬é¡µé¢æ»šåŠ¨</p>

          <div id="scroll2" class="scroll-container" style="height: 250px">
            <div style="padding: 20px; min-height: 500px">
              <p style="color: var(--text-secondary)">â†“ å‘ä¸‹æ»šåŠ¨æŸ¥çœ‹æ•°å€¼å˜åŒ– â†“</p>
              <p style="margin: 100px 0; color: var(--text-secondary)">ç»§ç»­æ»šåŠ¨...</p>
            </div>
          </div>

          <div class="info-panel">
            <h4>æ»šåŠ¨ä½ç½®</h4>
            <div class="info-row">
              <span class="info-label">scrollY:</span>
              <span id="val2-scroll-y" class="info-value">0px</span>
            </div>
            <div class="info-row">
              <span class="info-label">pageYOffset:</span>
              <span id="val2-page-y" class="info-value">0px</span>
            </div>
            <div class="info-row">
              <span class="info-label">scrollX:</span>
              <span id="val2-scroll-x" class="info-value">0px</span>
            </div>
          </div>

          <button class="control-button" onclick="document.getElementById('scroll2').scrollTop = 0">é‡ç½®æ»šåŠ¨</button>
        </section>

        <section class="section">
          <h2>ç¤ºä¾‹ 3ï¼šå“åº”å¼ç›‘å¬</h2>
          <p>ç›‘å¬çª—å£å°ºå¯¸å˜åŒ–</p>

          <div id="container3" class="demo-container">
            <div id="box3" class="demo-box" style="margin: 0 auto">è°ƒæ•´çª—å£å¤§å°</div>
          </div>

          <div class="info-panel">
            <h4>å“åº”å¼çŠ¶æ€</h4>
            <div class="info-row">
              <span class="info-label">çª—å£å®½åº¦:</span>
              <span id="val3-width" class="info-value">0px</span>
            </div>
            <div class="info-row">
              <span class="info-label">è®¾å¤‡ç±»å‹:</span>
              <span id="val3-device" class="info-value">-</span>
            </div>
          </div>

          <pre class="code-block"><code><span class="comment">// ç›‘å¬çª—å£å°ºå¯¸å˜åŒ–</span>
window.<span class="function">addEventListener</span>(<span class="string">'resize'</span>, () => {
  <span class="keyword">const</span> width = window.innerWidth;
  <span class="keyword">if</span> (width &lt; <span class="value">768</span>) {
    <span class="function">console</span>.<span class="function">log</span>(<span class="string">'ç§»åŠ¨è®¾å¤‡'</span>);
  } <span class="keyword">else</span> {
    <span class="function">console</span>.<span class="function">log</span>(<span class="string">'æ¡Œé¢è®¾å¤‡'</span>);
  }
});</code></pre>
        </section>

        <section class="section">
          <h2>ç¤ºä¾‹ 4ï¼šå›åˆ°é¡¶éƒ¨æŒ‰é’®</h2>
          <p>åŸºäºæ»šåŠ¨ä½ç½®æ˜¾ç¤ºæŒ‰é’®</p>

          <div id="scroll4" class="scroll-container" style="height: 200px; margin-bottom: 20px">
            <div style="padding: 20px; min-height: 400px">
              <p style="color: var(--text-secondary)">â†“ å‘ä¸‹æ»šåŠ¨æŸ¥çœ‹æŒ‰é’® â†“</p>
            </div>
          </div>

          <button
            id="back-to-top"
            class="control-button"
            style="display: none"
            onclick="document.getElementById('scroll4').scrollTop = 0"
          >
            â†‘ å›åˆ°é¡¶éƒ¨
          </button>

          <div class="info-panel">
            <h4>æŒ‰é’®çŠ¶æ€</h4>
            <div class="info-row">
              <span class="info-label">æ»šåŠ¨è·ç¦»:</span>
              <span id="val4-scroll" class="info-value">0px</span>
            </div>
            <div class="info-row">
              <span class="info-label">æŒ‰é’®æ˜¾ç¤º:</span>
              <span id="val4-visible" class="info-value">å¦</span>
            </div>
          </div>
        </section>

        <section class="section">
          <h2>æ€»ç»“</h2>
          <ul>
            <li>window.innerWidth/Height è·å–çª—å£å†…éƒ¨å°ºå¯¸</li>
            <li>window.scrollX/Y è·å–æ–‡æ¡£æ»šåŠ¨ä½ç½®</li>
            <li>resize äº‹ä»¶ç›‘å¬çª—å£å°ºå¯¸å˜åŒ–</li>
            <li>scroll äº‹ä»¶ç›‘å¬æ»šåŠ¨ä½ç½®å˜åŒ–</li>
            <li>å“åº”å¼è®¾è®¡çš„åŸºç¡€ API</li>
          </ul>
        </section>
      </div>
    </main>

    <script>
      // ç¤ºä¾‹ 1ï¼šçª—å£å°ºå¯¸
      function updateWindowInfo() {
        document.getElementById('val1-inner-w').textContent = window.innerWidth + 'px';
        document.getElementById('val1-inner-h').textContent = window.innerHeight + 'px';
        document.getElementById('val1-outer-w').textContent = window.outerWidth + 'px';
        document.getElementById('val1-outer-h').textContent = window.outerHeight + 'px';
      }

      window.addEventListener('resize', updateWindowInfo);
      updateWindowInfo();

      // ç¤ºä¾‹ 2ï¼šæ»šåŠ¨ä½ç½®
      const scroll2 = document.getElementById('scroll2');

      function updateScrollInfo() {
        document.getElementById('val2-scroll-y').textContent = Math.round(scroll2.scrollTop) + 'px';
        document.getElementById('val2-page-y').textContent = Math.round(window.pageYOffset) + 'px';
        document.getElementById('val2-scroll-x').textContent = Math.round(scroll2.scrollLeft) + 'px';
      }

      scroll2.addEventListener('scroll', updateScrollInfo);
      updateScrollInfo();

      // ç¤ºä¾‹ 3ï¼šå“åº”å¼ç›‘å¬
      function updateResponsive() {
        const width = window.innerWidth;
        document.getElementById('val3-width').textContent = width + 'px';

        let device;
        if (width < 768) {
          device = 'ç§»åŠ¨è®¾å¤‡';
        } else if (width < 1024) {
          device = 'å¹³æ¿è®¾å¤‡';
        } else {
          device = 'æ¡Œé¢è®¾å¤‡';
        }
        document.getElementById('val3-device').textContent = device;
      }

      window.addEventListener('resize', updateResponsive);
      updateResponsive();

      // ç¤ºä¾‹ 4ï¼šå›åˆ°é¡¶éƒ¨
      const scroll4 = document.getElementById('scroll4');
      const backToTop = document.getElementById('back-to-top');

      scroll4.addEventListener('scroll', () => {
        const scrollTop = scroll4.scrollTop;
        document.getElementById('val4-scroll').textContent = Math.round(scrollTop) + 'px';

        if (scrollTop > 100) {
          backToTop.style.display = 'inline-block';
          document.getElementById('val4-visible').textContent = 'æ˜¯';
        } else {
          backToTop.style.display = 'none';
          document.getElementById('val4-visible').textContent = 'å¦';
        }
      });
    </script>
  </body>
</html>
