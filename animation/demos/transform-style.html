<!DOCTYPE html>
<html lang="zh-CN" data-theme="light">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>transform-style - CSS 动画教程</title>
    <link rel="stylesheet" href="../styles.css" />
    <script type="module" src="/src/theme-sync.js"></script>
    <style>
      /* 3D 立方体样式 */
      .cube-container {
        width: 200px;
        height: 200px;
        perspective: 800px;
        margin: 0 auto;
      }

      .cube {
        width: 100%;
        height: 100%;
        position: relative;
        transition: transform 1s;
      }

      .cube-face {
        position: absolute;
        width: 200px;
        height: 200px;
        display: flex;
        align-items: center;
        justify-content: center;
        font-size: 2rem;
        font-weight: 700;
        color: white;
        opacity: 0.9;
        border: 2px solid rgba(255, 255, 255, 0.3);
      }

      .face-front {
        background: #10b981;
        transform: translateZ(100px);
      }
      .face-back {
        background: #059669;
        transform: rotateY(180deg) translateZ(100px);
      }
      .face-right {
        background: #34d399;
        transform: rotateY(90deg) translateZ(100px);
      }
      .face-left {
        background: #065f46;
        transform: rotateY(-90deg) translateZ(100px);
      }
      .face-top {
        background: #6ee7b7;
        transform: rotateX(90deg) translateZ(100px);
      }
      .face-bottom {
        background: #047857;
        transform: rotateX(-90deg) translateZ(100px);
      }

      .rotate-cube {
        animation: rotateCube 8s infinite linear;
      }

      @keyframes rotateCube {
        from {
          transform: rotateX(0deg) rotateY(0deg);
        }
        to {
          transform: rotateX(360deg) rotateY(360deg);
        }
      }

      /* 卡片翻转样式 */
      .card-container {
        width: 300px;
        height: 200px;
        perspective: 1000px;
        margin: 0 auto;
      }

      .card-card {
        width: 100%;
        height: 100%;
        position: relative;
        transition: transform 0.8s;
        cursor: pointer;
      }

      .card-card.flipped {
        transform: rotateY(180deg);
      }

      .card-side {
        position: absolute;
        width: 100%;
        height: 100%;
        backface-visibility: hidden;
        border-radius: 12px;
        display: flex;
        align-items: center;
        justify-content: center;
        padding: 20px;
      }

      .card-front {
        background: linear-gradient(135deg, #10b981, #059669);
        color: white;
      }

      .card-back {
        background: white;
        border: 2px solid #10b981;
        color: #1f2937;
        transform: rotateY(180deg);
      }
    </style>
  </head>
  <body>
    <aside class="sidebar">
      <div class="sidebar-header">
        <h1>CSS 动画教程</h1>
        <a href="../index.html" class="back-home">← 返回首页</a>
      </div>
      <nav class="sidebar-nav">
        <div class="nav-section">
          <h3>基础概念</h3>
          <a href="coordinate.html" class="nav-item">坐标系统</a>
        </div>
        <div class="nav-section">
          <h3>3D 变换</h3>
          <a href="perspective.html" class="nav-item">perspective 透视</a>
          <a href="rotate3d.html" class="nav-item">rotate3d() 3D旋转</a>
          <a href="translate3d.html" class="nav-item">translate3d() 3D平移</a>
          <a href="transform-style.html" class="nav-item active">transform-style 3D空间</a>
        </div>
      </nav>
    </aside>

    <main class="main-content">
      <div class="demo-page">
        <h1>transform-style - 3D 空间渲染</h1>
        <p class="subtitle">控制子元素是否在 3D 空间中呈现</p>

        <section class="section">
          <h2>什么是 transform-style？</h2>
          <p>transform-style 属性决定元素的子元素是在 3D 空间中定位，还是在元素所在的平面内扁平化。</p>

          <ul>
            <li><strong>应用对象：</strong>设置在父元素上，影响其子元素</li>
            <li><strong>使用场景：</strong>创建 3D 立方体、卡片翻转等复杂 3D 效果</li>
            <li><strong>配合使用：</strong>通常与 perspective 一起使用</li>
          </ul>
        </section>

        <section class="section">
          <h2>语法说明</h2>
          <pre class="code-block"><code><span class="keyword">.parent</span> {
  <span class="property">transform-style</span>: <span class="value">flat | preserve-3d</span>;
}</code></pre>

          <ul>
            <li><span class="highlight">flat</span> - 默认值，子元素在 2D 平面内渲染</li>
            <li><span class="highlight">preserve-3d</span> - 子元素在 3D 空间中渲染</li>
          </ul>
        </section>

        <section class="section">
          <h2>对比演示：flat vs preserve-3d</h2>
          <p>下面两个立方体使用相同的 3D 变换，但 transform-style 不同</p>

          <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 40px; margin: 30px 0">
            <div>
              <h3 style="text-align: center; margin-bottom: 20px">flat（默认）</h3>
              <div class="cube-container">
                <div class="cube rotate-cube" style="transform-style: flat">
                  <div class="cube-face face-front">前</div>
                  <div class="cube-face face-back">后</div>
                  <div class="cube-face face-right">右</div>
                  <div class="cube-face face-left">左</div>
                  <div class="cube-face face-top">上</div>
                  <div class="cube-face face-bottom">下</div>
                </div>
              </div>
              <p style="text-align: center; margin-top: 15px; color: #6b7280; font-size: 0.9rem">❌ 子元素被扁平化，看不到 3D 效果</p>
            </div>

            <div>
              <h3 style="text-align: center; margin-bottom: 20px">preserve-3d</h3>
              <div class="cube-container">
                <div class="cube rotate-cube" style="transform-style: preserve-3d">
                  <div class="cube-face face-front">前</div>
                  <div class="cube-face face-back">后</div>
                  <div class="cube-face face-right">右</div>
                  <div class="cube-face face-left">左</div>
                  <div class="cube-face face-top">上</div>
                  <div class="cube-face face-bottom">下</div>
                </div>
              </div>
              <p style="text-align: center; margin-top: 15px; color: #6b7280; font-size: 0.9rem">✅ 子元素在 3D 空间中，形成真正的立方体</p>
            </div>
          </div>

          <pre class="code-block"><code><span class="comment">/* 错误：子元素被扁平化 */</span>
<span class="keyword">.cube</span> {
  <span class="property">transform-style</span>: <span class="value">flat</span>;
}

<span class="comment">/* 正确：子元素在 3D 空间中 */</span>
<span class="keyword">.cube</span> {
  <span class="property">transform-style</span>: <span class="value">preserve-3d</span>;
}</code></pre>
        </section>

        <section class="section">
          <h2>示例 1：3D 立方体</h2>
          <p>创建一个可以旋转的 3D 立方体</p>

          <div class="cube-container">
            <div class="cube" id="demo-cube" style="transform-style: preserve-3d">
              <div class="cube-face face-front">前</div>
              <div class="cube-face face-back">后</div>
              <div class="cube-face face-right">右</div>
              <div class="cube-face face-left">左</div>
              <div class="cube-face face-top">上</div>
              <div class="cube-face face-bottom">下</div>
            </div>
          </div>

          <div style="text-align: center; margin-top: 20px">
            <button class="play-button" data-demo="rotatecube">旋转立方体</button>
          </div>

          <pre class="code-block"><code><span class="comment">/* 父容器设置透视 */</span>
<span class="keyword">.cube-container</span> {
  <span class="property">perspective</span>: <span class="value">800px</span>;
}

<span class="comment">/* 立方体启用 3D 空间 */</span>
<span class="keyword">.cube</span> {
  <span class="property">transform-style</span>: <span class="value">preserve-3d</span>;
  <span class="property">transform</span>: <span class="value">rotateX(45deg) rotateY(45deg)</span>;
}

<span class="comment">/* 每个面的位置 */</span>
<span class="keyword">.face-front</span>  { <span class="property">transform</span>: <span class="value">translateZ(100px)</span>; }
<span class="keyword">.face-back</span>   { <span class="property">transform</span>: <span class="value">rotateY(180deg) translateZ(100px)</span>; }
<span class="keyword">.face-right</span>  { <span class="property">transform</span>: <span class="value">rotateY(90deg) translateZ(100px)</span>; }
<span class="keyword">.face-left</span>   { <span class="property">transform</span>: <span class="value">rotateY(-90deg) translateZ(100px)</span>; }
<span class="keyword">.face-top</span>    { <span class="property">transform</span>: <span class="value">rotateX(90deg) translateZ(100px)</span>; }
<span class="keyword">.face-bottom</span> { <span class="property">transform</span>: <span class="value">rotateX(-90deg) translateZ(100px)</span>; }</code></pre>
        </section>

        <section class="section">
          <h2>示例 2：卡片翻转</h2>
          <p>点击卡片查看翻转效果</p>

          <div class="card-container">
            <div class="card-card" id="flip-card" style="transform-style: preserve-3d" data-demo="flipcard">
              <div class="card-side card-front">
                <div>
                  <h3 style="font-size: 1.5rem; margin-bottom: 10px">正面</h3>
                  <p>点击翻转</p>
                </div>
              </div>
              <div class="card-side card-back">
                <div>
                  <h3 style="font-size: 1.5rem; margin-bottom: 10px; color: #10b981">背面</h3>
                  <p style="color: #6b7280">再次点击返回</p>
                </div>
              </div>
            </div>
          </div>

          <pre class="code-block"><code><span class="comment">/* 卡片容器 */</span>
<span class="keyword">.card</span> {
  <span class="property">transform-style</span>: <span class="value">preserve-3d</span>;
  <span class="property">transition</span>: <span class="value">transform 0.8s</span>;
}

<span class="keyword">.card.flipped</span> {
  <span class="property">transform</span>: <span class="value">rotateY(180deg)</span>;
}

<span class="comment">/* 卡片两面 */</span>
<span class="keyword">.card-front</span> {
  <span class="property">backface-visibility</span>: <span class="value">hidden</span>;
}

<span class="keyword">.card-back</span> {
  <span class="property">backface-visibility</span>: <span class="value">hidden</span>;
  <span class="property">transform</span>: <span class="value">rotateY(180deg)</span>;
}</code></pre>
        </section>

        <section class="section">
          <h2>重要注意事项</h2>

          <div class="info-box">
            <p><strong>必须设置在父元素上：</strong>transform-style 要设置在包含 3D 变换子元素的父元素上，而不是子元素本身</p>
          </div>

          <ul style="margin-top: 20px">
            <li><strong>配合 perspective：</strong>通常需要在父元素或祖先元素上设置 perspective 才能看到 3D 效果</li>
            <li><strong>性能考虑：</strong>preserve-3d 会增加渲染复杂度，仅在需要时使用</li>
            <li><strong>浏览器兼容：</strong>现代浏览器都支持，但某些旧版本可能需要前缀（-webkit-）</li>
            <li><strong>嵌套使用：</strong>如果有多层 3D 嵌套，每一层都需要设置 preserve-3d</li>
          </ul>
        </section>

        <section class="section">
          <h2>常见应用场景</h2>
          <ul>
            <li>🎲 3D 立方体、骰子等立体图形</li>
            <li>🃏 卡片翻转效果（如产品展示、名片）</li>
            <li>📦 3D 产品展示（可旋转查看）</li>
            <li>🎪 3D 轮播图、画廊</li>
            <li>🎮 游戏界面、3D 菜单</li>
            <li>📱 移动端的翻页效果</li>
          </ul>

          <div class="info-box" style="margin-top: 20px">
            <p>
              <strong>最佳实践：</strong>创建 3D 效果时，记住这个三层结构：祖父元素设置 perspective（透视点）→ 父元素设置 transform-style: preserve-3d（3D空间）→ 子元素应用 3D 变换（具体变换）
            </p>
          </div>
        </section>
      </div>
    </main>

    <script type="module">
      // 使用事件委托，避免全局命名冲突
      const demos = {
        rotatecube: (param) => {

        },
        flipcard: (param) => {

        }
      };

      // 事件委托：监听所有点击
      document.addEventListener('click', (e) => {
        const button = e.target.closest('[data-demo]');
        if (button) {
          const demoName = button.dataset.demo;
          const param = button.dataset.param;
          if (demos[demoName]) {
            demos[demoName](param);
          }
        }
      });
    </script>
  </body>
</html>
