<!doctype html>
<html data-theme="light" lang="zh-CN">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="description" content="3Dæ—‹è½¬ç›¸å†Œ - ä½¿ç”¨ rotateY å’Œ perspective å®ç°ç«‹ä½“ç›¸å†Œæ•ˆæœ" />
    <title>3Dæ—‹è½¬ç›¸å†Œ - CSS Transform & Transition å®æˆ˜åº”ç”¨</title>
    <link href="/src/styles/common.css" rel="stylesheet" />
    <link href="../styles.css" rel="stylesheet" />
    <link href="styles.css" rel="stylesheet" />
    <!-- é˜²æ­¢ä¸»é¢˜é—ªçƒ -->
    <script>
      (function () {
        try {
          const theme = localStorage.getItem('themeMode') || 'light';
          const color = localStorage.getItem('primaryColor') || '#10b981';
          let actualTheme = theme;
          if (theme === 'auto') {
            actualTheme = window.matchMedia('(prefers-color-scheme: dark)').matches ? 'dark' : 'light';
          }
          document.documentElement.setAttribute('data-theme', actualTheme);
          document.documentElement.style.setProperty('--primary', color);
        } catch (e) {
          console.log(e);
        }
      })();
    </script>
    <script type="module" src="/src/theme-sync.js"></script>
    <style>
      /* æ¼”ç¤ºä¸“ç”¨æ ·å¼ */
      .carousel-container {
        display: flex;
        flex-direction: column;
        align-items: center;
        gap: var(--spacing-lg);
        padding: var(--spacing-xl);
        max-width: 900px;
        margin: 0 auto;
      }

      /* 3Dç›¸å†Œèˆå° */
      .carousel-stage {
        width: 100%;
        max-width: 600px;
        height: 400px;
        perspective: 1200px;
        display: flex;
        align-items: center;
        justify-content: center;
        position: relative;
      }

      /* ç›¸å†Œå®¹å™¨ */
      .carousel-3d {
        width: 300px;
        height: 300px;
        position: relative;
        transform-style: preserve-3d;
        transition: transform 0.8s cubic-bezier(0.4, 0, 0.2, 1);
      }

      /* ç…§ç‰‡é¡¹ */
      .carousel-item {
        position: absolute;
        width: 280px;
        height: 280px;
        left: 50%;
        top: 50%;
        margin-left: -140px;
        margin-top: -140px;
        border-radius: var(--radius-lg);
        overflow: hidden;
        box-shadow: 0 10px 40px rgba(0, 0, 0, 0.3);
        transition: all 0.3s ease;
        backface-visibility: hidden;
      }

      .carousel-item img {
        width: 100%;
        height: 100%;
        object-fit: cover;
        display: block;
      }

      /* ç…§ç‰‡æ ‡é¢˜ */
      .carousel-caption {
        position: absolute;
        bottom: 0;
        left: 0;
        right: 0;
        padding: var(--spacing-md);
        background: linear-gradient(to top, rgba(0, 0, 0, 0.8), transparent);
        color: white;
        font-size: 0.95rem;
        font-weight: 600;
        text-align: center;
        transform: translateY(100%);
        transition: transform 0.3s ease;
      }

      .carousel-item:hover .carousel-caption {
        transform: translateY(0);
      }

      /* å½“å‰ç…§ç‰‡é«˜äº® */
      .carousel-item.active {
        box-shadow: 0 15px 60px rgba(16, 185, 129, 0.4);
      }

      /* æ§åˆ¶é¢æ¿ */
      .carousel-controls {
        width: 100%;
        max-width: 600px;
        display: flex;
        flex-direction: column;
        gap: var(--spacing-md);
      }

      .control-buttons-row {
        display: flex;
        justify-content: center;
        gap: var(--spacing-sm);
        flex-wrap: wrap;
      }

      .control-buttons-row .btn {
        min-width: 120px;
      }

      /* ç¼©ç•¥å›¾å¯¼èˆª */
      .thumbnail-nav {
        display: flex;
        justify-content: center;
        gap: var(--spacing-sm);
        flex-wrap: wrap;
        padding: var(--spacing-md);
        background: var(--bg-secondary);
        border-radius: var(--radius-lg);
        border: 1px solid var(--border-color);
      }

      .thumbnail {
        width: 60px;
        height: 60px;
        border-radius: var(--radius-sm);
        overflow: hidden;
        cursor: pointer;
        border: 3px solid transparent;
        transition: all var(--transition-base);
        opacity: 0.6;
      }

      .thumbnail:hover {
        opacity: 1;
        transform: scale(1.1);
      }

      .thumbnail.active {
        border-color: var(--primary);
        opacity: 1;
        box-shadow: 0 0 0 2px var(--primary-light);
      }

      .thumbnail img {
        width: 100%;
        height: 100%;
        object-fit: cover;
        display: block;
      }

      /* è‡ªåŠ¨æ’­æ”¾åŠ¨ç”» */
      @keyframes autoRotate {
        from {
          transform: rotateY(0deg);
        }
        to {
          transform: rotateY(-360deg);
        }
      }

      .carousel-3d.auto-play {
        animation: autoRotate 20s linear infinite;
      }

      /* ç§»åŠ¨ç«¯é€‚é… */
      @media (max-width: 768px) {
        .carousel-container {
          padding: var(--spacing-sm);
          max-width: 100%;
        }

        .carousel-stage {
          height: 350px;
          max-width: 100%;
        }

        .carousel-3d {
          width: 250px;
          height: 250px;
        }

        .carousel-item {
          width: 230px;
          height: 230px;
          margin-left: -115px;
          margin-top: -115px;
        }

        .thumbnail {
          width: 50px;
          height: 50px;
        }

        .control-buttons-row {
          flex-wrap: wrap;
        }

        .control-buttons-row .btn {
          min-width: 100px;
          font-size: 0.9rem;
          flex: 1;
        }
      }

      @media (max-width: 480px) {
        .carousel-container {
          padding: var(--spacing-xs);
        }

        .carousel-stage {
          height: 280px;
        }

        .carousel-3d {
          width: 180px;
          height: 180px;
        }

        .carousel-item {
          width: 160px;
          height: 160px;
          margin-left: -80px;
          margin-top: -80px;
        }

        .thumbnail {
          width: 40px;
          height: 40px;
        }

        .control-buttons-row {
          flex-direction: column;
        }

        .control-buttons-row .btn {
          width: 100%;
        }
      }
    </style>
  </head>
  <body>
    <div class="demo-page">
      <!-- é¢åŒ…å±‘å¯¼èˆª -->
      <nav class="breadcrumb">
        <a href="../../index.html">é¦–é¡µ</a>
        <span class="separator">â€º</span>
        <a href="../index.html">CSS Transform & Transition</a>
        <span class="separator">â€º</span>
        <a href="index.html">å®æˆ˜åº”ç”¨</a>
        <span class="separator">â€º</span>
        <span class="current">3Dæ—‹è½¬ç›¸å†Œ</span>
      </nav>

      <!-- æ ‡é¢˜å’Œæè¿° -->
      <h1>ğŸ“¦ 3Dæ—‹è½¬ç›¸å†Œ</h1>
      <p class="subtitle">ä½¿ç”¨ rotateY å’Œ perspective åˆ›å»ºç«‹ä½“æ—‹è½¬ç›¸å†Œï¼Œå¤šå¼ ç…§ç‰‡å›´æˆä¸€åœˆï¼Œå¯ä»¥æ—‹è½¬æŸ¥çœ‹æ¯ä¸€å¼ </p>

      <!-- çŸ¥è¯†ç‚¹æ ‡ç­¾ -->
      <div class="knowledge-tags">
        <span class="tag-label">ä½¿ç”¨çš„çŸ¥è¯†ç‚¹ï¼š</span>
        <a class="knowledge-tag" href="../demos/rotateY.html">
          <span class="tag-icon">ğŸ”„</span>
          rotateY()
        </a>
        <a class="knowledge-tag" href="../demos/perspective.html">
          <span class="tag-icon">ğŸ‘ï¸</span>
          perspective
        </a>
        <a class="knowledge-tag" href="../demos/transform-style.html">
          <span class="tag-icon">ğŸ“¦</span>
          transform-style
        </a>
        <a class="knowledge-tag" href="../demos/timing.html">
          <span class="tag-icon">ğŸ“ˆ</span>
          transition-timing-function
        </a>
      </div>

      <!-- äº¤äº’æ¼”ç¤ºåŒº -->
      <section class="interactive-demo">
        <h2>äº¤äº’æ¼”ç¤º</h2>
        <p>ç‚¹å‡»ç¼©ç•¥å›¾æˆ–ä½¿ç”¨æŒ‰é’®åˆ‡æ¢ç…§ç‰‡ï¼Œä½“éªŒ3Dæ—‹è½¬ç›¸å†Œæ•ˆæœ</p>

        <div class="demo-info">
          <p>ğŸ’¡ æç¤ºï¼šç‚¹å‡»ä¸‹æ–¹ç¼©ç•¥å›¾å¿«é€Ÿè·³è½¬åˆ°å¯¹åº”ç…§ç‰‡ï¼Œæˆ–ä½¿ç”¨ä¸Šä¸€å¼ /ä¸‹ä¸€å¼ æŒ‰é’®æµè§ˆ</p>
        </div>

        <div class="carousel-container">
          <!-- 3Dç›¸å†Œèˆå° -->
          <div class="carousel-stage">
            <div id="carousel-3d" class="carousel-3d"></div>
          </div>

          <!-- æ§åˆ¶é¢æ¿ -->
          <div class="carousel-controls">
            <!-- æ§åˆ¶æŒ‰é’® -->
            <div class="control-buttons-row">
              <button id="prev-btn" class="btn">â† ä¸Šä¸€å¼ </button>
              <button id="auto-play-btn" class="btn btn-secondary">è‡ªåŠ¨æ’­æ”¾</button>
              <button id="next-btn" class="btn">ä¸‹ä¸€å¼  â†’</button>
            </div>

            <!-- ç¼©ç•¥å›¾å¯¼èˆª -->
            <div id="thumbnail-nav" class="thumbnail-nav"></div>
          </div>
        </div>
      </section>

      <!-- å®ç°æ­¥éª¤ -->
      <section class="implementation">
        <h2>å®ç°æ­¥éª¤</h2>

        <h3>æ­¥éª¤ 1ï¼šHTML ç»“æ„</h3>
        <p>åˆ›å»º3Dç›¸å†Œçš„å®¹å™¨ç»“æ„ï¼š</p>

        <div class="code-section">
          <div class="code-header">
            <span class="code-label">HTML</span>
          </div>
          <pre class="code-block"><code><span class="comment">&lt;!-- 3Dç›¸å†Œèˆå° --&gt;</span>
<span class="tag">&lt;div</span> <span class="attr">class</span>=<span class="string">"carousel-stage"</span><span class="tag">&gt;</span>
  <span class="comment">&lt;!-- ç›¸å†Œå®¹å™¨ï¼ˆå¯æ—‹è½¬ï¼‰ --&gt;</span>
  <span class="tag">&lt;div</span> <span class="attr">class</span>=<span class="string">"carousel-3d"</span><span class="tag">&gt;</span>
    <span class="comment">&lt;!-- ç…§ç‰‡é¡¹ï¼ˆé€šè¿‡ JavaScript åŠ¨æ€ç”Ÿæˆï¼‰ --&gt;</span>
    <span class="tag">&lt;div</span> <span class="attr">class</span>=<span class="string">"carousel-item"</span><span class="tag">&gt;</span>
      <span class="tag">&lt;img</span> <span class="attr">src</span>=<span class="string">"..."</span> <span class="attr">alt</span>=<span class="string">"ç…§ç‰‡"</span><span class="tag">&gt;</span>
      <span class="tag">&lt;div</span> <span class="attr">class</span>=<span class="string">"carousel-caption"</span><span class="tag">&gt;</span>ç…§ç‰‡æ ‡é¢˜<span class="tag">&lt;/div&gt;</span>
    <span class="tag">&lt;/div&gt;</span>
  <span class="tag">&lt;/div&gt;</span>
<span class="tag">&lt;/div&gt;</span></code></pre>
        </div>

        <h3>æ­¥éª¤ 2ï¼šè®¾ç½® 3D ç©ºé—´</h3>
        <p>åœ¨èˆå°ä¸Šè®¾ç½® perspectiveï¼Œåœ¨ç›¸å†Œå®¹å™¨ä¸Šè®¾ç½® transform-styleï¼š</p>

        <div class="code-section">
          <div class="code-header">
            <span class="code-label">CSS</span>
          </div>
          <pre class="code-block"><code><span class="comment">/* 3Dç›¸å†Œèˆå° - æä¾›é€è§† */</span>
<span class="keyword">.carousel-stage</span> {
  <span class="property">width</span>: <span class="value">600px</span>;
  <span class="property">height</span>: <span class="value">400px</span>;
  <span class="property">perspective</span>: <span class="value">1200px</span>;
}

<span class="comment">/* ç›¸å†Œå®¹å™¨ - ä¿æŒ 3D ç©ºé—´ */</span>
<span class="keyword">.carousel-3d</span> {
  <span class="property">width</span>: <span class="value">300px</span>;
  <span class="property">height</span>: <span class="value">300px</span>;
  <span class="property">transform-style</span>: <span class="value">preserve-3d</span>;
  <span class="property">transition</span>: <span class="value">transform 0.8s cubic-bezier(0.4, 0, 0.2, 1)</span>;
}</code></pre>
        </div>

        <h3>æ­¥éª¤ 3ï¼šè®¡ç®—ç…§ç‰‡ä½ç½®</h3>
        <p>æ ¹æ®ç…§ç‰‡æ•°é‡ï¼Œè®¡ç®—æ¯å¼ ç…§ç‰‡çš„æ—‹è½¬è§’åº¦å’Œä½ç½®ï¼š</p>

        <div class="code-section">
          <div class="code-header">
            <span class="code-label">JavaScript</span>
          </div>
          <pre class="code-block"><code><span class="keyword">const</span> totalImages = <span class="value">8</span>;
<span class="keyword">const</span> angleStep = <span class="value">360</span> / totalImages;  <span class="comment">// æ¯å¼ ç…§ç‰‡é—´éš”è§’åº¦</span>
<span class="keyword">const</span> radius = <span class="value">400</span>;  <span class="comment">// ç›¸å†ŒåŠå¾„</span>

<span class="comment">// ä¸ºæ¯å¼ ç…§ç‰‡è®¾ç½®ä½ç½®</span>
images.<span class="value">forEach</span>((<span class="keyword">img</span>, <span class="keyword">index</span>) =&gt; {
  <span class="keyword">const</span> angle = angleStep * index;
  <span class="keyword">const</span> item = <span class="property">document</span>.<span class="value">createElement</span>(<span class="string">'div'</span>);
  item.<span class="property">className</span> = <span class="string">'carousel-item'</span>;

  <span class="comment">// æ—‹è½¬å¹¶å‘å¤–æ¨</span>
  item.<span class="property">style</span>.<span class="property">transform</span> = <span class="string">`rotateY(</span><span class="value">${angle}</span><span class="string">deg) translateZ(</span><span class="value">${radius}</span><span class="string">px)`</span>;
});</code></pre>
        </div>

        <h3>æ­¥éª¤ 4ï¼šå®ç°æ—‹è½¬åˆ‡æ¢</h3>
        <p>é€šè¿‡æ—‹è½¬æ•´ä¸ªç›¸å†Œå®¹å™¨æ¥åˆ‡æ¢ç…§ç‰‡ï¼š</p>

        <div class="code-section">
          <div class="code-header">
            <span class="code-label">JavaScript</span>
          </div>
          <pre class="code-block"><code><span class="keyword">let</span> currentIndex = <span class="value">0</span>;

<span class="keyword">function</span> <span class="value">rotateTo</span>(<span class="keyword">index</span>) {
  currentIndex = index;
  <span class="keyword">const</span> angle = -angleStep * index;  <span class="comment">// è´Ÿæ•°è¡¨ç¤ºåå‘æ—‹è½¬</span>

  carousel.<span class="property">style</span>.<span class="property">transform</span> = <span class="string">`rotateY(</span><span class="value">${angle}</span><span class="string">deg)`</span>;
}

<span class="comment">// ä¸‹ä¸€å¼ </span>
<span class="keyword">function</span> <span class="value">next</span>() {
  currentIndex = (currentIndex + <span class="value">1</span>) % totalImages;
  <span class="value">rotateTo</span>(currentIndex);
}

<span class="comment">// ä¸Šä¸€å¼ </span>
<span class="keyword">function</span> <span class="value">prev</span>() {
  currentIndex = (currentIndex - <span class="value">1</span> + totalImages) % totalImages;
  <span class="value">rotateTo</span>(currentIndex);
}</code></pre>
        </div>

        <h3>æ­¥éª¤ 5ï¼šæ·»åŠ ç¼©ç•¥å›¾å¯¼èˆª</h3>
        <p>åˆ›å»ºç¼©ç•¥å›¾ï¼Œç‚¹å‡»å¯å¿«é€Ÿè·³è½¬åˆ°å¯¹åº”ç…§ç‰‡ï¼š</p>

        <div class="code-section">
          <div class="code-header">
            <span class="code-label">JavaScript</span>
          </div>
          <pre class="code-block"><code><span class="comment">// åˆ›å»ºç¼©ç•¥å›¾</span>
images.<span class="value">forEach</span>((<span class="keyword">img</span>, <span class="keyword">index</span>) =&gt; {
  <span class="keyword">const</span> thumb = <span class="property">document</span>.<span class="value">createElement</span>(<span class="string">'div'</span>);
  thumb.<span class="property">className</span> = <span class="string">'thumbnail'</span>;
  thumb.<span class="property">innerHTML</span> = <span class="string">`&lt;img src="</span><span class="value">${img.url}</span><span class="string">" alt="</span><span class="value">${img.title}</span><span class="string">"&gt;`</span>;

  <span class="comment">// ç‚¹å‡»è·³è½¬</span>
  thumb.<span class="value">addEventListener</span>(<span class="string">'click'</span>, () =&gt; {
    <span class="value">rotateTo</span>(index);
  });

  thumbnailNav.<span class="value">appendChild</span>(thumb);
});</code></pre>
        </div>
      </section>

      <!-- å…³é”®è¦ç‚¹ -->
      <section class="key-points">
        <h2>å…³é”®è¦ç‚¹</h2>
        <ul>
          <li><strong>åœ†å½¢æ’åˆ—</strong>ï¼šä½¿ç”¨ rotateY å’Œ translateZ å°†ç…§ç‰‡æ’åˆ—æˆåœ†å½¢ï¼Œæ¯å¼ ç…§ç‰‡é—´éš” 360Â° Ã· ç…§ç‰‡æ•°é‡</li>
          <li><strong>åŠå¾„è®¡ç®—</strong>ï¼štranslateZ çš„å€¼å†³å®šäº†åœ†çš„åŠå¾„ï¼Œå€¼è¶Šå¤§åœ†è¶Šå¤§ï¼Œç…§ç‰‡ä¹‹é—´è·ç¦»è¶Šè¿œ</li>
          <li><strong>åå‘æ—‹è½¬</strong>ï¼šæ—‹è½¬å®¹å™¨æ—¶ä½¿ç”¨è´Ÿè§’åº¦ï¼Œè¿™æ ·ç…§ç‰‡ä¼šæŒ‰æ­£ç¡®æ–¹å‘åˆ‡æ¢åˆ°å‰é¢</li>
          <li><strong>å¹³æ»‘è¿‡æ¸¡</strong>ï¼šä½¿ç”¨ cubic-bezier ç¼“åŠ¨å‡½æ•°åˆ›å»ºæ›´è‡ªç„¶çš„æ—‹è½¬åŠ¨ç”»æ•ˆæœ</li>
          <li><strong>backface-visibility</strong>ï¼šéšè—ç…§ç‰‡èƒŒé¢ï¼Œé¿å…æ—‹è½¬åˆ°èƒŒé¢æ—¶çœ‹åˆ°é•œåƒ</li>
          <li><strong>å®é™…åº”ç”¨</strong>ï¼šé€‚ç”¨äºç…§ç‰‡å±•ç¤ºã€äº§å“è½®æ’­ã€å›¢é˜Ÿæˆå‘˜ä»‹ç»ç­‰éœ€è¦å¤šé¡¹å±•ç¤ºçš„åœºæ™¯</li>
          <li><strong>å“åº”å¼è®¾è®¡</strong>ï¼šåœ¨ç§»åŠ¨ç«¯é€‚å½“å‡å°ç›¸å†Œå°ºå¯¸å’ŒåŠå¾„ï¼Œä¿è¯è‰¯å¥½çš„æ˜¾ç¤ºæ•ˆæœ</li>
          <li><strong>ç”¨æˆ·ä½“éªŒ</strong>ï¼šæä¾›ç¼©ç•¥å›¾ï¿½ï¿½èˆªå’ŒæŒ‰é’®æ§åˆ¶ï¼Œè®©ç”¨æˆ·å¯ä»¥å¿«é€Ÿå®šä½åˆ°æƒ³çœ‹çš„ç…§ç‰‡</li>
        </ul>
      </section>

      <!-- ç›¸å…³æ¼”ç¤º -->
      <section class="related-demos">
        <h2>ç›¸å…³æ¼”ç¤º</h2>
        <div class="scenario-links">
          <a class="scenario-link" href="../demos/rotateY.html">
            <span class="scenario-icon">ğŸ”„</span>
            <div class="scenario-content">
              <h4>rotateY() åŸºç¡€</h4>
              <p>äº†è§£ Y è½´æ—‹è½¬çš„åŸºæœ¬ç”¨æ³• â†’</p>
            </div>
          </a>
          <a class="scenario-link" href="../demos/perspective.html">
            <span class="scenario-icon">ğŸ‘ï¸</span>
            <div class="scenario-content">
              <h4>perspective é€è§†</h4>
              <p>ç†è§£ 3D é€è§†çš„åŸç† â†’</p>
            </div>
          </a>
          <a class="scenario-link" href="carousel.html">
            <span class="scenario-icon">ğŸ </span>
            <div class="scenario-content">
              <h4>2D è½®æ’­å›¾</h4>
              <p>å¯¹æ¯” 2D å’Œ 3D è½®æ’­çš„åŒºåˆ« â†’</p>
            </div>
          </a>
          <a class="scenario-link" href="card-flip.html">
            <span class="scenario-icon">ğŸ´</span>
            <div class="scenario-content">
              <h4>å¡ç‰‡ç¿»è½¬</h4>
              <p>æ¢ç´¢å¦ä¸€ç§ 3D æ•ˆæœ â†’</p>
            </div>
          </a>
        </div>
      </section>

      <!-- è¿”å›é“¾æ¥ -->
      <div style="margin-top: 60px; text-align: center">
        <a class="btn" href="index.html">â† è¿”å›å®æˆ˜åº”ç”¨åˆ—è¡¨</a>
      </div>
    </div>

    <script type="module">
      // ç…§ç‰‡æ•°æ®ï¼ˆä½¿ç”¨ Unsplash å…è´¹å›¾ç‰‡ï¼‰
      const images = [
        {
          url: 'https://images.unsplash.com/photo-1506905925346-21bda4d32df4?w=400&h=400&fit=crop',
          title: 'å±±è„‰é£å…‰',
        },
        {
          url: 'https://images.unsplash.com/photo-1469474968028-56623f02e42e?w=400&h=400&fit=crop',
          title: 'è‡ªç„¶ç¾æ™¯',
        },
        {
          url: 'https://images.unsplash.com/photo-1470071459604-3b5ec3a7fe05?w=400&h=400&fit=crop',
          title: 'æ£®æ—å°å¾„',
        },
        {
          url: 'https://images.unsplash.com/photo-1441974231531-c6227db76b6e?w=400&h=400&fit=crop',
          title: 'ç”°é‡é£å…‰',
        },
        {
          url: 'https://images.unsplash.com/photo-1426604966848-d7adac402bff?w=400&h=400&fit=crop',
          title: 'æ¹–å…‰å±±è‰²',
        },
        {
          url: 'https://images.unsplash.com/photo-1472214103451-9374bd1c798e?w=400&h=400&fit=crop',
          title: 'æ—¥è½æ—¶åˆ†',
        },
        {
          url: 'https://images.unsplash.com/photo-1501594907352-04cda38ebc29?w=400&h=400&fit=crop',
          title: 'æµ·æ»¨é£æ™¯',
        },
        {
          url: 'https://images.unsplash.com/photo-1475924156734-496f6cac6ec1?w=400&h=400&fit=crop',
          title: 'æ˜Ÿç©ºå¤œæ™¯',
        },
      ];

      const carousel = document.getElementById('carousel-3d');
      const thumbnailNav = document.getElementById('thumbnail-nav');
      const prevBtn = document.getElementById('prev-btn');
      const nextBtn = document.getElementById('next-btn');
      const autoPlayBtn = document.getElementById('auto-play-btn');

      let currentIndex = 0;
      let isAutoPlaying = false;
      let autoPlayInterval = null;

      const totalImages = images.length;
      const angleStep = 360 / totalImages;
      const radius = 400;

      // åˆå§‹åŒ–ç›¸å†Œ
      function initCarousel() {
        // åˆ›å»ºç…§ç‰‡é¡¹
        images.forEach((img, index) => {
          const item = document.createElement('div');
          item.className = 'carousel-item';
          if (index === 0) {
            item.classList.add('active');
          }

          const angle = angleStep * index;
          item.style.transform = `rotateY(${angle}deg) translateZ(${radius}px)`;

          item.innerHTML = `
            <img src="${img.url}" alt="${img.title}" loading="lazy">
            <div class="carousel-caption">${img.title}</div>
          `;

          carousel.appendChild(item);

          // åˆ›å»ºç¼©ç•¥å›¾
          const thumb = document.createElement('div');
          thumb.className = 'thumbnail';
          if (index === 0) {
            thumb.classList.add('active');
          }
          thumb.innerHTML = `<img src="${img.url}" alt="${img.title}">`;
          thumb.addEventListener('click', () => rotateTo(index));
          thumbnailNav.appendChild(thumb);
        });
      }

      // æ—‹è½¬åˆ°æŒ‡å®šç´¢å¼•
      function rotateTo(index) {
        currentIndex = index;
        const angle = -angleStep * index;
        carousel.style.transform = `rotateY(${angle}deg)`;

        // æ›´æ–°æ´»åŠ¨çŠ¶æ€
        document.querySelectorAll('.carousel-item').forEach((item, i) => {
          item.classList.toggle('active', i === index);
        });
        document.querySelectorAll('.thumbnail').forEach((thumb, i) => {
          thumb.classList.toggle('active', i === index);
        });
      }

      // ä¸‹ä¸€å¼ 
      function next() {
        currentIndex = (currentIndex + 1) % totalImages;
        rotateTo(currentIndex);
      }

      // ä¸Šä¸€å¼ 
      function prev() {
        currentIndex = (currentIndex - 1 + totalImages) % totalImages;
        rotateTo(currentIndex);
      }

      // è‡ªåŠ¨æ’­æ”¾
      function toggleAutoPlay() {
        isAutoPlaying = !isAutoPlaying;

        if (isAutoPlaying) {
          autoPlayBtn.textContent = 'åœæ­¢æ’­æ”¾';
          autoPlayBtn.classList.remove('btn-secondary');
          autoPlayBtn.classList.add('btn');
          autoPlayInterval = setInterval(next, 3000);
        } else {
          autoPlayBtn.textContent = 'è‡ªåŠ¨æ’­æ”¾';
          autoPlayBtn.classList.remove('btn');
          autoPlayBtn.classList.add('btn-secondary');
          clearInterval(autoPlayInterval);
        }
      }

      // äº‹ä»¶ç›‘å¬
      prevBtn.addEventListener('click', prev);
      nextBtn.addEventListener('click', next);
      autoPlayBtn.addEventListener('click', toggleAutoPlay);

      // é”®ç›˜æ§åˆ¶
      document.addEventListener('keydown', (e) => {
        if (e.key === 'ArrowLeft') {
          prev();
        }
        if (e.key === 'ArrowRight') {
          next();
        }
      });

      // åˆå§‹åŒ–
      initCarousel();
    </script>
  </body>
</html>
