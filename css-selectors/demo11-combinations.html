<!doctype html>
<html data-theme="light" lang="zh-CN">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>é€‰æ‹©å™¨ç»„åˆå®æˆ˜ - CSS ç°ä»£é€‰æ‹©å™¨</title>
    <link href="/src/styles/common.css" rel="stylesheet" />
    <link href="styles.css" rel="stylesheet" />
    <script>
      (function () {
        try {
          const theme = localStorage.getItem('themeMode') || 'light';
          const color = localStorage.getItem('primaryColor') || '#10b981';
          let actualTheme = theme;
          if (theme === 'auto') {
            actualTheme = window.matchMedia('(prefers-color-scheme: dark)').matches ? 'dark' : 'light';
          }
          document.documentElement.setAttribute('data-theme', actualTheme);
          document.documentElement.style.setProperty('--primary', color);
        } catch (e) {
          console.log(e);
        }
      })();
    </script>
    <script type="module" src="/src/theme.js"></script>
    <script src="compatibility-check.js"></script>
    <script src="accessibility-enhancements.js"></script>
  </head>
  <body data-demo="combinations">
    <!-- Skip to main content link for accessibility -->
    <a class="skip-link" href="#main-content">è·³è½¬åˆ°ä¸»è¦å†…å®¹</a>

    <!-- å·¦ä¾§è¾¹æ å¯¼èˆª -->
    <aside class="sidebar" aria-label="æ¼”ç¤ºå¯¼èˆª" role="navigation">
      <div class="sidebar-header">
        <h1>CSS ç°ä»£é€‰æ‹©å™¨</h1>
        <a class="back-home" href="index.html" aria-label="è¿”å›ä¸»é¡µ">â† è¿”å›ä¸»é¡µ</a>
      </div>
      <nav class="sidebar-nav" aria-label="ä¸»å¯¼èˆª">
        <div class="nav-section">
          <h3>åŸºç¡€æ¦‚å¿µ</h3>
          <a class="nav-item" href="demo1-specificity.html">é€‰æ‹©å™¨ä¼˜å…ˆçº§</a>
        </div>
        <div class="nav-section">
          <h3>é€»è¾‘é€‰æ‹©å™¨</h3>
          <a class="nav-item" href="demo2-is.html">:is() ä¼ªç±»</a>
          <a class="nav-item" href="demo3-where.html">:where() ä¼ªç±»</a>
          <a class="nav-item" href="demo4-not.html">:not() ä¼ªç±»</a>
        </div>
        <div class="nav-section">
          <h3>çˆ¶å­å…³ç³»é€‰æ‹©å™¨</h3>
          <a class="nav-item" href="demo5-has-basics.html">:has() åŸºç¡€</a>
          <a class="nav-item" href="demo6-has-practical.html">:has() å®æˆ˜</a>
        </div>
        <div class="nav-section">
          <h3>çŠ¶æ€é€‰æ‹©å™¨</h3>
          <a class="nav-item" href="demo7-focus-within.html">:focus-within</a>
          <a class="nav-item" href="demo8-focus-visible.html">:focus-visible</a>
        </div>
        <div class="nav-section">
          <h3>ç»“æ„é€‰æ‹©å™¨è¿›é˜¶</h3>
          <a class="nav-item" href="demo9-nth-child.html">:nth-child() é«˜çº§</a>
          <a class="nav-item" href="demo10-nth-comparison.html">ç»“æ„é€‰æ‹©å™¨å¯¹æ¯”</a>
        </div>
        <div class="nav-section">
          <h3>ç»¼åˆå®æˆ˜</h3>
          <a class="nav-item active" href="demo11-combinations.html">é€‰æ‹©å™¨ç»„åˆå®æˆ˜</a>
        </div>
      </nav>
    </aside>

    <!-- å³ä¾§ä¸»å†…å®¹åŒº -->
    <main id="main-content" class="main-content" role="main">
      <div class="demo-page">
        <h1>é€‰æ‹©å™¨ç»„åˆå®æˆ˜</h1>
        <p class="subtitle">å¤šä¸ªç°ä»£é€‰æ‹©å™¨ç»„åˆä½¿ç”¨çš„å¤æ‚æ¡ˆä¾‹</p>

        <!-- æ¦‚å¿µä»‹ç» -->
        <section class="concept-section">
          <h2>ç»„åˆé€‰æ‹©å™¨çš„å¨åŠ›</h2>
          <p>
            å•ç‹¬ä½¿ç”¨ç°ä»£é€‰æ‹©å™¨å·²ç»å¾ˆå¼ºå¤§ï¼Œä½†å½“æˆ‘ä»¬å°† <code>:has()</code>ã€<code>:is()</code>ã€<code>:where()</code>ã€
            <code>:not()</code> ç­‰é€‰æ‹©å™¨ç»„åˆä½¿ç”¨æ—¶ï¼Œå¯ä»¥å®ç°æ›´åŠ å¤æ‚å’Œæ™ºèƒ½çš„æ ·å¼æ§åˆ¶ã€‚
          </p>
          <p>
            æœ¬é¡µé¢å±•ç¤ºäº† 4 ä¸ªçœŸå®çš„å¤æ‚æ¡ˆä¾‹ï¼Œæ¼”ç¤ºå¦‚ä½•é€šè¿‡ç»„åˆå¤šä¸ªç°ä»£é€‰æ‹©å™¨æ¥è§£å†³å®é™…é¡¹ç›®ä¸­çš„æ ·å¼éœ€æ±‚ã€‚
            è¿™äº›æ¡ˆä¾‹æ¶µç›–äº†è¡¨æ ¼ã€è¡¨å•ã€å¸ƒå±€å’Œå¯¼èˆªç­‰å¸¸è§åœºæ™¯ã€‚
          </p>
          <ul>
            <li><strong>å“åº”å¼è¡¨æ ¼</strong> - æ ¹æ®æ•°æ®çŠ¶æ€å’Œé€‰ä¸­çŠ¶æ€åŠ¨æ€è°ƒæ•´è¡¨æ ¼æ ·å¼</li>
            <li><strong>åŠ¨æ€è¡¨å•éªŒè¯</strong> - ç»„åˆå¤šä¸ªé€‰æ‹©å™¨å®ç°å¤æ‚çš„è¡¨å•éªŒè¯é€»è¾‘</li>
            <li><strong>æ¡ä»¶æ ·å¼å¸ƒå±€</strong> - æ ¹æ®å†…å®¹å­˜åœ¨ä¸å¦è‡ªåŠ¨è°ƒæ•´å¸ƒå±€</li>
            <li><strong>æ™ºèƒ½å¯¼èˆª</strong> - å¤šçº§å¯¼èˆªçš„è‡ªåŠ¨çŠ¶æ€ç®¡ç†</li>
          </ul>
        </section>

        <!-- æ¡ˆä¾‹ 1: å“åº”å¼è¡¨æ ¼æ ·å¼ -->
        <section class="demo-section">
          <h2>æ¡ˆä¾‹ 1: å“åº”å¼è¡¨æ ¼æ ·å¼</h2>
          <p style="color: var(--text-secondary); margin-bottom: 20px">
            ä½¿ç”¨ <code>:has()</code> å’Œ <code>:not()</code> ç»„åˆï¼Œæ ¹æ®è¡¨æ ¼è¡Œçš„æ•°æ®çŠ¶æ€å’Œé€‰ä¸­çŠ¶æ€ï¼Œ
            åŠ¨æ€æ˜¾ç¤ºæ‰¹é‡æ“ä½œæŒ‰é’®ã€é«˜äº®é”™è¯¯è¡Œã€æ˜¾ç¤ºç©ºçŠ¶æ€æç¤ºã€‚
          </p>

          <div class="demo-container single-column">
            <div class="demo-preview">
              <div class="demo-preview-title">æ•ˆæœé¢„è§ˆ - ç‚¹å‡»å¤é€‰æ¡†æˆ–æŒ‰é’®æµ‹è¯•</div>
              <style>
                .table-demo {
                  max-width: 900px;
                  margin: 0 auto;
                }

                .data-table-container {
                  background: var(--bg-primary);
                  border: 2px solid var(--border-color);
                  border-radius: 12px;
                  padding: 20px;
                  min-height: 400px;
                  position: relative;
                }

                /* æ‰¹é‡æ“ä½œæ  - é»˜è®¤éšè— */
                .bulk-actions {
                  display: none;
                  gap: 10px;
                  padding: 15px;
                  background: var(--primary-light);
                  border-radius: 8px;
                  margin-bottom: 15px;
                  align-items: center;
                }

                /* è¡¨æ ¼åŒ…å«é€‰ä¸­è¡Œæ—¶æ˜¾ç¤ºæ‰¹é‡æ“ä½œ */
                .data-table-container:has(tr.selected) .bulk-actions {
                  display: flex;
                }

                .bulk-actions-label {
                  font-weight: 600;
                  color: var(--primary-dark);
                  margin-right: auto;
                }

                .bulk-btn {
                  padding: 8px 16px;
                  border: none;
                  border-radius: 6px;
                  font-weight: 600;
                  cursor: pointer;
                  transition: all 0.3s;
                  font-size: 0.9rem;
                }

                .bulk-btn.delete {
                  background: var(--error);
                  color: white;
                }

                .bulk-btn.delete:hover {
                  background: var(--error-dark);
                  transform: translateY(-2px);
                }

                .bulk-btn.export {
                  background: var(--success);
                  color: white;
                }

                .bulk-btn.export:hover {
                  background: var(--success-dark);
                  transform: translateY(-2px);
                }

                .data-table {
                  width: 100%;
                  border-collapse: collapse;
                }

                .data-table thead {
                  background: var(--bg-secondary);
                }

                .data-table th {
                  padding: 12px;
                  text-align: left;
                  font-weight: 700;
                  color: var(--text-primary);
                  border-bottom: 2px solid var(--border-color);
                  font-size: 0.9rem;
                }

                .data-table td {
                  padding: 12px;
                  border-bottom: 1px solid var(--border-color);
                  color: var(--text-primary);
                }

                .data-table tbody tr {
                  transition: all 0.3s;
                  cursor: pointer;
                }

                .data-table tbody tr:hover {
                  background: var(--bg-secondary);
                }

                /* è¡¨æ ¼è¡ŒåŒ…å«é”™è¯¯æ•°æ®æ—¶é«˜äº® */
                .data-table tbody tr:has(.error-cell) {
                  background: var(--error-light);
                  border-left: 4px solid var(--error);
                }

                .data-table tbody tr:has(.error-cell):hover {
                  background: var(--error-light);
                }

                .error-cell {
                  color: var(--error);
                  font-weight: 600;
                }

                .error-cell::before {
                  content: 'âš ï¸ ';
                }

                /* é€‰ä¸­çš„è¡Œæ ·å¼ */
                .data-table tbody tr.selected {
                  background: var(--primary-light);
                  border-left: 4px solid var(--primary);
                }

                .data-table tbody tr.selected:hover {
                  background: var(--primary-light);
                }

                /* è¡¨æ ¼ä¸ºç©ºæ—¶æ˜¾ç¤ºæç¤º */
                .empty-table-message {
                  display: none;
                  text-align: center;
                  padding: 60px 20px;
                  color: var(--text-secondary);
                }

                .data-table-container:not(:has(tbody tr)) .empty-table-message {
                  display: block;
                }

                .data-table-container:not(:has(tbody tr)) .data-table {
                  display: none;
                }

                .empty-table-message .icon {
                  font-size: 4rem;
                  margin-bottom: 15px;
                  opacity: 0.5;
                }

                .empty-table-message h3 {
                  margin: 0 0 10px;
                  color: var(--text-primary);
                  font-size: 1.3rem;
                }

                .add-row-btn {
                  margin-top: 15px;
                  padding: 10px 20px;
                  background: var(--primary);
                  color: white;
                  border: none;
                  border-radius: 6px;
                  font-weight: 600;
                  cursor: pointer;
                  transition: all 0.3s;
                }

                .add-row-btn:hover {
                  background: var(--primary-dark);
                  transform: translateY(-2px);
                }

                .demo-controls {
                  margin-top: 20px;
                  padding: 15px;
                  background: var(--bg-secondary);
                  border-radius: 8px;
                  display: flex;
                  gap: 10px;
                  flex-wrap: wrap;
                }

                .demo-controls button {
                  padding: 8px 16px;
                  border: 2px solid var(--border-color);
                  border-radius: 6px;
                  background: var(--bg-primary);
                  color: var(--text-primary);
                  font-weight: 600;
                  cursor: pointer;
                  transition: all 0.3s;
                  font-size: 0.85rem;
                }

                .demo-controls button:hover {
                  border-color: var(--primary);
                  color: var(--primary);
                  transform: translateY(-2px);
                }
              </style>

              <div class="table-demo">
                <div class="data-table-container">
                  <div class="bulk-actions" aria-label="æ‰¹é‡æ“ä½œ" role="toolbar">
                    <span class="bulk-actions-label">å·²é€‰ä¸­ <span id="selected-count">0</span> è¡Œ</span>
                    <button class="bulk-btn export" aria-label="å¯¼å‡ºé€‰ä¸­é¡¹">å¯¼å‡º</button>
                    <button class="bulk-btn delete" aria-label="åˆ é™¤é€‰ä¸­é¡¹">åˆ é™¤</button>
                  </div>

                  <table class="data-table" aria-label="ç”¨æˆ·æ•°æ®è¡¨" role="table">
                    <thead>
                      <tr>
                        <th style="width: 50px"></th>
                        <th>ç”¨æˆ·å</th>
                        <th>é‚®ç®±</th>
                        <th>çŠ¶æ€</th>
                        <th>ç§¯åˆ†</th>
                      </tr>
                    </thead>
                    <tbody id="table-body">
                      <tr data-id="1">
                        <td><input type="checkbox" aria-label="é€‰æ‹©ç”¨æˆ· å¼ ä¸‰" /></td>
                        <td>å¼ ä¸‰</td>
                        <td>zhangsan@example.com</td>
                        <td>æ­£å¸¸</td>
                        <td>1250</td>
                      </tr>
                      <tr data-id="2">
                        <td><input type="checkbox" aria-label="é€‰æ‹©ç”¨æˆ· æå››" /></td>
                        <td>æå››</td>
                        <td class="error-cell">invalid-email</td>
                        <td>æ­£å¸¸</td>
                        <td>890</td>
                      </tr>
                      <tr data-id="3">
                        <td><input type="checkbox" aria-label="é€‰æ‹©ç”¨æˆ· ç‹äº”" /></td>
                        <td>ç‹äº”</td>
                        <td>wangwu@example.com</td>
                        <td>æ­£å¸¸</td>
                        <td>2100</td>
                      </tr>
                      <tr data-id="4">
                        <td><input type="checkbox" aria-label="é€‰æ‹©ç”¨æˆ· èµµå…­" /></td>
                        <td>èµµå…­</td>
                        <td>zhaoliu@example.com</td>
                        <td class="error-cell">å·²ç¦ç”¨</td>
                        <td>0</td>
                      </tr>
                    </tbody>
                  </table>

                  <div class="empty-table-message" aria-live="polite" role="status">
                    <div class="icon" aria-hidden="true">ğŸ“‹</div>
                    <h3>æš‚æ— æ•°æ®</h3>
                    <p>è¡¨æ ¼ä¸­è¿˜æ²¡æœ‰ä»»ä½•æ•°æ®</p>
                    <button class="add-row-btn" onclick="addSampleRow()">æ·»åŠ ç¤ºä¾‹æ•°æ®</button>
                  </div>
                </div>

                <div class="demo-controls">
                  <button onclick="clearTable()">æ¸…ç©ºè¡¨æ ¼</button>
                  <button onclick="addSampleRow()">æ·»åŠ æ­£å¸¸è¡Œ</button>
                  <button onclick="addErrorRow()">æ·»åŠ é”™è¯¯è¡Œ</button>
                  <button onclick="selectAll()">å…¨é€‰</button>
                  <button onclick="deselectAll()">å–æ¶ˆå…¨é€‰</button>
                </div>
              </div>

              <p style="margin-top: 20px; color: var(--text-secondary); font-size: 0.9rem">
                ğŸ’¡ å°è¯•é€‰ä¸­è¡Œã€æ·»åŠ /åˆ é™¤æ•°æ®ï¼Œè§‚å¯Ÿæ‰¹é‡æ“ä½œæ ã€é”™è¯¯é«˜äº®å’Œç©ºçŠ¶æ€çš„è‡ªåŠ¨åˆ‡æ¢
              </p>
            </div>

            <div class="demo-code">
              <pre><code><span class="code-comment">/* è¡¨æ ¼åŒ…å«é€‰ä¸­è¡Œæ—¶æ˜¾ç¤ºæ‰¹é‡æ“ä½œ */</span>
.data-table-container:has(tr.selected) .bulk-actions {
  display: flex;
}

<span class="code-comment">/* è¡¨æ ¼è¡ŒåŒ…å«é”™è¯¯æ•°æ®æ—¶é«˜äº® */</span>
.data-table tbody tr:has(.error-cell) {
  background: var(--error-light);
  border-left: 4px solid var(--error);
}

<span class="code-comment">/* è¡¨æ ¼ä¸ºç©ºæ—¶æ˜¾ç¤ºæç¤º */</span>
.data-table-container:not(:has(tbody tr)) .empty-table-message {
  display: block;
}

.data-table-container:not(:has(tbody tr)) .data-table {
  display: none;
}

<span class="code-comment">/* ä¼˜åŠ¿ï¼š
   1. æ— éœ€ JavaScript ç®¡ç† UI çŠ¶æ€
   2. è‡ªåŠ¨å“åº”æ•°æ®å˜åŒ–
   3. ä»£ç ç®€æ´æ˜“ç»´æŠ¤ */</span></code></pre>
            </div>
          </div>
        </section>

        <script>
          // æ¡ˆä¾‹ 1: è¡¨æ ¼äº¤äº’è„šæœ¬
          document.getElementById('table-body')?.addEventListener('change', function (e) {
            if (e.target.type === 'checkbox') {
              const row = e.target.closest('tr');
              if (e.target.checked) {
                row.classList.add('selected');
              } else {
                row.classList.remove('selected');
              }
              updateSelectedCount();
            }
          });

          function updateSelectedCount() {
            const count = document.querySelectorAll('#table-body tr.selected').length;
            const countEl = document.getElementById('selected-count');
            if (countEl) {
              countEl.textContent = count;
            }
          }

          window.clearTable = function clearTable() {
            const tbody = document.getElementById('table-body');
            if (tbody) {
              tbody.innerHTML = '';
            }
            updateSelectedCount();
          };

          window.addSampleRow = function addSampleRow() {
            const tbody = document.getElementById('table-body');
            if (!tbody) {
              return;
            }
            const id = Date.now();
            const row = document.createElement('tr');
            row.setAttribute('data-id', id);
            row.innerHTML = `
              <td><input type="checkbox" aria-label="é€‰æ‹©æ–°ç”¨æˆ·"></td>
              <td>æ–°ç”¨æˆ· ${id % 1000}</td>
              <td>user${id % 1000}@example.com</td>
              <td>æ­£å¸¸</td>
              <td>${Math.floor(Math.random() * 3000)}</td>
            `;
            tbody.appendChild(row);
          };

          window.addErrorRow = function addErrorRow() {
            const tbody = document.getElementById('table-body');
            if (!tbody) {
              return;
            }
            const id = Date.now();
            const row = document.createElement('tr');
            row.setAttribute('data-id', id);
            row.innerHTML = `
              <td><input type="checkbox" aria-label="é€‰æ‹©é”™è¯¯ç”¨æˆ·"></td>
              <td>é”™è¯¯ç”¨æˆ· ${id % 1000}</td>
              <td class="error-cell">invalid-format</td>
              <td>æ­£å¸¸</td>
              <td>0</td>
            `;
            tbody.appendChild(row);
          };

          window.selectAll = function selectAll() {
            document.querySelectorAll('#table-body input[type="checkbox"]').forEach((cb) => {
              cb.checked = true;
              cb.closest('tr').classList.add('selected');
            });
            updateSelectedCount();
          };

          window.deselectAll = function deselectAll() {
            document.querySelectorAll('#table-body input[type="checkbox"]').forEach((cb) => {
              cb.checked = false;
              cb.closest('tr').classList.remove('selected');
            });
            updateSelectedCount();
          };
        </script>

        <!-- æ¡ˆä¾‹ 2: åŠ¨æ€è¡¨å•éªŒè¯ -->
        <section class="demo-section">
          <h2>æ¡ˆä¾‹ 2: åŠ¨æ€è¡¨å•éªŒè¯</h2>
          <p style="color: var(--text-secondary); margin-bottom: 20px">
            ç»„åˆ <code>:has()</code>ã€<code>:not()</code> å’Œ <code>:is()</code> å®ç°å¤æ‚çš„è¡¨å•éªŒè¯é€»è¾‘ï¼Œ
            å¿…å¡«é¡¹æœªå¡«å†™æ—¶è‡ªåŠ¨ç¦ç”¨æäº¤æŒ‰é’®ï¼Œå¹¶æä¾›å®æ—¶éªŒè¯åé¦ˆã€‚
          </p>

          <div class="demo-container single-column">
            <div class="demo-preview">
              <div class="demo-preview-title">æ•ˆæœé¢„è§ˆ - å¡«å†™è¡¨å•æŸ¥çœ‹éªŒè¯æ•ˆæœ</div>
              <style>
                .form-demo {
                  max-width: 700px;
                  margin: 0 auto;
                }

                .complex-form {
                  background: var(--bg-primary);
                  border: 2px solid var(--border-color);
                  border-radius: 12px;
                  padding: 30px;
                }

                .complex-form h3 {
                  margin-top: 0;
                  color: var(--text-primary);
                  font-size: 1.4rem;
                  margin-bottom: 25px;
                }

                .form-section {
                  margin-bottom: 25px;
                  padding-bottom: 25px;
                  border-bottom: 1px solid var(--border-color);
                }

                .form-section:last-of-type {
                  border-bottom: none;
                  margin-bottom: 0;
                  padding-bottom: 0;
                }

                .form-section h4 {
                  color: var(--text-primary);
                  font-size: 1.1rem;
                  margin-bottom: 15px;
                  font-weight: 600;
                }

                .form-field {
                  margin-bottom: 18px;
                }

                .form-field label {
                  display: block;
                  margin-bottom: 8px;
                  font-weight: 600;
                  color: var(--text-primary);
                  font-size: 0.95rem;
                }

                .form-field label .required {
                  color: var(--error);
                  margin-left: 4px;
                }

                .form-field input,
                .form-field select,
                .form-field textarea {
                  width: 100%;
                  padding: 12px 15px;
                  border: 2px solid var(--border-color);
                  border-radius: 8px;
                  font-size: 1rem;
                  background: var(--bg-secondary);
                  color: var(--text-primary);
                  box-sizing: border-box;
                  transition: all 0.3s;
                  font-family: inherit;
                }

                .form-field input:focus,
                .form-field select:focus,
                .form-field textarea:focus {
                  outline: none;
                  border-color: var(--primary);
                  box-shadow: 0 0 0 3px var(--primary-light);
                }

                .form-field input:invalid:not(:placeholder-shown),
                .form-field select:invalid,
                .form-field textarea:invalid:not(:placeholder-shown) {
                  border-color: var(--error);
                }

                .form-field input:valid:not(:placeholder-shown),
                .form-field select:valid:not([value='']),
                .form-field textarea:valid:not(:placeholder-shown) {
                  border-color: var(--success);
                }

                /* è¡¨å•åŒ…å«æœªå¡«å†™çš„å¿…å¡«é¡¹æ—¶ç¦ç”¨æäº¤æŒ‰é’® */
                .complex-form:has(input[required]:placeholder-shown) .submit-button,
                .complex-form:has(select[required][value='']) .submit-button,
                .complex-form:has(textarea[required]:placeholder-shown) .submit-button {
                  opacity: 0.5;
                  pointer-events: none;
                  cursor: not-allowed;
                }

                /* è¡¨å•åŒ…å«æ— æ•ˆè¾“å…¥æ—¶æ˜¾ç¤ºè­¦å‘Š */
                .complex-form:has(:is(input, textarea):invalid:not(:placeholder-shown)) .form-warning {
                  display: flex;
                }

                .form-warning {
                  display: none;
                  align-items: center;
                  gap: 10px;
                  padding: 12px 16px;
                  background: var(--warning-light);
                  border: 2px solid var(--warning);
                  border-radius: 8px;
                  margin-bottom: 20px;
                  color: var(--warning-dark);
                  font-weight: 600;
                  font-size: 0.9rem;
                }

                .form-warning .icon {
                  font-size: 1.3rem;
                }

                /* è¡¨å•å…¨éƒ¨æœ‰æ•ˆæ—¶æ˜¾ç¤ºæˆåŠŸæç¤º */
                .form-success {
                  display: none;
                  align-items: center;
                  gap: 10px;
                  padding: 12px 16px;
                  background: var(--success-light);
                  border: 2px solid var(--success);
                  border-radius: 8px;
                  margin-bottom: 20px;
                  color: var(--success-dark);
                  font-weight: 600;
                  font-size: 0.9rem;
                }

                .complex-form:has(input[required]:not(:placeholder-shown):valid):has(
                    select[required]:not([value=''])
                  ):not(:has(input:invalid)):not(:has(textarea:invalid))
                  .form-success {
                  display: flex;
                }

                .form-success .icon {
                  font-size: 1.3rem;
                }

                .form-actions {
                  display: flex;
                  gap: 12px;
                  margin-top: 25px;
                }

                .submit-button {
                  flex: 1;
                  padding: 14px;
                  background: var(--primary);
                  color: white;
                  border: none;
                  border-radius: 8px;
                  font-size: 1.1rem;
                  font-weight: 600;
                  cursor: pointer;
                  transition: all 0.3s;
                }

                .submit-button:hover:not(:disabled) {
                  background: var(--primary-dark);
                  transform: translateY(-2px);
                  box-shadow: 0 4px 12px rgba(16, 185, 129, 0.3);
                }

                .reset-button {
                  padding: 14px 24px;
                  background: var(--bg-secondary);
                  color: var(--text-primary);
                  border: 2px solid var(--border-color);
                  border-radius: 8px;
                  font-size: 1rem;
                  font-weight: 600;
                  cursor: pointer;
                  transition: all 0.3s;
                }

                .reset-button:hover {
                  border-color: var(--error);
                  color: var(--error);
                }

                .checkbox-group {
                  display: flex;
                  align-items: center;
                  gap: 8px;
                  margin-top: 15px;
                }

                .checkbox-group input[type='checkbox'] {
                  width: auto;
                  margin: 0;
                }

                .checkbox-group label {
                  margin: 0;
                  font-weight: 500;
                  cursor: pointer;
                }
              </style>

              <div class="form-demo">
                <form class="complex-form" aria-label="ç”¨æˆ·æ³¨å†Œè¡¨å•" onsubmit="return false;">
                  <h3>ç”¨æˆ·æ³¨å†Œ</h3>

                  <div class="form-warning" aria-live="assertive" role="alert">
                    <span class="icon" aria-hidden="true">âš ï¸</span>
                    <span>è¯·æ£€æŸ¥è¡¨å•ä¸­çš„é”™è¯¯ä¿¡æ¯</span>
                  </div>

                  <div class="form-success" aria-live="polite" role="status">
                    <span class="icon" aria-hidden="true">âœ“</span>
                    <span>è¡¨å•å¡«å†™å®Œæ•´ï¼Œå¯ä»¥æäº¤</span>
                  </div>

                  <div class="form-section">
                    <h4>åŸºæœ¬ä¿¡æ¯</h4>

                    <div class="form-field">
                      <label for="reg-username"> ç”¨æˆ·å<span class="required">*</span> </label>
                      <input
                        id="reg-username"
                        type="text"
                        placeholder="è¯·è¾“å…¥ç”¨æˆ·åï¼ˆè‡³å°‘ 3 ä¸ªå­—ç¬¦ï¼‰"
                        required
                        aria-required="true"
                        aria-describedby="username-hint"
                        minlength="3"
                      />
                      <span id="username-hint" class="sr-only">ç”¨æˆ·åå¿…é¡»è‡³å°‘åŒ…å« 3 ä¸ªå­—ç¬¦</span>
                    </div>

                    <div class="form-field">
                      <label for="reg-email"> é‚®ç®±<span class="required">*</span> </label>
                      <input
                        id="reg-email"
                        type="email"
                        placeholder="è¯·è¾“å…¥é‚®ç®±åœ°å€"
                        required
                        aria-required="true"
                        aria-describedby="email-hint"
                      />
                      <span id="email-hint" class="sr-only">è¯·è¾“å…¥æœ‰æ•ˆçš„ç”µå­é‚®ç®±åœ°å€</span>
                    </div>

                    <div class="form-field">
                      <label for="reg-phone"> æ‰‹æœºå·<span class="required">*</span> </label>
                      <input
                        id="reg-phone"
                        type="tel"
                        placeholder="è¯·è¾“å…¥æ‰‹æœºå·"
                        required
                        aria-required="true"
                        aria-describedby="phone-hint"
                        pattern="[0-9]{11}"
                      />
                      <span id="phone-hint" class="sr-only">è¯·è¾“å…¥ 11 ä½æ‰‹æœºå·ç </span>
                    </div>
                  </div>

                  <div class="form-section">
                    <h4>è´¦æˆ·å®‰å…¨</h4>

                    <div class="form-field">
                      <label for="reg-password"> å¯†ç <span class="required">*</span> </label>
                      <input
                        id="reg-password"
                        type="password"
                        placeholder="è¯·è¾“å…¥å¯†ç ï¼ˆè‡³å°‘ 6 ä¸ªå­—ç¬¦ï¼‰"
                        required
                        aria-required="true"
                        aria-describedby="password-hint"
                        minlength="6"
                      />
                      <span id="password-hint" class="sr-only">å¯†ç å¿…é¡»è‡³å°‘åŒ…å« 6 ä¸ªå­—ç¬¦</span>
                    </div>

                    <div class="form-field">
                      <label for="reg-confirm"> ç¡®è®¤å¯†ç <span class="required">*</span> </label>
                      <input
                        id="reg-confirm"
                        type="password"
                        placeholder="è¯·å†æ¬¡è¾“å…¥å¯†ç "
                        required
                        aria-required="true"
                        aria-describedby="confirm-hint"
                        minlength="6"
                      />
                      <span id="confirm-hint" class="sr-only">è¯·å†æ¬¡è¾“å…¥ç›¸åŒçš„å¯†ç </span>
                    </div>
                  </div>

                  <div class="form-section">
                    <h4>å…¶ä»–ä¿¡æ¯</h4>

                    <div class="form-field">
                      <label for="reg-country"> å›½å®¶/åœ°åŒº<span class="required">*</span> </label>
                      <select id="reg-country" required value="" aria-required="true">
                        <option value="">è¯·é€‰æ‹©</option>
                        <option value="cn">ä¸­å›½</option>
                        <option value="us">ç¾å›½</option>
                        <option value="jp">æ—¥æœ¬</option>
                        <option value="kr">éŸ©å›½</option>
                      </select>
                    </div>

                    <div class="form-field">
                      <label for="reg-bio">ä¸ªäººç®€ä»‹ï¼ˆå¯é€‰ï¼‰</label>
                      <textarea
                        id="reg-bio"
                        placeholder="ä»‹ç»ä¸€ä¸‹è‡ªå·±..."
                        aria-describedby="bio-hint"
                        rows="3"
                      ></textarea>
                      <span id="bio-hint" class="sr-only">ä¸ªäººç®€ä»‹ä¸ºå¯é€‰é¡¹</span>
                    </div>

                    <div class="checkbox-group">
                      <input id="reg-agree" type="checkbox" required aria-required="true" />
                      <label for="reg-agree"> æˆ‘å·²é˜…è¯»å¹¶åŒæ„<span class="required">*</span> </label>
                    </div>
                  </div>

                  <div class="form-actions">
                    <button class="submit-button" type="submit" aria-label="æäº¤æ³¨å†Œè¡¨å•">æäº¤æ³¨å†Œ</button>
                    <button class="reset-button" type="reset" aria-label="é‡ç½®è¡¨å•">é‡ç½®</button>
                  </div>
                </form>
              </div>

              <p style="margin-top: 20px; color: var(--text-secondary); font-size: 0.9rem">
                ğŸ’¡ å°è¯•å¡«å†™è¡¨å•ï¼Œæ³¨æ„æäº¤æŒ‰é’®åœ¨å¿…å¡«é¡¹æœªå¡«å†™æ—¶è‡ªåŠ¨ç¦ç”¨ï¼Œè¾“å…¥æ— æ•ˆæ•°æ®æ—¶æ˜¾ç¤ºè­¦å‘Š
              </p>
            </div>

            <div class="demo-code">
              <pre><code><span class="code-comment">/* è¡¨å•åŒ…å«æœªå¡«å†™çš„å¿…å¡«é¡¹æ—¶ç¦ç”¨æäº¤æŒ‰é’® */</span>
.complex-form:has(input[required]:placeholder-shown) .submit-button,
.complex-form:has(select[required][value=""]) .submit-button {
  opacity: 0.5;
  pointer-events: none;
  cursor: not-allowed;
}

<span class="code-comment">/* è¡¨å•åŒ…å«æ— æ•ˆè¾“å…¥æ—¶æ˜¾ç¤ºè­¦å‘Š */</span>
.complex-form:has(:is(input, textarea):invalid:not(:placeholder-shown)) .form-warning {
  display: flex;
}

<span class="code-comment">/* è¡¨å•å…¨éƒ¨æœ‰æ•ˆæ—¶æ˜¾ç¤ºæˆåŠŸæç¤º */</span>
.complex-form:has(input[required]:not(:placeholder-shown):valid)
             :has(select[required]:not([value=""]))
             :not(:has(input:invalid))
             :not(:has(textarea:invalid)) .form-success {
  display: flex;
}

<span class="code-comment">/* ä¼˜åŠ¿ï¼š
   1. å¤æ‚éªŒè¯é€»è¾‘å®Œå…¨ç”± CSS å®ç°
   2. è‡ªåŠ¨å“åº”ç”¨æˆ·è¾“å…¥
   3. æ— éœ€ç¼–å†™éªŒè¯ JavaScript */</span></code></pre>
            </div>
          </div>
        </section>

        <!-- æ¡ˆä¾‹ 3: æ¡ä»¶æ ·å¼å¸ƒå±€ -->
        <section class="demo-section">
          <h2>æ¡ˆä¾‹ 3: æ¡ä»¶æ ·å¼å¸ƒå±€</h2>
          <p style="color: var(--text-secondary); margin-bottom: 20px">
            ä½¿ç”¨ <code>:has()</code> å’Œ <code>:not()</code> æ ¹æ®å†…å®¹çš„å­˜åœ¨ä¸å¦è‡ªåŠ¨è°ƒæ•´å¸ƒå±€ï¼Œ å®ç°æ™ºèƒ½çš„å“åº”å¼è®¾è®¡ï¼Œæ— éœ€
            JavaScript æˆ–åª’ä½“æŸ¥è¯¢ã€‚
          </p>

          <div class="demo-container single-column">
            <div class="demo-preview">
              <div class="demo-preview-title">æ•ˆæœé¢„è§ˆ - ç‚¹å‡»æŒ‰é’®æ·»åŠ /ç§»é™¤ä¾§è¾¹æ </div>
              <style>
                .layout-demo {
                  background: var(--bg-secondary);
                  border: 2px solid var(--border-color);
                  border-radius: 12px;
                  padding: 20px;
                  min-height: 400px;
                }

                .page-container {
                  display: flex;
                  gap: 20px;
                  min-height: 350px;
                }

                .page-sidebar {
                  width: 250px;
                  background: var(--primary-light);
                  border-radius: 8px;
                  padding: 20px;
                  flex-shrink: 0;
                }

                .page-sidebar h4 {
                  margin-top: 0;
                  color: var(--primary-dark);
                  font-size: 1.1rem;
                }

                .page-sidebar ul {
                  list-style: none;
                  padding: 0;
                  margin: 0;
                }

                .page-sidebar li {
                  padding: 8px 12px;
                  margin-bottom: 6px;
                  background: var(--bg-primary);
                  border-radius: 6px;
                  color: var(--text-primary);
                  font-size: 0.9rem;
                }

                .page-main {
                  flex: 1;
                  background: var(--bg-primary);
                  border-radius: 8px;
                  padding: 25px;
                  transition: all 0.3s;
                }

                /* æ ¹æ®æ˜¯å¦æœ‰ä¾§è¾¹æ è°ƒæ•´ä¸»å†…å®¹å®½åº¦ */
                .page-container:has(.page-sidebar) .page-main {
                  width: calc(100% - 270px);
                }

                .page-container:not(:has(.page-sidebar)) .page-main {
                  width: 100%;
                  max-width: 100%;
                }

                .page-main h3 {
                  margin-top: 0;
                  color: var(--text-primary);
                  font-size: 1.3rem;
                }

                .page-main p {
                  color: var(--text-secondary);
                  line-height: 1.8;
                  margin-bottom: 15px;
                }

                /* æ ¹æ®å†…å®¹æ•°é‡è°ƒæ•´å¸ƒå±€ */
                .content-grid {
                  display: grid;
                  gap: 15px;
                  margin-top: 20px;
                }

                /* åªæœ‰ 1-2 ä¸ªé¡¹ç›®æ—¶å•åˆ— */
                .content-grid:has(.content-item:nth-child(1)):not(:has(.content-item:nth-child(3))) {
                  grid-template-columns: 1fr;
                }

                /* æœ‰ 3-4 ä¸ªé¡¹ç›®æ—¶ä¸¤åˆ— */
                .content-grid:has(.content-item:nth-child(3)):not(:has(.content-item:nth-child(5))) {
                  grid-template-columns: repeat(2, 1fr);
                }

                /* æœ‰ 5 ä¸ªæˆ–æ›´å¤šé¡¹ç›®æ—¶ä¸‰åˆ— */
                .content-grid:has(.content-item:nth-child(5)) {
                  grid-template-columns: repeat(3, 1fr);
                }

                .content-item {
                  background: var(--bg-secondary);
                  border: 2px solid var(--border-color);
                  border-radius: 8px;
                  padding: 20px;
                  text-align: center;
                  transition: all 0.3s;
                }

                .content-item:hover {
                  border-color: var(--primary);
                  transform: translateY(-2px);
                }

                .content-item .icon {
                  font-size: 2.5rem;
                  margin-bottom: 10px;
                }

                .content-item h5 {
                  margin: 0 0 8px;
                  color: var(--text-primary);
                  font-size: 1rem;
                }

                .content-item p {
                  margin: 0;
                  font-size: 0.85rem;
                  color: var(--text-secondary);
                }

                .layout-controls {
                  margin-top: 20px;
                  padding: 15px;
                  background: var(--bg-primary);
                  border-radius: 8px;
                  display: flex;
                  gap: 10px;
                  flex-wrap: wrap;
                }

                .layout-controls button {
                  padding: 8px 16px;
                  border: 2px solid var(--border-color);
                  border-radius: 6px;
                  background: var(--bg-secondary);
                  color: var(--text-primary);
                  font-weight: 600;
                  cursor: pointer;
                  transition: all 0.3s;
                  font-size: 0.85rem;
                }

                .layout-controls button:hover {
                  border-color: var(--primary);
                  color: var(--primary);
                  transform: translateY(-2px);
                }
              </style>

              <div class="layout-demo">
                <div id="page-container" class="page-container">
                  <aside id="page-sidebar" class="page-sidebar">
                    <h4>ä¾§è¾¹æ </h4>
                    <ul>
                      <li>å¯¼èˆªé¡¹ 1</li>
                      <li>å¯¼èˆªé¡¹ 2</li>
                      <li>å¯¼èˆªé¡¹ 3</li>
                      <li>å¯¼èˆªé¡¹ 4</li>
                    </ul>
                  </aside>

                  <main class="page-main">
                    <h3>ä¸»å†…å®¹åŒº</h3>
                    <p>
                      è¿™ä¸ªå¸ƒå±€ä¼šæ ¹æ®ä¾§è¾¹æ çš„å­˜åœ¨ä¸å¦è‡ªåŠ¨è°ƒæ•´ä¸»å†…å®¹åŒºçš„å®½åº¦ã€‚
                      åŒæ—¶ï¼Œä¸‹æ–¹çš„å†…å®¹ç½‘æ ¼ä¼šæ ¹æ®é¡¹ç›®æ•°é‡è‡ªåŠ¨è°ƒæ•´åˆ—æ•°ã€‚
                    </p>

                    <div id="content-grid" class="content-grid">
                      <div class="content-item">
                        <div class="icon" aria-hidden="true">ğŸ“Š</div>
                        <h5>æ•°æ®åˆ†æ</h5>
                        <p>æŸ¥çœ‹ç»Ÿè®¡æ•°æ®</p>
                      </div>
                      <div class="content-item">
                        <div class="icon" aria-hidden="true">ğŸ“ˆ</div>
                        <h5>è¶‹åŠ¿æŠ¥å‘Š</h5>
                        <p>åˆ†æå¢é•¿è¶‹åŠ¿</p>
                      </div>
                      <div class="content-item">
                        <div class="icon" aria-hidden="true">ğŸ’¼</div>
                        <h5>é¡¹ç›®ç®¡ç†</h5>
                        <p>ç®¡ç†é¡¹ç›®è¿›åº¦</p>
                      </div>
                    </div>
                  </main>
                </div>

                <div class="layout-controls">
                  <button onclick="toggleSidebar()">åˆ‡æ¢ä¾§è¾¹æ </button>
                  <button onclick="addContentItem()">æ·»åŠ å†…å®¹é¡¹</button>
                  <button onclick="removeContentItem()">ç§»é™¤å†…å®¹é¡¹</button>
                  <button onclick="resetLayout()">é‡ç½®å¸ƒå±€</button>
                </div>
              </div>

              <p style="margin-top: 20px; color: var(--text-secondary); font-size: 0.9rem">
                ğŸ’¡ å°è¯•åˆ‡æ¢ä¾§è¾¹æ å’Œæ·»åŠ /ç§»é™¤å†…å®¹é¡¹ï¼Œè§‚å¯Ÿå¸ƒå±€å¦‚ä½•è‡ªåŠ¨è°ƒæ•´
              </p>
            </div>

            <div class="demo-code">
              <pre><code><span class="code-comment">/* æ ¹æ®æ˜¯å¦æœ‰ä¾§è¾¹æ è°ƒæ•´ä¸»å†…å®¹å®½åº¦ */</span>
.page-container:has(.page-sidebar) .page-main {
  width: calc(100% - 270px);
}

.page-container:not(:has(.page-sidebar)) .page-main {
  width: 100%;
  max-width: 100%;
}

<span class="code-comment">/* æ ¹æ®å†…å®¹æ•°é‡è°ƒæ•´ç½‘æ ¼åˆ—æ•° */</span>
<span class="code-comment">/* åªæœ‰ 1-2 ä¸ªé¡¹ç›®æ—¶å•åˆ— */</span>
.content-grid:has(.content-item:nth-child(1))
             :not(:has(.content-item:nth-child(3))) {
  grid-template-columns: 1fr;
}

<span class="code-comment">/* æœ‰ 3-4 ä¸ªé¡¹ç›®æ—¶ä¸¤åˆ— */</span>
.content-grid:has(.content-item:nth-child(3))
             :not(:has(.content-item:nth-child(5))) {
  grid-template-columns: repeat(2, 1fr);
}

<span class="code-comment">/* æœ‰ 5 ä¸ªæˆ–æ›´å¤šé¡¹ç›®æ—¶ä¸‰åˆ— */</span>
.content-grid:has(.content-item:nth-child(5)) {
  grid-template-columns: repeat(3, 1fr);
}

<span class="code-comment">/* ä¼˜åŠ¿ï¼š
   1. å¸ƒå±€è‡ªåŠ¨å“åº”å†…å®¹å˜åŒ–
   2. æ— éœ€ JavaScript æˆ–åª’ä½“æŸ¥è¯¢
   3. ä»£ç ç®€æ´ç›´è§‚ */</span></code></pre>
            </div>
          </div>
        </section>

        <script>
          // æ¡ˆä¾‹ 3: å¸ƒå±€äº¤äº’è„šæœ¬
          window.toggleSidebar = function toggleSidebar() {
            const sidebar = document.getElementById('page-sidebar');
            if (sidebar) {
              if (sidebar.style.display === 'none') {
                sidebar.style.display = 'block';
              } else {
                sidebar.style.display = 'none';
              }
            }
          };

          window.addContentItem = function addContentItem() {
            const grid = document.getElementById('content-grid');
            if (!grid) {
              return;
            }
            const icons = ['ğŸ¨', 'ğŸ”§', 'ğŸ“±', 'ğŸ’»', 'ğŸš€', 'âš¡', 'ğŸ¯', 'ğŸŒŸ'];
            const titles = [
              'è®¾è®¡å·¥å…·',
              'å¼€å‘å·¥å…·',
              'ç§»åŠ¨åº”ç”¨',
              'æ¡Œé¢åº”ç”¨',
              'å¿«é€Ÿå¯åŠ¨',
              'æ€§èƒ½ä¼˜åŒ–',
              'ç›®æ ‡ç®¡ç†',
              'ç‰¹è‰²åŠŸèƒ½',
            ];
            const index = grid.children.length % icons.length;

            const item = document.createElement('div');
            item.className = 'content-item';
            item.innerHTML = `
              <div class="icon" aria-hidden="true">${icons[index]}</div>
              <h5>${titles[index]}</h5>
              <p>åŠŸèƒ½æè¿°</p>
            `;
            grid.appendChild(item);
          };

          window.removeContentItem = function removeContentItem() {
            const grid = document.getElementById('content-grid');
            if (grid && grid.children.length > 1) {
              grid.removeChild(grid.lastElementChild);
            }
          };

          window.resetLayout = function resetLayout() {
            const sidebar = document.getElementById('page-sidebar');
            const grid = document.getElementById('content-grid');

            if (sidebar) {
              sidebar.style.display = 'block';
            }

            if (grid) {
              grid.innerHTML = `
                <div class="content-item">
                  <div class="icon" aria-hidden="true">ğŸ“Š</div>
                  <h5>æ•°æ®åˆ†æ</h5>
                  <p>æŸ¥çœ‹ç»Ÿè®¡æ•°æ®</p>
                </div>
                <div class="content-item">
                  <div class="icon" aria-hidden="true">ğŸ“ˆ</div>
                  <h5>è¶‹åŠ¿æŠ¥å‘Š</h5>
                  <p>åˆ†æå¢é•¿è¶‹åŠ¿</p>
                </div>
                <div class="content-item">
                  <div class="icon" aria-hidden="true">ğŸ’¼</div>
                  <h5>é¡¹ç›®ç®¡ç†</h5>
                  <p>ç®¡ç†é¡¹ç›®è¿›åº¦</p>
                </div>
              `;
            }
          };
        </script>

        <!-- æ¡ˆä¾‹ 4: æ™ºèƒ½å¯¼èˆª -->
        <section class="demo-section">
          <h2>æ¡ˆä¾‹ 4: æ™ºèƒ½å¯¼èˆª</h2>
          <p style="color: var(--text-secondary); margin-bottom: 20px">
            ç»„åˆ <code>:has()</code>ã€<code>:is()</code> å’Œ <code>:not()</code> å®ç°æ™ºèƒ½çš„å¤šçº§å¯¼èˆªç³»ç»Ÿï¼Œ
            è‡ªåŠ¨æ˜¾ç¤ºå­èœå•ç®­å¤´ã€é«˜äº®å½“å‰é¡µé¢ã€ç®¡ç†å±•å¼€/æ”¶èµ·çŠ¶æ€ã€‚
          </p>

          <div class="demo-container single-column">
            <div class="demo-preview">
              <div class="demo-preview-title">æ•ˆæœé¢„è§ˆ - ç‚¹å‡»é“¾æ¥æŸ¥çœ‹å¯¼èˆªçŠ¶æ€</div>
              <style>
                .nav-demo-complex {
                  background: var(--bg-secondary);
                  border: 2px solid var(--border-color);
                  border-radius: 12px;
                  padding: 25px;
                  max-width: 800px;
                  margin: 0 auto;
                }

                .smart-navigation {
                  list-style: none;
                  padding: 0;
                  margin: 0;
                }

                .smart-navigation > li {
                  margin-bottom: 8px;
                }

                .smart-navigation a {
                  display: block;
                  padding: 12px 16px;
                  color: var(--text-primary);
                  text-decoration: none;
                  border-radius: 8px;
                  font-weight: 600;
                  transition: all 0.3s;
                  background: var(--bg-primary);
                  position: relative;
                }

                .smart-navigation a:hover {
                  background: var(--primary-light);
                  color: var(--primary);
                  transform: translateX(4px);
                }

                /* å½“å‰é¡µé¢çš„å¯¼èˆªé¡¹é«˜äº® */
                .smart-navigation a.active {
                  background: var(--primary);
                  color: white;
                  font-weight: 700;
                }

                /* åŒ…å«å½“å‰é¡µé¢é“¾æ¥çš„çˆ¶çº§å¯¼èˆªé¡¹é«˜äº® */
                .smart-navigation li:has(a.active) > a:first-child:not(.active) {
                  background: var(--primary-light);
                  color: var(--primary-dark);
                  border-left: 4px solid var(--primary);
                  padding-left: 12px;
                }

                /* å¯¼èˆªé¡¹åŒ…å«å­èœå•æ—¶æ˜¾ç¤ºç®­å¤´ */
                .smart-navigation li:has(ul) > a::after {
                  content: 'â–¼';
                  position: absolute;
                  right: 16px;
                  font-size: 0.8rem;
                  transition: transform 0.3s;
                  color: var(--text-secondary);
                }

                /* å­èœå•æ ·å¼ */
                .smart-navigation ul {
                  list-style: none;
                  padding: 8px 0 0 20px;
                  margin: 8px 0 0;
                  border-left: 3px solid var(--primary);
                  max-height: 0;
                  overflow: hidden;
                  transition: max-height 0.3s ease;
                }

                .smart-navigation ul li {
                  margin-bottom: 4px;
                }

                .smart-navigation ul a {
                  padding: 10px 14px;
                  font-size: 0.9rem;
                  font-weight: 500;
                }

                /* å±•å¼€åŒ…å«æ¿€æ´»é“¾æ¥çš„å­èœå• */
                .smart-navigation li:has(a.active) > ul {
                  max-height: 500px;
                }

                /* æ‚¬åœæ—¶å±•å¼€å­èœå• */
                .smart-navigation li:has(ul):hover > ul {
                  max-height: 500px;
                }

                /* æ—‹è½¬ç®­å¤´ */
                .smart-navigation li:has(a.active) > a::after,
                .smart-navigation li:has(ul):hover > a::after {
                  transform: rotate(180deg);
                  color: var(--primary);
                }

                /* ä¸‰çº§èœå•æ ·å¼ */
                .smart-navigation ul ul {
                  border-left-color: var(--info);
                  padding-left: 15px;
                }

                .smart-navigation ul ul a {
                  font-size: 0.85rem;
                  padding: 8px 12px;
                }

                /* åŒ…å«æ¿€æ´»å­é¡¹çš„å¤šçº§å¯¼èˆªé«˜äº® */
                .smart-navigation li:has(li:has(a.active)) > a:first-child:not(.active) {
                  background: var(--info-light);
                  color: var(--info-dark);
                  border-left: 4px solid var(--info);
                }

                /* æ²¡æœ‰å­èœå•çš„å¯¼èˆªé¡¹ä¸æ˜¾ç¤ºç®­å¤´ */
                .smart-navigation li:not(:has(ul)) > a::after {
                  display: none;
                }

                .nav-controls {
                  margin-top: 20px;
                  padding: 15px;
                  background: var(--bg-primary);
                  border-radius: 8px;
                  display: flex;
                  gap: 10px;
                  flex-wrap: wrap;
                }

                .nav-controls button {
                  padding: 8px 16px;
                  border: 2px solid var(--border-color);
                  border-radius: 6px;
                  background: var(--bg-secondary);
                  color: var(--text-primary);
                  font-weight: 600;
                  cursor: pointer;
                  transition: all 0.3s;
                  font-size: 0.85rem;
                }

                .nav-controls button:hover {
                  border-color: var(--primary);
                  color: var(--primary);
                  transform: translateY(-2px);
                }

                .nav-info {
                  margin-top: 15px;
                  padding: 12px 16px;
                  background: var(--info-light);
                  border-left: 4px solid var(--info);
                  border-radius: 6px;
                  color: var(--info-dark);
                  font-size: 0.9rem;
                  line-height: 1.6;
                }
              </style>

              <div class="nav-demo-complex">
                <ul class="smart-navigation" aria-label="ä¸»å¯¼èˆªèœå•" role="navigation">
                  <li>
                    <a href="#home">é¦–é¡µ</a>
                  </li>

                  <li>
                    <a href="#products">äº§å“ä¸­å¿ƒ</a>
                    <ul>
                      <li><a href="#product-a">äº§å“ A</a></li>
                      <li>
                        <a href="#product-b">äº§å“ B</a>
                        <ul>
                          <li><a href="#product-b1">äº§å“ B-1</a></li>
                          <li><a class="active" href="#product-b2">äº§å“ B-2ï¼ˆå½“å‰é¡µï¼‰</a></li>
                          <li><a href="#product-b3">äº§å“ B-3</a></li>
                        </ul>
                      </li>
                      <li><a href="#product-c">äº§å“ C</a></li>
                    </ul>
                  </li>

                  <li>
                    <a href="#services">æœåŠ¡æ”¯æŒ</a>
                    <ul>
                      <li><a href="#service-tech">æŠ€æœ¯æ”¯æŒ</a></li>
                      <li><a href="#service-after">å”®åæœåŠ¡</a></li>
                      <li><a href="#service-training">åŸ¹è®­æœåŠ¡</a></li>
                    </ul>
                  </li>

                  <li>
                    <a href="#solutions">è§£å†³æ–¹æ¡ˆ</a>
                    <ul>
                      <li><a href="#solution-enterprise">ä¼ä¸šæ–¹æ¡ˆ</a></li>
                      <li><a href="#solution-education">æ•™è‚²æ–¹æ¡ˆ</a></li>
                      <li><a href="#solution-government">æ”¿åºœæ–¹æ¡ˆ</a></li>
                    </ul>
                  </li>

                  <li>
                    <a href="#about">å…³äºæˆ‘ä»¬</a>
                  </li>

                  <li>
                    <a href="#contact">è”ç³»æ–¹å¼</a>
                  </li>
                </ul>

                <div class="nav-info" aria-live="polite" role="status">
                  <strong>ğŸ’¡ æ™ºèƒ½ç‰¹æ€§ï¼š</strong><br />
                  â€¢ "äº§å“ä¸­å¿ƒ" å’Œ "äº§å“ B" è‡ªåŠ¨é«˜äº®ï¼ˆå› ä¸ºåŒ…å«å½“å‰æ¿€æ´»çš„å­é“¾æ¥ï¼‰<br />
                  â€¢ åŒ…å«å­èœå•çš„é¡¹è‡ªåŠ¨æ˜¾ç¤ºç®­å¤´<br />
                  â€¢ å½“å‰é¡µé¢çš„çˆ¶çº§å’Œç¥–çˆ¶çº§èœå•è‡ªåŠ¨å±•å¼€<br />
                  â€¢ æ‚¬åœæ—¶å±•å¼€å­èœå•
                </div>

                <div class="nav-controls">
                  <button onclick="setActivePage('#home')">æ¿€æ´»ï¼šé¦–é¡µ</button>
                  <button onclick="setActivePage('#product-a')">æ¿€æ´»ï¼šäº§å“ A</button>
                  <button onclick="setActivePage('#product-b2')">æ¿€æ´»ï¼šäº§å“ B-2</button>
                  <button onclick="setActivePage('#service-tech')">æ¿€æ´»ï¼šæŠ€æœ¯æ”¯æŒ</button>
                  <button onclick="setActivePage('#about')">æ¿€æ´»ï¼šå…³äºæˆ‘ä»¬</button>
                </div>
              </div>

              <p style="margin-top: 20px; color: var(--text-secondary); font-size: 0.9rem">
                ğŸ’¡ ç‚¹å‡»æŒ‰é’®åˆ‡æ¢å½“å‰é¡µé¢ï¼Œè§‚å¯Ÿå¯¼èˆªå¦‚ä½•è‡ªåŠ¨é«˜äº®çˆ¶çº§èœå•å¹¶å±•å¼€ç›¸å…³å­èœå•
              </p>
            </div>

            <div class="demo-code">
              <pre><code><span class="code-comment">/* å½“å‰é¡µé¢çš„å¯¼èˆªé¡¹é«˜äº® */</span>
.smart-navigation a.active {
  background: var(--primary);
  color: white;
}

<span class="code-comment">/* åŒ…å«å½“å‰é¡µé¢é“¾æ¥çš„çˆ¶çº§å¯¼èˆªé¡¹é«˜äº® */</span>
.smart-navigation li:has(a.active) > a:first-child:not(.active) {
  background: var(--primary-light);
  color: var(--primary-dark);
  border-left: 4px solid var(--primary);
}

<span class="code-comment">/* å¯¼èˆªé¡¹åŒ…å«å­èœå•æ—¶æ˜¾ç¤ºç®­å¤´ */</span>
.smart-navigation li:has(ul) > a::after {
  content: 'â–¼';
  position: absolute;
  right: 16px;
  transition: transform 0.3s;
}

<span class="code-comment">/* å±•å¼€åŒ…å«æ¿€æ´»é“¾æ¥çš„å­èœå• */</span>
.smart-navigation li:has(a.active) > ul {
  max-height: 500px;
}

<span class="code-comment">/* æ—‹è½¬ç®­å¤´ */</span>
.smart-navigation li:has(a.active) > a::after {
  transform: rotate(180deg);
}

<span class="code-comment">/* åŒ…å«æ¿€æ´»å­é¡¹çš„å¤šçº§å¯¼èˆªé«˜äº® */</span>
.smart-navigation li:has(li:has(a.active)) > a:first-child:not(.active) {
  background: var(--info-light);
  color: var(--info-dark);
  border-left: 4px solid var(--info);
}

<span class="code-comment">/* ä¼˜åŠ¿ï¼š
   1. å¤šçº§å¯¼èˆªè‡ªåŠ¨ç®¡ç†çŠ¶æ€
   2. çˆ¶çº§èœå•è‡ªåŠ¨æ„ŸçŸ¥å­é“¾æ¥
   3. æ— éœ€æ‰‹åŠ¨æ·»åŠ ç±»å
   4. æ”¯æŒä»»æ„æ·±åº¦çš„åµŒå¥— */</span></code></pre>
            </div>
          </div>
        </section>

        <script>
          // æ¡ˆä¾‹ 4: å¯¼èˆªäº¤äº’è„šæœ¬
          window.setActivePage = function setActivePage(href) {
            // ç§»é™¤æ‰€æœ‰ active ç±»
            document.querySelectorAll('.smart-navigation a.active').forEach((link) => {
              link.classList.remove('active');
            });

            // æ·»åŠ  active ç±»åˆ°æŒ‡å®šé“¾æ¥
            const link = document.querySelector(`.smart-navigation a[href="${href}"]`);
            if (link) {
              link.classList.add('active');
            }
          };
        </script>

        <!-- æ€»ç»“ -->
        <section class="concept-section" style="margin-top: 50px">
          <h2>ç»„åˆé€‰æ‹©å™¨çš„æœ€ä½³å®è·µ</h2>
          <p>é€šè¿‡è¿™ 4 ä¸ªæ¡ˆä¾‹ï¼Œæˆ‘ä»¬çœ‹åˆ°äº†ç°ä»£é€‰æ‹©å™¨ç»„åˆä½¿ç”¨çš„å¼ºå¤§èƒ½åŠ›ã€‚ä»¥ä¸‹æ˜¯ä¸€äº›æœ€ä½³å®è·µå»ºè®®ï¼š</p>

          <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px; margin-top: 20px">
            <div
              style="
                background: var(--success-light);
                border-left: 4px solid var(--success);
                padding: 20px;
                border-radius: var(--radius-md);
              "
            >
              <h3 style="margin-top: 0; color: var(--success-dark)">âœ… æ¨èåšæ³•</h3>
              <ul style="margin: 0; padding-left: 20px; line-height: 1.8">
                <li>ä¼˜å…ˆä½¿ç”¨ CSS å®ç°çŠ¶æ€ç®¡ç†</li>
                <li>ç»„åˆé€‰æ‹©å™¨è§£å†³å¤æ‚éœ€æ±‚</li>
                <li>ä¿æŒé€‰æ‹©å™¨ç®€æ´æ˜“è¯»</li>
                <li>æ·»åŠ æ³¨é‡Šè¯´æ˜å¤æ‚é€»è¾‘</li>
                <li>è€ƒè™‘æµè§ˆå™¨å…¼å®¹æ€§</li>
                <li>æä¾›é™çº§æ–¹æ¡ˆ</li>
              </ul>
            </div>

            <div
              style="
                background: var(--error-light);
                border-left: 4px solid var(--error);
                padding: 20px;
                border-radius: var(--radius-md);
              "
            >
              <h3 style="margin-top: 0; color: var(--error-dark)">âŒ é¿å…åšæ³•</h3>
              <ul style="margin: 0; padding-left: 20px; line-height: 1.8">
                <li>è¿‡åº¦åµŒå¥—é€‰æ‹©å™¨</li>
                <li>è¿‡äºå¤æ‚çš„ç»„åˆé€»è¾‘</li>
                <li>å¿½ç•¥æ€§èƒ½å½±å“</li>
                <li>ä¸è€ƒè™‘å¯ç»´æŠ¤æ€§</li>
                <li>å®Œå…¨ä¾èµ–ç°ä»£é€‰æ‹©å™¨</li>
                <li>å¿½ç•¥æ— éšœç¢è®¿é—®</li>
              </ul>
            </div>
          </div>

          <div
            style="
              background: var(--info-light);
              border-left: 4px solid var(--info);
              padding: 20px;
              border-radius: var(--radius-md);
              margin-top: 20px;
            "
          >
            <h3 style="margin-top: 0; color: var(--info-dark)">ğŸ¯ æ€§èƒ½è€ƒè™‘</h3>
            <p style="margin: 0; line-height: 1.8">è™½ç„¶ç°ä»£é€‰æ‹©å™¨éå¸¸å¼ºå¤§ï¼Œä½†åœ¨ä½¿ç”¨æ—¶ä¹Ÿè¦æ³¨æ„æ€§èƒ½ï¼š</p>
            <ul style="margin-top: 10px; padding-left: 20px; line-height: 1.8">
              <li><code>:has()</code> é€‰æ‹©å™¨å¯èƒ½å½±å“æ€§èƒ½ï¼Œé¿å…åœ¨å¤§å‹åˆ—è¡¨ä¸­è¿‡åº¦ä½¿ç”¨</li>
              <li>å°½é‡å°† <code>:has()</code> åº”ç”¨åœ¨è¾ƒå°çš„ä½œç”¨åŸŸå†…</li>
              <li>é¿å…è¿‡æ·±çš„åµŒå¥—å’Œè¿‡äºå¤æ‚çš„ç»„åˆ</li>
              <li>ä½¿ç”¨æµè§ˆå™¨å¼€å‘å·¥å…·ç›‘æ§æ€§èƒ½</li>
              <li>åœ¨å¿…è¦æ—¶è€ƒè™‘ä½¿ç”¨ JavaScript æ›¿ä»£</li>
            </ul>
          </div>

          <div
            style="
              background: var(--warning-light);
              border-left: 4px solid var(--warning);
              padding: 20px;
              border-radius: var(--radius-md);
              margin-top: 20px;
            "
          >
            <h3 style="margin-top: 0; color: var(--warning-dark)">âš¡ å®æˆ˜æŠ€å·§</h3>
            <ol style="margin: 0; padding-left: 20px; line-height: 1.8">
              <li><strong>æ¸è¿›å¢å¼º</strong> - å…ˆå®ç°åŸºç¡€åŠŸèƒ½ï¼Œå†ç”¨ç°ä»£é€‰æ‹©å™¨å¢å¼º</li>
              <li><strong>ç‰¹æ€§æ£€æµ‹</strong> - ä½¿ç”¨ <code>@supports</code> æ£€æµ‹æµè§ˆå™¨æ”¯æŒ</li>
              <li><strong>é™çº§æ–¹æ¡ˆ</strong> - ä¸ºä¸æ”¯æŒçš„æµè§ˆå™¨æä¾›æ›¿ä»£æ–¹æ¡ˆ</li>
              <li><strong>æµ‹è¯•éªŒè¯</strong> - åœ¨å¤šä¸ªæµè§ˆå™¨ä¸­æµ‹è¯•æ•ˆæœ</li>
              <li><strong>æ–‡æ¡£è®°å½•</strong> - ä¸ºå¤æ‚é€‰æ‹©å™¨æ·»åŠ è¯¦ç»†æ³¨é‡Š</li>
            </ol>
          </div>
        </section>

        <!-- æµè§ˆå™¨å…¼å®¹æ€§ -->
        <section class="compatibility-section">
          <h2>æµè§ˆå™¨å…¼å®¹æ€§</h2>
          <p style="color: var(--text-secondary); margin-bottom: 20px">
            æœ¬é¡µé¢ä½¿ç”¨çš„ç°ä»£é€‰æ‹©å™¨åœ¨ä¸»æµæµè§ˆå™¨ä¸­çš„æ”¯æŒæƒ…å†µï¼š
          </p>

          <table class="compatibility-table">
            <thead>
              <tr>
                <th>é€‰æ‹©å™¨</th>
                <th>Chrome</th>
                <th>Firefox</th>
                <th>Safari</th>
                <th>Edge</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td><code>:has()</code></td>
                <td class="support-yes">âœ“ 105+</td>
                <td class="support-yes">âœ“ 121+</td>
                <td class="support-yes">âœ“ 15.4+</td>
                <td class="support-yes">âœ“ 105+</td>
              </tr>
              <tr>
                <td><code>:is()</code></td>
                <td class="support-yes">âœ“ 88+</td>
                <td class="support-yes">âœ“ 78+</td>
                <td class="support-yes">âœ“ 14+</td>
                <td class="support-yes">âœ“ 88+</td>
              </tr>
              <tr>
                <td><code>:where()</code></td>
                <td class="support-yes">âœ“ 88+</td>
                <td class="support-yes">âœ“ 78+</td>
                <td class="support-yes">âœ“ 14+</td>
                <td class="support-yes">âœ“ 88+</td>
              </tr>
              <tr>
                <td><code>:not()</code> (å¤æ‚)</td>
                <td class="support-yes">âœ“ 88+</td>
                <td class="support-yes">âœ“ 84+</td>
                <td class="support-yes">âœ“ 9+</td>
                <td class="support-yes">âœ“ 88+</td>
              </tr>
            </tbody>
          </table>

          <div
            style="
              margin-top: 20px;
              padding: 15px;
              background: var(--warning-light);
              border-left: 4px solid var(--warning);
              border-radius: var(--radius-md);
            "
          >
            <strong style="color: var(--warning-dark)">âš ï¸ å…¼å®¹æ€§å»ºè®®</strong>
            <p style="margin-top: 10px; line-height: 1.6; color: var(--text-primary)">å¦‚æœéœ€è¦æ”¯æŒæ—§ç‰ˆæµè§ˆå™¨ï¼Œå»ºè®®ï¼š</p>
            <ul style="margin-top: 10px; padding-left: 20px; line-height: 1.8; color: var(--text-primary)">
              <li>ä½¿ç”¨ <code>@supports</code> è¿›è¡Œç‰¹æ€§æ£€æµ‹</li>
              <li>æä¾› JavaScript é™çº§æ–¹æ¡ˆ</li>
              <li>ä½¿ç”¨ PostCSS ç­‰å·¥å…·è¿›è¡Œè½¬æ¢</li>
              <li>è€ƒè™‘ä½¿ç”¨ polyfillï¼ˆæ€§èƒ½å¯èƒ½å—å½±å“ï¼‰</li>
            </ul>
          </div>

          <p style="margin-top: 20px; color: var(--text-secondary)">
            æ›´å¤šå…¼å®¹æ€§ä¿¡æ¯è¯·è®¿é—®
            <a
              href="https://caniuse.com/?search=has"
              target="_blank"
              rel="noopener noreferrer"
              style="color: var(--primary); font-weight: 600"
            >
              Can I Use
            </a>
          </p>
        </section>
      </div>
    </main>
  </body>
</html>
