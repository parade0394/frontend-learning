<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>SVG å˜æ¢æ“ä½œ - å‰ç«¯å­¦ä¹ ä¸­å¿ƒ</title>
  <link rel="stylesheet" href="/src/styles/common.css">
  <script src="../shared/theme-sync.js"></script>
  <script src="../shared/utils.js"></script>
  <style>
    .transform-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
      gap: var(--spacing-lg);
      margin: var(--spacing-lg) 0;
    }

    .transform-demo {
      background: var(--bg-secondary);
      border: 1px solid var(--border-color);
      border-radius: var(--radius-md);
      padding: var(--spacing-md);
    }

    .transform-demo h3 {
      margin-top: 0;
      color: var(--primary);
    }

    .svg-container {
      background: var(--bg-primary);
      border-radius: var(--radius-sm);
      padding: var(--spacing-md);
      margin: var(--spacing-md) 0;
      display: flex;
      justify-content: center;
      align-items: center;
      min-height: 250px;
    }

    .controls {
      display: flex;
      flex-direction: column;
      gap: var(--spacing-sm);
      margin-top: var(--spacing-md);
    }

    .control-row {
      display: flex;
      align-items: center;
      gap: var(--spacing-sm);
    }

    .control-row label {
      min-width: 100px;
      font-size: 0.9rem;
      color: var(--text-secondary);
    }

    .control-row input[type="range"] {
      flex: 1;
    }

    .value-display {
      min-width: 50px;
      text-align: right;
      font-weight: 600;
      color: var(--primary);
    }

    .reference-shape {
      opacity: 0.2;
    }
  </style>
</head>
<body>
  <div class="container">
    <a href="index.html" class="back-link">â† è¿”å› SVG æ¨¡å—</a>
    
    <h1>SVG å˜æ¢æ“ä½œ</h1>
    <p>ä½¿ç”¨ transform å±æ€§å¯¹ SVG å…ƒç´ è¿›è¡Œå¹³ç§»ã€æ—‹è½¬ã€ç¼©æ”¾å’Œå€¾æ–œç­‰å˜æ¢ã€‚</p>

    <div class="transform-grid">
      <!-- å¹³ç§» -->
      <div class="transform-demo">
        <h3>å¹³ç§» (translate)</h3>
        <div class="svg-container">
          <svg width="300" height="250" viewBox="0 0 300 250">
            <rect class="reference-shape" x="75" y="75" width="80" height="80" 
                  fill="var(--text-secondary)" rx="5"/>
            <rect id="translate-rect" x="75" y="75" width="80" height="80" 
                  fill="var(--primary)" rx="5" transform="translate(0, 0)"/>
          </svg>
        </div>
        <div class="controls">
          <div class="control-row">
            <label>X åç§»:</label>
            <input type="range" id="translate-x" min="-100" max="100" value="0">
            <span class="value-display" id="translate-x-value">0</span>
          </div>
          <div class="control-row">
            <label>Y åç§»:</label>
            <input type="range" id="translate-y" min="-100" max="100" value="0">
            <span class="value-display" id="translate-y-value">0</span>
          </div>
        </div>
        <div class="code-block">
          <code id="translate-code">transform="translate(0, 0)"</code>
        </div>
      </div>

      <!-- æ—‹è½¬ -->
      <div class="transform-demo">
        <h3>æ—‹è½¬ (rotate)</h3>
        <div class="svg-container">
          <svg width="300" height="250" viewBox="0 0 300 250">
            <rect class="reference-shape" x="110" y="85" width="80" height="80" 
                  fill="var(--text-secondary)" rx="5"/>
            <circle cx="150" cy="125" r="3" fill="var(--error)"/>
            <rect id="rotate-rect" x="110" y="85" width="80" height="80" 
                  fill="var(--primary)" rx="5" transform="rotate(0 150 125)"/>
          </svg>
        </div>
        <div class="controls">
          <div class="control-row">
            <label>æ—‹è½¬è§’åº¦:</label>
            <input type="range" id="rotate-angle" min="0" max="360" value="0">
            <span class="value-display" id="rotate-value">0Â°</span>
          </div>
        </div>
        <div class="code-block">
          <code id="rotate-code">transform="rotate(0 150 125)"</code>
        </div>
      </div>

      <!-- ç¼©æ”¾ -->
      <div class="transform-demo">
        <h3>ç¼©æ”¾ (scale)</h3>
        <div class="svg-container">
          <svg width="300" height="250" viewBox="0 0 300 250">
            <rect class="reference-shape" x="110" y="85" width="80" height="80" 
                  fill="var(--text-secondary)" rx="5"/>
            <rect id="scale-rect" x="110" y="85" width="80" height="80" 
                  fill="var(--primary)" rx="5" 
                  transform="scale(1) translate(0, 0)" transform-origin="150px 125px"/>
          </svg>
        </div>
        <div class="controls">
          <div class="control-row">
            <label>X ç¼©æ”¾:</label>
            <input type="range" id="scale-x" min="0.5" max="2" step="0.1" value="1">
            <span class="value-display" id="scale-x-value">1.0</span>
          </div>
          <div class="control-row">
            <label>Y ç¼©æ”¾:</label>
            <input type="range" id="scale-y" min="0.5" max="2" step="0.1" value="1">
            <span class="value-display" id="scale-y-value">1.0</span>
          </div>
        </div>
        <div class="code-block">
          <code id="scale-code">transform="scale(1, 1)"</code>
        </div>
      </div>

      <!-- å€¾æ–œ -->
      <div class="transform-demo">
        <h3>å€¾æ–œ (skew)</h3>
        <div class="svg-container">
          <svg width="300" height="250" viewBox="0 0 300 250">
            <rect class="reference-shape" x="110" y="85" width="80" height="80" 
                  fill="var(--text-secondary)" rx="5"/>
            <rect id="skew-rect" x="110" y="85" width="80" height="80" 
                  fill="var(--primary)" rx="5" transform="skewX(0) skewY(0)"/>
          </svg>
        </div>
        <div class="controls">
          <div class="control-row">
            <label>X å€¾æ–œ:</label>
            <input type="range" id="skew-x" min="-45" max="45" value="0">
            <span class="value-display" id="skew-x-value">0Â°</span>
          </div>
          <div class="control-row">
            <label>Y å€¾æ–œ:</label>
            <input type="range" id="skew-y" min="-45" max="45" value="0">
            <span class="value-display" id="skew-y-value">0Â°</span>
          </div>
        </div>
        <div class="code-block">
          <code id="skew-code">transform="skewX(0) skewY(0)"</code>
        </div>
      </div>
    </div>

    <!-- ç»„åˆå˜æ¢ -->
    <div class="transform-demo" style="margin-top: var(--spacing-xl);">
      <h3>ğŸ® ç»„åˆå˜æ¢</h3>
      <p style="color: var(--text-secondary); margin-bottom: var(--spacing-md);">
        å¤šä¸ªå˜æ¢å¯ä»¥ç»„åˆä½¿ç”¨ï¼Œå˜æ¢é¡ºåºä¼šå½±å“æœ€ç»ˆç»“æœ
      </p>
      <div class="svg-container">
        <svg width="100%" height="300" viewBox="0 0 500 300">
          <rect class="reference-shape" x="210" y="110" width="80" height="80" 
                fill="var(--text-secondary)" rx="5"/>
          <circle cx="250" cy="150" r="3" fill="var(--error)"/>
          <rect id="combined-rect" x="210" y="110" width="80" height="80" 
                fill="var(--primary)" rx="5" 
                transform="translate(0, 0) rotate(0 250 150) scale(1)"/>
        </svg>
      </div>
      
      <div class="controls">
        <div class="control-row">
          <label>å¹³ç§» X:</label>
          <input type="range" id="combined-tx" min="-100" max="100" value="0">
          <span class="value-display" id="combined-tx-value">0</span>
        </div>
        <div class="control-row">
          <label>å¹³ç§» Y:</label>
          <input type="range" id="combined-ty" min="-100" max="100" value="0">
          <span class="value-display" id="combined-ty-value">0</span>
        </div>
        <div class="control-row">
          <label>æ—‹è½¬:</label>
          <input type="range" id="combined-rotate" min="0" max="360" value="0">
          <span class="value-display" id="combined-rotate-value">0Â°</span>
        </div>
        <div class="control-row">
          <label>ç¼©æ”¾:</label>
          <input type="range" id="combined-scale" min="0.5" max="2" step="0.1" value="1">
          <span class="value-display" id="combined-scale-value">1.0</span>
        </div>
      </div>

      <div class="code-block">
        <code id="combined-code">transform="translate(0, 0) rotate(0 250 150) scale(1)"</code>
      </div>

      <button class="btn" onclick="resetCombined()" style="margin-top: var(--spacing-md);">é‡ç½®å˜æ¢</button>
    </div>

    <div class="info-section" style="margin-top: var(--spacing-xl); padding: var(--spacing-md); background: var(--bg-secondary); border-radius: var(--radius-md);">
      <h2>ğŸ’¡ å…³é”®çŸ¥è¯†ç‚¹</h2>
      <ul>
        <li><strong>translate(x, y)</strong>: å¹³ç§»å…ƒç´ ï¼Œx å’Œ y ä¸ºåç§»é‡</li>
        <li><strong>rotate(angle cx cy)</strong>: æ—‹è½¬å…ƒç´ ï¼Œangle ä¸ºè§’åº¦ï¼Œcx/cy ä¸ºæ—‹è½¬ä¸­å¿ƒï¼ˆå¯é€‰ï¼‰</li>
        <li><strong>scale(x, y)</strong>: ç¼©æ”¾å…ƒç´ ï¼Œx å’Œ y ä¸ºç¼©æ”¾æ¯”ä¾‹ï¼ˆy å¯é€‰ï¼Œé»˜è®¤ç­‰äº xï¼‰</li>
        <li><strong>skewX(angle)</strong> / <strong>skewY(angle)</strong>: å€¾æ–œå…ƒç´ </li>
        <li><strong>matrix(a b c d e f)</strong>: ä½¿ç”¨çŸ©é˜µè¿›è¡Œå¤æ‚å˜æ¢</li>
        <li>å¤šä¸ªå˜æ¢å¯ä»¥ç»„åˆä½¿ç”¨ï¼Œä»å·¦åˆ°å³ä¾æ¬¡åº”ç”¨</li>
        <li>å˜æ¢é¡ºåºå¾ˆé‡è¦ï¼š<code>translate rotate</code> å’Œ <code>rotate translate</code> ç»“æœä¸åŒ</li>
      </ul>
    </div>
  </div>

  <script>
    (function() {
      'use strict';

      // å¹³ç§»æ§åˆ¶
      const translateRect = document.getElementById('translate-rect');
      const translateX = document.getElementById('translate-x');
      const translateY = document.getElementById('translate-y');
      const translateCode = document.getElementById('translate-code');

      translateX.addEventListener('input', updateTranslate);
      translateY.addEventListener('input', updateTranslate);

      function updateTranslate() {
        const x = translateX.value;
        const y = translateY.value;
        translateRect.setAttribute('transform', `translate(${x}, ${y})`);
        document.getElementById('translate-x-value').textContent = x;
        document.getElementById('translate-y-value').textContent = y;
        translateCode.textContent = `transform="translate(${x}, ${y})"`;
      }

      // æ—‹è½¬æ§åˆ¶
      const rotateRect = document.getElementById('rotate-rect');
      const rotateAngle = document.getElementById('rotate-angle');
      const rotateCode = document.getElementById('rotate-code');

      rotateAngle.addEventListener('input', () => {
        const angle = rotateAngle.value;
        rotateRect.setAttribute('transform', `rotate(${angle} 150 125)`);
        document.getElementById('rotate-value').textContent = angle + 'Â°';
        rotateCode.textContent = `transform="rotate(${angle} 150 125)"`;
      });

      // ç¼©æ”¾æ§åˆ¶
      const scaleRect = document.getElementById('scale-rect');
      const scaleX = document.getElementById('scale-x');
      const scaleY = document.getElementById('scale-y');
      const scaleCode = document.getElementById('scale-code');

      scaleX.addEventListener('input', updateScale);
      scaleY.addEventListener('input', updateScale);

      function updateScale() {
        const x = scaleX.value;
        const y = scaleY.value;
        const offsetX = 150 * (1 - x);
        const offsetY = 125 * (1 - y);
        scaleRect.setAttribute('transform', `translate(${offsetX}, ${offsetY}) scale(${x}, ${y})`);
        document.getElementById('scale-x-value').textContent = parseFloat(x).toFixed(1);
        document.getElementById('scale-y-value').textContent = parseFloat(y).toFixed(1);
        scaleCode.textContent = `transform="scale(${x}, ${y})"`;
      }

      // å€¾æ–œæ§åˆ¶
      const skewRect = document.getElementById('skew-rect');
      const skewX = document.getElementById('skew-x');
      const skewY = document.getElementById('skew-y');
      const skewCode = document.getElementById('skew-code');

      skewX.addEventListener('input', updateSkew);
      skewY.addEventListener('input', updateSkew);

      function updateSkew() {
        const x = skewX.value;
        const y = skewY.value;
        skewRect.setAttribute('transform', `skewX(${x}) skewY(${y})`);
        document.getElementById('skew-x-value').textContent = x + 'Â°';
        document.getElementById('skew-y-value').textContent = y + 'Â°';
        skewCode.textContent = `transform="skewX(${x}) skewY(${y})"`;
      }

      // ç»„åˆå˜æ¢æ§åˆ¶
      const combinedRect = document.getElementById('combined-rect');
      const combinedTx = document.getElementById('combined-tx');
      const combinedTy = document.getElementById('combined-ty');
      const combinedRotate = document.getElementById('combined-rotate');
      const combinedScale = document.getElementById('combined-scale');
      const combinedCode = document.getElementById('combined-code');

      combinedTx.addEventListener('input', updateCombined);
      combinedTy.addEventListener('input', updateCombined);
      combinedRotate.addEventListener('input', updateCombined);
      combinedScale.addEventListener('input', updateCombined);

      function updateCombined() {
        const tx = combinedTx.value;
        const ty = combinedTy.value;
        const rotate = combinedRotate.value;
        const scale = combinedScale.value;

        combinedRect.setAttribute('transform', 
          `translate(${tx}, ${ty}) rotate(${rotate} 250 150) scale(${scale})`);

        document.getElementById('combined-tx-value').textContent = tx;
        document.getElementById('combined-ty-value').textContent = ty;
        document.getElementById('combined-rotate-value').textContent = rotate + 'Â°';
        document.getElementById('combined-scale-value').textContent = parseFloat(scale).toFixed(1);

        combinedCode.textContent = 
          `transform="translate(${tx}, ${ty}) rotate(${rotate} 250 150) scale(${scale})"`;
      }

      // å…¨å±€å‡½æ•°
      window.resetCombined = function() {
        combinedTx.value = 0;
        combinedTy.value = 0;
        combinedRotate.value = 0;
        combinedScale.value = 1;
        updateCombined();
        showToast('å˜æ¢å·²é‡ç½®', 'success');
      };
    })();
  </script>
</body>
</html>
