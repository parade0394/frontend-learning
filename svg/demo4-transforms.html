<!doctype html>
<html data-theme="light" lang="zh-CN">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>SVG å˜æ¢æ“ä½œ - å‰ç«¯å­¦ä¹ ä¸­å¿ƒ</title>
    <link href="/src/styles/common.css" rel="stylesheet" />
    <script src="../shared/theme-sync.js"></script>
    <style>
      .transform-grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
        gap: var(--spacing-lg);
        margin: var(--spacing-lg) 0;
      }

      .transform-demo {
        background: var(--bg-secondary);
        border: 1px solid var(--border-color);
        border-radius: var(--radius-md);
        padding: var(--spacing-md);
      }

      .transform-demo h3 {
        margin-top: 0;
        color: var(--primary);
      }

      .svg-container {
        background: var(--bg-primary);
        border-radius: var(--radius-sm);
        padding: var(--spacing-md);
        margin: var(--spacing-md) 0;
        display: flex;
        justify-content: center;
        align-items: center;
        min-height: 250px;
      }

      .controls {
        display: flex;
        flex-direction: column;
        gap: var(--spacing-sm);
        margin-top: var(--spacing-md);
      }

      .control-row {
        display: flex;
        align-items: center;
        gap: var(--spacing-sm);
      }

      .control-row label {
        min-width: 100px;
        font-size: 0.9rem;
        color: var(--text-secondary);
      }

      .control-row input[type='range'] {
        flex: 1;
      }

      .value-display {
        min-width: 50px;
        text-align: right;
        font-weight: 600;
        color: var(--primary);
      }

      .reference-shape {
        opacity: 0.2;
      }
    </style>
    <!-- é˜²æ­¢ä¸»é¢˜é—ªçƒ -->
    <script>
      (function () {
        try {
          const theme = localStorage.getItem('themeMode') || 'light';
          const color = localStorage.getItem('primaryColor') || '#10b981';
          let actualTheme = theme;
          if (theme === 'auto') {
            actualTheme = window.matchMedia('(prefers-color-scheme: dark)').matches ? 'dark' : 'light';
          }
          document.documentElement.setAttribute('data-theme', actualTheme);
          document.documentElement.style.setProperty('--primary', color);
        } catch (e) {
          console.log(e);
        }
      })();
    </script>
    <script type="module" src="/src/theme.js"></script>
    <link href="styles.css" rel="stylesheet" />
  </head>
  <body>
    <!-- Skip to main content link for accessibility -->
    <a class="skip-link" href="#main-content">è·³è½¬åˆ°ä¸»è¦å†…å®¹</a>

    <!-- å·¦ä¾§è¾¹æ å¯¼èˆª -->
    <aside class="sidebar" aria-label="æ¼”ç¤ºå¯¼èˆª" role="navigation">
      <div class="sidebar-header">
        <h1>SVG å›¾å½¢</h1>
        <a class="back-home" href="index.html" aria-label="è¿”å›ä¸»é¡µ">â† è¿”å›ä¸»é¡µ</a>
      </div>
      <nav class="sidebar-nav" aria-label="ä¸»å¯¼èˆª">
        <div class="nav-section">
          <h3>åŸºç¡€å›¾å½¢</h3>
          <a class="nav-item" href="demo1-basic-shapes.html">åŸºç¡€å½¢çŠ¶</a>
          <a class="nav-item" href="demo2-paths.html">è·¯å¾„ç»˜åˆ¶</a>
        </div>
        <div class="nav-section">
          <h3>æ ·å¼ä¸æ•ˆæœ</h3>
          <a class="nav-item" href="demo3-gradients.html">æ¸å˜å¡«å……</a>
          <a class="nav-item active" href="demo4-transforms.html">å˜æ¢æ“ä½œ</a>
          <a class="nav-item" href="demo5-text.html">æ–‡æœ¬å¤„ç†</a>
          <a class="nav-item" href="demo6-filters.html">æ»¤é•œæ•ˆæœ</a>
        </div>
        <div class="nav-section">
          <h3>é«˜çº§åº”ç”¨</h3>
          <a class="nav-item" href="demo7-animations.html">åŠ¨ç”»æ•ˆæœ</a>
          <a class="nav-item" href="demo8-icons.html">å›¾æ ‡ç³»ç»Ÿ</a>
          <a class="nav-item" href="demo9-charts.html">äº¤äº’å›¾è¡¨</a>
          <a class="nav-item" href="demo10-responsive.html">å“åº”å¼ SVG</a>
        </div>
      </nav>
    </aside>

    <!-- å³ä¾§ä¸»å†…å®¹åŒº -->
    <main id="main-content" class="main-content" role="main">
      <div class="demo-page">
        <div class="container">
          <a class="back-link" href="index.html">â† è¿”å› SVG æ¨¡å—</a>

          <h1>SVG å˜æ¢æ“ä½œ</h1>
          <p>ä½¿ç”¨ transform å±æ€§å¯¹ SVG å…ƒç´ è¿›è¡Œå¹³ç§»ã€æ—‹è½¬ã€ç¼©æ”¾å’Œå€¾æ–œç­‰å˜æ¢ã€‚</p>

          <div class="transform-grid">
            <!-- å¹³ç§» -->
            <div class="transform-demo">
              <h3>å¹³ç§» (translate)</h3>
              <div class="svg-container">
                <svg width="300" height="250" viewBox="0 0 300 250">
                  <rect
                    class="reference-shape"
                    x="75"
                    y="75"
                    width="80"
                    height="80"
                    fill="var(--text-secondary)"
                    rx="5"
                  />
                  <rect
                    id="translate-rect"
                    x="75"
                    y="75"
                    width="80"
                    height="80"
                    fill="var(--primary)"
                    rx="5"
                    transform="translate(0, 0)"
                  />
                </svg>
              </div>
              <div class="controls">
                <div class="control-row">
                  <label>X åç§»:</label>
                  <input id="translate-x" type="range" value="0" min="-100" max="100" />
                  <span id="translate-x-value" class="value-display">0</span>
                </div>
                <div class="control-row">
                  <label>Y åç§»:</label>
                  <input id="translate-y" type="range" value="0" min="-100" max="100" />
                  <span id="translate-y-value" class="value-display">0</span>
                </div>
              </div>
              <div class="code-block">
                <code id="translate-code">transform="translate(0, 0)"</code>
              </div>
            </div>

            <!-- æ—‹è½¬ -->
            <div class="transform-demo">
              <h3>æ—‹è½¬ (rotate)</h3>
              <div class="svg-container">
                <svg width="300" height="250" viewBox="0 0 300 250">
                  <rect
                    class="reference-shape"
                    x="110"
                    y="85"
                    width="80"
                    height="80"
                    fill="var(--text-secondary)"
                    rx="5"
                  />
                  <circle cx="150" cy="125" r="3" fill="var(--error)" />
                  <rect
                    id="rotate-rect"
                    x="110"
                    y="85"
                    width="80"
                    height="80"
                    fill="var(--primary)"
                    rx="5"
                    transform="rotate(0 150 125)"
                  />
                </svg>
              </div>
              <div class="controls">
                <div class="control-row">
                  <label>æ—‹è½¬è§’åº¦:</label>
                  <input id="rotate-angle" type="range" value="0" min="0" max="360" />
                  <span id="rotate-value" class="value-display">0Â°</span>
                </div>
              </div>
              <div class="code-block">
                <code id="rotate-code">transform="rotate(0 150 125)"</code>
              </div>
            </div>

            <!-- ç¼©æ”¾ -->
            <div class="transform-demo">
              <h3>ç¼©æ”¾ (scale)</h3>
              <div class="svg-container">
                <svg width="300" height="250" viewBox="0 0 300 250">
                  <rect
                    class="reference-shape"
                    x="110"
                    y="85"
                    width="80"
                    height="80"
                    fill="var(--text-secondary)"
                    rx="5"
                  />
                  <rect
                    id="scale-rect"
                    x="110"
                    y="85"
                    width="80"
                    height="80"
                    fill="var(--primary)"
                    rx="5"
                    transform="scale(1) translate(0, 0)"
                    transform-origin="150px 125px"
                  />
                </svg>
              </div>
              <div class="controls">
                <div class="control-row">
                  <label>X ç¼©æ”¾:</label>
                  <input id="scale-x" type="range" value="1" min="0.5" max="2" step="0.1" />
                  <span id="scale-x-value" class="value-display">1.0</span>
                </div>
                <div class="control-row">
                  <label>Y ç¼©æ”¾:</label>
                  <input id="scale-y" type="range" value="1" min="0.5" max="2" step="0.1" />
                  <span id="scale-y-value" class="value-display">1.0</span>
                </div>
              </div>
              <div class="code-block">
                <code id="scale-code">transform="scale(1, 1)"</code>
              </div>
            </div>

            <!-- å€¾æ–œ -->
            <div class="transform-demo">
              <h3>å€¾æ–œ (skew)</h3>
              <div class="svg-container">
                <svg width="300" height="250" viewBox="0 0 300 250">
                  <rect
                    class="reference-shape"
                    x="110"
                    y="85"
                    width="80"
                    height="80"
                    fill="var(--text-secondary)"
                    rx="5"
                  />
                  <rect
                    id="skew-rect"
                    x="110"
                    y="85"
                    width="80"
                    height="80"
                    fill="var(--primary)"
                    rx="5"
                    transform="skewX(0) skewY(0)"
                  />
                </svg>
              </div>
              <div class="controls">
                <div class="control-row">
                  <label>X å€¾æ–œ:</label>
                  <input id="skew-x" type="range" value="0" min="-45" max="45" />
                  <span id="skew-x-value" class="value-display">0Â°</span>
                </div>
                <div class="control-row">
                  <label>Y å€¾æ–œ:</label>
                  <input id="skew-y" type="range" value="0" min="-45" max="45" />
                  <span id="skew-y-value" class="value-display">0Â°</span>
                </div>
              </div>
              <div class="code-block">
                <code id="skew-code">transform="skewX(0) skewY(0)"</code>
              </div>
            </div>
          </div>

          <!-- ç»„åˆå˜æ¢ -->
          <div class="transform-demo" style="margin-top: var(--spacing-xl)">
            <h3>ğŸ® ç»„åˆå˜æ¢</h3>
            <p style="color: var(--text-secondary); margin-bottom: var(--spacing-md)">
              å¤šä¸ªå˜æ¢å¯ä»¥ç»„åˆä½¿ç”¨ï¼Œå˜æ¢é¡ºåºä¼šå½±å“æœ€ç»ˆç»“æœ
            </p>
            <div class="svg-container">
              <svg width="100%" height="300" viewBox="0 0 500 300">
                <rect
                  class="reference-shape"
                  x="210"
                  y="110"
                  width="80"
                  height="80"
                  fill="var(--text-secondary)"
                  rx="5"
                />
                <circle cx="250" cy="150" r="3" fill="var(--error)" />
                <rect
                  id="combined-rect"
                  x="210"
                  y="110"
                  width="80"
                  height="80"
                  fill="var(--primary)"
                  rx="5"
                  transform="translate(0, 0) rotate(0 250 150) scale(1)"
                />
              </svg>
            </div>

            <div class="controls">
              <div class="control-row">
                <label>å¹³ç§» X:</label>
                <input id="combined-tx" type="range" value="0" min="-100" max="100" />
                <span id="combined-tx-value" class="value-display">0</span>
              </div>
              <div class="control-row">
                <label>å¹³ç§» Y:</label>
                <input id="combined-ty" type="range" value="0" min="-100" max="100" />
                <span id="combined-ty-value" class="value-display">0</span>
              </div>
              <div class="control-row">
                <label>æ—‹è½¬:</label>
                <input id="combined-rotate" type="range" value="0" min="0" max="360" />
                <span id="combined-rotate-value" class="value-display">0Â°</span>
              </div>
              <div class="control-row">
                <label>ç¼©æ”¾:</label>
                <input id="combined-scale" type="range" value="1" min="0.5" max="2" step="0.1" />
                <span id="combined-scale-value" class="value-display">1.0</span>
              </div>
            </div>

            <div class="code-block">
              <code id="combined-code">transform="translate(0, 0) rotate(0 250 150) scale(1)"</code>
            </div>

            <button class="btn" onclick="resetCombined()" style="margin-top: var(--spacing-md)">é‡ç½®å˜æ¢</button>
          </div>

          <div
            class="info-section"
            style="
              margin-top: var(--spacing-xl);
              padding: var(--spacing-md);
              background: var(--bg-secondary);
              border-radius: var(--radius-md);
            "
          >
            <h2>ğŸ’¡ å…³é”®çŸ¥è¯†ç‚¹</h2>
            <ul>
              <li><strong>translate(x, y)</strong>: å¹³ç§»å…ƒç´ ï¼Œx å’Œ y ä¸ºåç§»é‡</li>
              <li><strong>rotate(angle cx cy)</strong>: æ—‹è½¬å…ƒç´ ï¼Œangle ä¸ºè§’åº¦ï¼Œcx/cy ä¸ºæ—‹è½¬ä¸­å¿ƒï¼ˆå¯é€‰ï¼‰</li>
              <li><strong>scale(x, y)</strong>: ç¼©æ”¾å…ƒç´ ï¼Œx å’Œ y ä¸ºç¼©æ”¾æ¯”ä¾‹ï¼ˆy å¯é€‰ï¼Œé»˜è®¤ç­‰äº xï¼‰</li>
              <li><strong>skewX(angle)</strong> / <strong>skewY(angle)</strong>: å€¾æ–œå…ƒç´ </li>
              <li><strong>matrix(a b c d e f)</strong>: ä½¿ç”¨çŸ©é˜µè¿›è¡Œå¤æ‚å˜æ¢</li>
              <li>å¤šä¸ªå˜æ¢å¯ä»¥ç»„åˆä½¿ç”¨ï¼Œä»å·¦åˆ°å³ä¾æ¬¡åº”ç”¨</li>
              <li>å˜æ¢é¡ºåºå¾ˆé‡è¦ï¼š<code>translate rotate</code> å’Œ <code>rotate translate</code> ç»“æœä¸åŒ</li>
            </ul>
          </div>
        </div>

        <script type="module">
          import { showToast } from '/src/utils.js';

          (() => {
            'use strict';

            // å¹³ç§»æ§åˆ¶
            const translateRect = document.getElementById('translate-rect');
            const translateX = document.getElementById('translate-x');
            const translateY = document.getElementById('translate-y');
            const translateCode = document.getElementById('translate-code');

            translateX.addEventListener('input', updateTranslate);
            translateY.addEventListener('input', updateTranslate);

            function updateTranslate() {
              const x = translateX.value;
              const y = translateY.value;
              translateRect.setAttribute('transform', `translate(${x}, ${y})`);
              document.getElementById('translate-x-value').textContent = x;
              document.getElementById('translate-y-value').textContent = y;
              translateCode.textContent = `transform="translate(${x}, ${y})"`;
            }

            // æ—‹è½¬æ§åˆ¶
            const rotateRect = document.getElementById('rotate-rect');
            const rotateAngle = document.getElementById('rotate-angle');
            const rotateCode = document.getElementById('rotate-code');

            rotateAngle.addEventListener('input', () => {
              const angle = rotateAngle.value;
              rotateRect.setAttribute('transform', `rotate(${angle} 150 125)`);
              document.getElementById('rotate-value').textContent = angle + 'Â°';
              rotateCode.textContent = `transform="rotate(${angle} 150 125)"`;
            });

            // ç¼©æ”¾æ§åˆ¶
            const scaleRect = document.getElementById('scale-rect');
            const scaleX = document.getElementById('scale-x');
            const scaleY = document.getElementById('scale-y');
            const scaleCode = document.getElementById('scale-code');

            scaleX.addEventListener('input', updateScale);
            scaleY.addEventListener('input', updateScale);

            function updateScale() {
              const x = scaleX.value;
              const y = scaleY.value;
              const offsetX = 150 * (1 - x);
              const offsetY = 125 * (1 - y);
              scaleRect.setAttribute('transform', `translate(${offsetX}, ${offsetY}) scale(${x}, ${y})`);
              document.getElementById('scale-x-value').textContent = parseFloat(x).toFixed(1);
              document.getElementById('scale-y-value').textContent = parseFloat(y).toFixed(1);
              scaleCode.textContent = `transform="scale(${x}, ${y})"`;
            }

            // å€¾æ–œæ§åˆ¶
            const skewRect = document.getElementById('skew-rect');
            const skewX = document.getElementById('skew-x');
            const skewY = document.getElementById('skew-y');
            const skewCode = document.getElementById('skew-code');

            skewX.addEventListener('input', updateSkew);
            skewY.addEventListener('input', updateSkew);

            function updateSkew() {
              const x = skewX.value;
              const y = skewY.value;
              skewRect.setAttribute('transform', `skewX(${x}) skewY(${y})`);
              document.getElementById('skew-x-value').textContent = x + 'Â°';
              document.getElementById('skew-y-value').textContent = y + 'Â°';
              skewCode.textContent = `transform="skewX(${x}) skewY(${y})"`;
            }

            // ç»„åˆå˜æ¢æ§åˆ¶
            const combinedRect = document.getElementById('combined-rect');
            const combinedTx = document.getElementById('combined-tx');
            const combinedTy = document.getElementById('combined-ty');
            const combinedRotate = document.getElementById('combined-rotate');
            const combinedScale = document.getElementById('combined-scale');
            const combinedCode = document.getElementById('combined-code');

            combinedTx.addEventListener('input', updateCombined);
            combinedTy.addEventListener('input', updateCombined);
            combinedRotate.addEventListener('input', updateCombined);
            combinedScale.addEventListener('input', updateCombined);

            function updateCombined() {
              const tx = combinedTx.value;
              const ty = combinedTy.value;
              const rotate = combinedRotate.value;
              const scale = combinedScale.value;

              combinedRect.setAttribute(
                'transform',
                `translate(${tx}, ${ty}) rotate(${rotate} 250 150) scale(${scale})`
              );

              document.getElementById('combined-tx-value').textContent = tx;
              document.getElementById('combined-ty-value').textContent = ty;
              document.getElementById('combined-rotate-value').textContent = rotate + 'Â°';
              document.getElementById('combined-scale-value').textContent = parseFloat(scale).toFixed(1);

              combinedCode.textContent = `transform="translate(${tx}, ${ty}) rotate(${rotate} 250 150) scale(${scale})"`;
            }

            // å…¨å±€å‡½æ•°
            window.resetCombined = function () {
              combinedTx.value = 0;
              combinedTy.value = 0;
              combinedRotate.value = 0;
              combinedScale.value = 1;
              updateCombined();
              showToast('å˜æ¢å·²é‡ç½®', 'success');
            };
          })();
        </script>
      </div>
    </main>
  </body>
</html>
