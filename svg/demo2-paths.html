<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>SVG è·¯å¾„ç»˜åˆ¶ - å‰ç«¯å­¦ä¹ ä¸­å¿ƒ</title>
  <link rel="stylesheet" href="../shared/common.css">
  <script src="../shared/theme-sync.js"></script>
  <script src="../shared/utils.js"></script>
  <style>
    .path-demo {
      background: var(--bg-secondary);
      border: 1px solid var(--border-color);
      border-radius: var(--radius-md);
      padding: var(--spacing-md);
      margin: var(--spacing-lg) 0;
    }

    .path-demo h3 {
      margin-top: 0;
      color: var(--primary);
    }

    .svg-container {
      background: var(--bg-primary);
      border-radius: var(--radius-sm);
      padding: var(--spacing-md);
      margin: var(--spacing-md) 0;
      display: flex;
      justify-content: center;
      align-items: center;
      min-height: 250px;
    }

    .path-commands {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
      gap: var(--spacing-sm);
      margin: var(--spacing-md) 0;
      padding: var(--spacing-md);
      background: var(--bg-primary);
      border-radius: var(--radius-sm);
    }

    .command-item {
      padding: var(--spacing-xs);
    }

    .command-item code {
      color: var(--primary);
      font-weight: 600;
    }

    .command-item p {
      margin: 4px 0 0 0;
      font-size: 0.85rem;
      color: var(--text-secondary);
    }

    .interactive-canvas {
      position: relative;
      background: var(--bg-primary);
      border-radius: var(--radius-sm);
      margin: var(--spacing-md) 0;
    }

    .interactive-canvas svg {
      display: block;
      width: 100%;
      height: auto;
    }

    .point {
      cursor: move;
      transition: var(--transition-fast);
    }

    .point:hover {
      r: 8;
    }

    .btn-group {
      display: flex;
      gap: var(--spacing-sm);
      flex-wrap: wrap;
      margin-top: var(--spacing-md);
    }
  </style>
</head>
<body>
  <div class="container">
    <a href="index.html" class="back-link">â† è¿”å› SVG æ¨¡å—</a>
    
    <h1>SVG è·¯å¾„ç»˜åˆ¶</h1>
    <p>path å…ƒç´ æ˜¯ SVG ä¸­æœ€å¼ºå¤§çš„ç»˜å›¾å·¥å…·ï¼Œå¯ä»¥ç»˜åˆ¶ä»»æ„å¤æ‚çš„å½¢çŠ¶ã€‚</p>

    <!-- è·¯å¾„å‘½ä»¤å‚è€ƒ -->
    <div class="path-demo">
      <h3>ğŸ“– è·¯å¾„å‘½ä»¤å‚è€ƒ</h3>
      <div class="path-commands">
        <div class="command-item">
          <code>M x y</code>
          <p>ç§»åŠ¨åˆ° (Move to)</p>
        </div>
        <div class="command-item">
          <code>L x y</code>
          <p>ç›´çº¿åˆ° (Line to)</p>
        </div>
        <div class="command-item">
          <code>H x</code>
          <p>æ°´å¹³çº¿åˆ°</p>
        </div>
        <div class="command-item">
          <code>V y</code>
          <p>å‚ç›´çº¿åˆ°</p>
        </div>
        <div class="command-item">
          <code>C x1 y1 x2 y2 x y</code>
          <p>ä¸‰æ¬¡è´å¡å°”æ›²çº¿</p>
        </div>
        <div class="command-item">
          <code>S x2 y2 x y</code>
          <p>å¹³æ»‘ä¸‰æ¬¡è´å¡å°”</p>
        </div>
        <div class="command-item">
          <code>Q x1 y1 x y</code>
          <p>äºŒæ¬¡è´å¡å°”æ›²çº¿</p>
        </div>
        <div class="command-item">
          <code>T x y</code>
          <p>å¹³æ»‘äºŒæ¬¡è´å¡å°”</p>
        </div>
        <div class="command-item">
          <code>A rx ry rotation large-arc sweep x y</code>
          <p>æ¤­åœ†å¼§</p>
        </div>
        <div class="command-item">
          <code>Z</code>
          <p>é—­åˆè·¯å¾„</p>
        </div>
      </div>
      <p style="margin-top: var(--spacing-sm); color: var(--text-secondary); font-size: 0.9rem;">
        ğŸ’¡ æç¤ºï¼šå¤§å†™å­—æ¯è¡¨ç¤ºç»å¯¹åæ ‡ï¼Œå°å†™å­—æ¯è¡¨ç¤ºç›¸å¯¹åæ ‡
      </p>
    </div>

    <!-- ç›´çº¿è·¯å¾„ -->
    <div class="path-demo">
      <h3>ç›´çº¿è·¯å¾„ (M, L, H, V)</h3>
      <div class="svg-container">
        <svg width="400" height="200" viewBox="0 0 400 200">
          <path d="M 50,50 L 150,50 L 150,150 L 50,150 Z" 
                fill="none" stroke="var(--primary)" stroke-width="3"/>
          <path d="M 200,50 H 300 V 150 H 200 Z" 
                fill="none" stroke="var(--primary)" stroke-width="3" stroke-dasharray="5,5"/>
        </svg>
      </div>
      <div class="code-block">
        <code>// ä½¿ç”¨ L (Line to)
&lt;path d="M 50,50 L 150,50 L 150,150 L 50,150 Z"/&gt;

// ä½¿ç”¨ H (Horizontal) å’Œ V (Vertical)
&lt;path d="M 200,50 H 300 V 150 H 200 Z"/&gt;</code>
      </div>
    </div>

    <!-- äºŒæ¬¡è´å¡å°”æ›²çº¿ -->
    <div class="path-demo">
      <h3>äºŒæ¬¡è´å¡å°”æ›²çº¿ (Q, T)</h3>
      <div class="svg-container">
        <svg width="400" height="200" viewBox="0 0 400 200">
          <!-- è¾…åŠ©çº¿ -->
          <line x1="50" y1="150" x2="150" y2="50" stroke="var(--text-secondary)" stroke-width="1" stroke-dasharray="2,2" opacity="0.5"/>
          <line x1="150" y1="50" x2="250" y2="150" stroke="var(--text-secondary)" stroke-width="1" stroke-dasharray="2,2" opacity="0.5"/>
          
          <!-- æ›²çº¿ -->
          <path d="M 50,150 Q 150,50 250,150" 
                fill="none" stroke="var(--primary)" stroke-width="3"/>
          
          <!-- æ§åˆ¶ç‚¹ -->
          <circle cx="50" cy="150" r="4" fill="var(--primary)"/>
          <circle cx="150" cy="50" r="4" fill="var(--error)"/>
          <circle cx="250" cy="150" r="4" fill="var(--primary)"/>
          
          <!-- å¹³æ»‘æ›²çº¿ -->
          <path d="M 50,150 Q 150,50 250,150 T 450,150" 
                fill="none" stroke="var(--primary)" stroke-width="2" opacity="0.5"/>
        </svg>
      </div>
      <div class="code-block">
        <code>// Q: äºŒæ¬¡è´å¡å°”æ›²çº¿ (èµ·ç‚¹, æ§åˆ¶ç‚¹, ç»ˆç‚¹)
&lt;path d="M 50,150 Q 150,50 250,150"/&gt;

// T: å¹³æ»‘å»¶ç»­æ›²çº¿
&lt;path d="M 50,150 Q 150,50 250,150 T 450,150"/&gt;</code>
      </div>
    </div>

    <!-- ä¸‰æ¬¡è´å¡å°”æ›²çº¿ -->
    <div class="path-demo">
      <h3>ä¸‰æ¬¡è´å¡å°”æ›²çº¿ (C, S)</h3>
      <div class="svg-container">
        <svg width="400" height="200" viewBox="0 0 400 200">
          <!-- è¾…åŠ©çº¿ -->
          <line x1="50" y1="100" x2="100" y2="50" stroke="var(--text-secondary)" stroke-width="1" stroke-dasharray="2,2" opacity="0.5"/>
          <line x1="200" y1="50" x2="250" y2="100" stroke="var(--text-secondary)" stroke-width="1" stroke-dasharray="2,2" opacity="0.5"/>
          
          <!-- æ›²çº¿ -->
          <path d="M 50,100 C 100,50 200,50 250,100" 
                fill="none" stroke="var(--primary)" stroke-width="3"/>
          
          <!-- æ§åˆ¶ç‚¹ -->
          <circle cx="50" cy="100" r="4" fill="var(--primary)"/>
          <circle cx="100" cy="50" r="4" fill="var(--error)"/>
          <circle cx="200" cy="50" r="4" fill="var(--error)"/>
          <circle cx="250" cy="100" r="4" fill="var(--primary)"/>
        </svg>
      </div>
      <div class="code-block">
        <code>// C: ä¸‰æ¬¡è´å¡å°”æ›²çº¿ (èµ·ç‚¹, æ§åˆ¶ç‚¹1, æ§åˆ¶ç‚¹2, ç»ˆç‚¹)
&lt;path d="M 50,100 C 100,50 200,50 250,100"/&gt;</code>
      </div>
    </div>

    <!-- å¼§çº¿ -->
    <div class="path-demo">
      <h3>æ¤­åœ†å¼§ (A)</h3>
      <div class="svg-container">
        <svg width="400" height="200" viewBox="0 0 400 200">
          <!-- ä¸åŒçš„å¼§çº¿é€‰é¡¹ -->
          <path d="M 50,100 A 50,50 0 0,0 150,100" 
                fill="none" stroke="var(--primary)" stroke-width="3"/>
          <path d="M 50,100 A 50,50 0 0,1 150,100" 
                fill="none" stroke="var(--success)" stroke-width="3"/>
          <path d="M 50,100 A 50,50 0 1,0 150,100" 
                fill="none" stroke="var(--warning)" stroke-width="3"/>
          <path d="M 50,100 A 50,50 0 1,1 150,100" 
                fill="none" stroke="var(--error)" stroke-width="3"/>
        </svg>
      </div>
      <div class="code-block">
        <code>// A: æ¤­åœ†å¼§ (rx ry rotation large-arc-flag sweep-flag x y)
&lt;path d="M 50,100 A 50,50 0 0,0 150,100"/&gt;  // å°å¼§ï¼Œé€†æ—¶é’ˆ
&lt;path d="M 50,100 A 50,50 0 0,1 150,100"/&gt;  // å°å¼§ï¼Œé¡ºæ—¶é’ˆ
&lt;path d="M 50,100 A 50,50 0 1,0 150,100"/&gt;  // å¤§å¼§ï¼Œé€†æ—¶é’ˆ
&lt;path d="M 50,100 A 50,50 0 1,1 150,100"/&gt;  // å¤§å¼§ï¼Œé¡ºæ—¶é’ˆ</code>
      </div>
    </div>

    <!-- äº¤äº’å¼è·¯å¾„ç¼–è¾‘å™¨ -->
    <div class="path-demo">
      <h3>ğŸ® äº¤äº’å¼è·¯å¾„ç¼–è¾‘å™¨</h3>
      <p style="color: var(--text-secondary); margin-bottom: var(--spacing-md);">
        æ‹–åŠ¨æ§åˆ¶ç‚¹æ¥è°ƒæ•´æ›²çº¿å½¢çŠ¶
      </p>
      <div class="interactive-canvas">
        <svg id="interactive-svg" width="100%" height="300" viewBox="0 0 500 300">
          <!-- è¾…åŠ©çº¿ -->
          <line id="guide1" x1="50" y1="150" x2="150" y2="50" 
                stroke="var(--text-secondary)" stroke-width="1" stroke-dasharray="2,2" opacity="0.3"/>
          <line id="guide2" x1="350" y1="50" x2="450" y2="150" 
                stroke="var(--text-secondary)" stroke-width="1" stroke-dasharray="2,2" opacity="0.3"/>
          
          <!-- è·¯å¾„ -->
          <path id="interactive-path" d="M 50,150 C 150,50 350,50 450,150" 
                fill="none" stroke="var(--primary)" stroke-width="4"/>
          
          <!-- æ§åˆ¶ç‚¹ -->
          <circle class="point" data-index="0" cx="50" cy="150" r="6" fill="var(--primary)" cursor="move"/>
          <circle class="point" data-index="1" cx="150" cy="50" r="6" fill="var(--error)" cursor="move"/>
          <circle class="point" data-index="2" cx="350" cy="50" r="6" fill="var(--error)" cursor="move"/>
          <circle class="point" data-index="3" cx="450" cy="150" r="6" fill="var(--primary)" cursor="move"/>
        </svg>
      </div>
      <div class="code-block">
        <code id="interactive-code">&lt;path d="M 50,150 C 150,50 350,50 450,150"/&gt;</code>
      </div>
      <div class="btn-group">
        <button class="btn" onclick="resetPath()">é‡ç½®è·¯å¾„</button>
        <button class="btn" onclick="copyPathCode()">å¤åˆ¶ä»£ç </button>
      </div>
    </div>
  </div>

  <script>
    (function() {
      'use strict';

      // äº¤äº’å¼è·¯å¾„ç¼–è¾‘å™¨
      const svg = document.getElementById('interactive-svg');
      const path = document.getElementById('interactive-path');
      const points = document.querySelectorAll('.point');
      const guide1 = document.getElementById('guide1');
      const guide2 = document.getElementById('guide2');
      const codeDisplay = document.getElementById('interactive-code');

      let selectedPoint = null;
      let offset = { x: 0, y: 0 };

      // åˆå§‹åæ ‡
      const initialCoords = [
        { x: 50, y: 150 },
        { x: 150, y: 50 },
        { x: 350, y: 50 },
        { x: 450, y: 150 }
      ];

      points.forEach(point => {
        point.addEventListener('mousedown', startDrag);
      });

      svg.addEventListener('mousemove', drag);
      svg.addEventListener('mouseup', endDrag);
      svg.addEventListener('mouseleave', endDrag);

      function startDrag(e) {
        selectedPoint = e.target;
        const pt = getMousePosition(e);
        offset.x = pt.x - parseFloat(selectedPoint.getAttribute('cx'));
        offset.y = pt.y - parseFloat(selectedPoint.getAttribute('cy'));
      }

      function drag(e) {
        if (!selectedPoint) return;
        
        const pt = getMousePosition(e);
        const x = pt.x - offset.x;
        const y = pt.y - offset.y;
        
        selectedPoint.setAttribute('cx', x);
        selectedPoint.setAttribute('cy', y);
        
        updatePath();
      }

      function endDrag() {
        selectedPoint = null;
      }

      function getMousePosition(e) {
        const CTM = svg.getScreenCTM();
        return {
          x: (e.clientX - CTM.e) / CTM.a,
          y: (e.clientY - CTM.f) / CTM.d
        };
      }

      function updatePath() {
        const coords = Array.from(points).map(p => ({
          x: Math.round(parseFloat(p.getAttribute('cx'))),
          y: Math.round(parseFloat(p.getAttribute('cy')))
        }));

        const d = `M ${coords[0].x},${coords[0].y} C ${coords[1].x},${coords[1].y} ${coords[2].x},${coords[2].y} ${coords[3].x},${coords[3].y}`;
        path.setAttribute('d', d);

        // æ›´æ–°è¾…åŠ©çº¿
        guide1.setAttribute('x1', coords[0].x);
        guide1.setAttribute('y1', coords[0].y);
        guide1.setAttribute('x2', coords[1].x);
        guide1.setAttribute('y2', coords[1].y);

        guide2.setAttribute('x1', coords[2].x);
        guide2.setAttribute('y1', coords[2].y);
        guide2.setAttribute('x2', coords[3].x);
        guide2.setAttribute('y2', coords[3].y);

        // æ›´æ–°ä»£ç æ˜¾ç¤º
        codeDisplay.textContent = `<path d="${d}"/>`;
      }

      // å…¨å±€å‡½æ•°
      window.resetPath = function() {
        points.forEach((point, i) => {
          point.setAttribute('cx', initialCoords[i].x);
          point.setAttribute('cy', initialCoords[i].y);
        });
        updatePath();
        showToast('è·¯å¾„å·²é‡ç½®', 'success');
      };

      window.copyPathCode = function() {
        const d = path.getAttribute('d');
        copyToClipboard(`<path d="${d}"/>`);
        showToast('ä»£ç å·²å¤åˆ¶åˆ°å‰ªè´´æ¿', 'success');
      };
    })();
  </script>
</body>
</html>
