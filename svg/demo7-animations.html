<!doctype html>
<html data-theme="light" lang="zh-CN">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>SVG åŠ¨ç”»æ•ˆæœ - å‰ç«¯å­¦ä¹ ä¸­å¿ƒ</title>
    <link href="/src/styles/common.css" rel="stylesheet" />
    <script src="../shared/theme-sync.js"></script>
    <style>
      .animation-grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
        gap: var(--spacing-lg);
        margin: var(--spacing-lg) 0;
      }

      .animation-demo {
        background: var(--bg-secondary);
        border: 1px solid var(--border-color);
        border-radius: var(--radius-md);
        padding: var(--spacing-md);
      }

      .animation-demo h3 {
        margin-top: 0;
        color: var(--primary);
      }

      .svg-container {
        background: var(--bg-primary);
        border-radius: var(--radius-sm);
        padding: var(--spacing-md);
        margin: var(--spacing-md) 0;
        display: flex;
        justify-content: center;
        align-items: center;
        min-height: 200px;
      }

      /* CSS åŠ¨ç”» */
      @keyframes pulse {
        0%,
        100% {
          r: 30;
          opacity: 1;
        }
        50% {
          r: 40;
          opacity: 0.6;
        }
      }

      @keyframes rotate {
        from {
          transform: rotate(0deg);
        }
        to {
          transform: rotate(360deg);
        }
      }

      @keyframes slide {
        0%,
        100% {
          transform: translateX(0);
        }
        50% {
          transform: translateX(100px);
        }
      }

      @keyframes morph {
        0%,
        100% {
          d: path('M 50,50 L 150,50 L 150,150 L 50,150 Z');
        }
        50% {
          d: path('M 100,30 L 170,100 L 100,170 L 30,100 Z');
        }
      }

      .css-pulse {
        animation: pulse 2s ease-in-out infinite;
      }
      .css-rotate {
        animation: rotate 3s linear infinite;
        transform-origin: center;
      }
      .css-slide {
        animation: slide 2s ease-in-out infinite;
      }
      .css-morph {
        animation: morph 3s ease-in-out infinite;
      }

      .btn-group {
        display: flex;
        gap: var(--spacing-sm);
        flex-wrap: wrap;
        margin-top: var(--spacing-md);
      }
    </style>
    <!-- é˜²æ­¢ä¸»é¢˜é—ªçƒ -->
    <script>
      (function () {
        try {
          const theme = localStorage.getItem('themeMode') || 'light';
          const color = localStorage.getItem('primaryColor') || '#10b981';
          let actualTheme = theme;
          if (theme === 'auto') {
            actualTheme = window.matchMedia('(prefers-color-scheme: dark)').matches ? 'dark' : 'light';
          }
          document.documentElement.setAttribute('data-theme', actualTheme);
          document.documentElement.style.setProperty('--primary', color);
        } catch (e) {
          console.log(e);
        }
      })();
    </script>
    <script type="module" src="/src/theme.js"></script>
    <link href="styles.css" rel="stylesheet" />
  </head>
  <body>
    <!-- Skip to main content link for accessibility -->
    <a class="skip-link" href="#main-content">è·³è½¬åˆ°ä¸»è¦å†…å®¹</a>

    <!-- å·¦ä¾§è¾¹æ å¯¼èˆª -->
    <aside class="sidebar" aria-label="æ¼”ç¤ºå¯¼èˆª" role="navigation">
      <div class="sidebar-header">
        <h1>SVG å›¾å½¢</h1>
        <a class="back-home" href="index.html" aria-label="è¿”å›ä¸»é¡µ">â† è¿”å›ä¸»é¡µ</a>
      </div>
      <nav class="sidebar-nav" aria-label="ä¸»å¯¼èˆª">
        <div class="nav-section">
          <h3>åŸºç¡€å›¾å½¢</h3>
          <a class="nav-item" href="demo1-basic-shapes.html">åŸºç¡€å½¢çŠ¶</a>
          <a class="nav-item" href="demo2-paths.html">è·¯å¾„ç»˜åˆ¶</a>
        </div>
        <div class="nav-section">
          <h3>æ ·å¼ä¸æ•ˆæœ</h3>
          <a class="nav-item" href="demo3-gradients.html">æ¸å˜å¡«å……</a>
          <a class="nav-item" href="demo4-transforms.html">å˜æ¢æ“ä½œ</a>
          <a class="nav-item" href="demo5-text.html">æ–‡æœ¬å¤„ç†</a>
          <a class="nav-item" href="demo6-filters.html">æ»¤é•œæ•ˆæœ</a>
        </div>
        <div class="nav-section">
          <h3>é«˜çº§åº”ç”¨</h3>
          <a class="nav-item active" href="demo7-animations.html">åŠ¨ç”»æ•ˆæœ</a>
          <a class="nav-item" href="demo8-icons.html">å›¾æ ‡ç³»ç»Ÿ</a>
          <a class="nav-item" href="demo9-charts.html">äº¤äº’å›¾è¡¨</a>
          <a class="nav-item" href="demo10-responsive.html">å“åº”å¼ SVG</a>
        </div>
      </nav>
    </aside>

    <!-- å³ä¾§ä¸»å†…å®¹åŒº -->
    <main id="main-content" class="main-content" role="main">
      <div class="demo-page">
        <div class="container">
          <a class="back-link" href="index.html">â† è¿”å› SVG æ¨¡å—</a>

          <h1>SVG åŠ¨ç”»æ•ˆæœ</h1>
          <p>SVG æ”¯æŒå¤šç§åŠ¨ç”»æ–¹å¼ï¼šSMIL åŠ¨ç”»ã€CSS åŠ¨ç”»å’Œ JavaScript åŠ¨ç”»ã€‚</p>

          <div class="animation-grid">
            <!-- SMIL åŠ¨ç”» - å±æ€§åŠ¨ç”» -->
            <div class="animation-demo">
              <h3>SMIL å±æ€§åŠ¨ç”»</h3>
              <div class="svg-container">
                <svg width="200" height="200" viewBox="0 0 200 200">
                  <circle cx="100" cy="100" r="30" fill="var(--primary)">
                    <animate attributeName="r" values="30;50;30" dur="2s" repeatCount="indefinite" />
                    <animate attributeName="opacity" values="1;0.5;1" dur="2s" repeatCount="indefinite" />
                  </circle>
                </svg>
              </div>
              <div class="code-block">
                <code
                  >&lt;circle cx="100" cy="100" r="30"&gt; &lt;animate attributeName="r" values="30;50;30" dur="2s"
                  repeatCount="indefinite"/&gt; &lt;/circle&gt;</code
                >
              </div>
            </div>

            <!-- SMIL åŠ¨ç”» - è·¯å¾„åŠ¨ç”» -->
            <div class="animation-demo">
              <h3>SMIL è·¯å¾„åŠ¨ç”»</h3>
              <div class="svg-container">
                <svg width="200" height="200" viewBox="0 0 200 200">
                  <path
                    d="M 50,100 Q 100,50 150,100 T 250,100"
                    stroke="var(--text-secondary)"
                    stroke-width="2"
                    fill="none"
                    opacity="0.3"
                  />
                  <circle r="8" fill="var(--primary)">
                    <animateMotion dur="3s" repeatCount="indefinite">
                      <mpath href="#motionPath" />
                    </animateMotion>
                  </circle>
                  <path id="motionPath" d="M 50,100 Q 100,50 150,100 T 250,100" fill="none" />
                </svg>
              </div>
              <div class="code-block">
                <code
                  >&lt;circle r="8"&gt; &lt;animateMotion dur="3s" repeatCount="indefinite"&gt; &lt;mpath
                  href="#path"/&gt; &lt;/animateMotion&gt; &lt;/circle&gt;</code
                >
              </div>
            </div>

            <!-- SMIL åŠ¨ç”» - å˜æ¢åŠ¨ç”» -->
            <div class="animation-demo">
              <h3>SMIL å˜æ¢åŠ¨ç”»</h3>
              <div class="svg-container">
                <svg width="200" height="200" viewBox="0 0 200 200">
                  <rect x="75" y="75" width="50" height="50" fill="var(--primary)" rx="5">
                    <animateTransform
                      type="rotate"
                      attributeName="transform"
                      from="0 100 100"
                      to="360 100 100"
                      dur="3s"
                      repeatCount="indefinite"
                    />
                  </rect>
                </svg>
              </div>
              <div class="code-block">
                <code
                  >&lt;rect x="75" y="75" width="50" height="50"&gt; &lt;animateTransform attributeName="transform"
                  type="rotate" from="0 100 100" to="360 100 100" dur="3s" repeatCount="indefinite"/&gt;
                  &lt;/rect&gt;</code
                >
              </div>
            </div>

            <!-- CSS åŠ¨ç”» - è„‰å†² -->
            <div class="animation-demo">
              <h3>CSS åŠ¨ç”» - è„‰å†²</h3>
              <div class="svg-container">
                <svg width="200" height="200" viewBox="0 0 200 200">
                  <circle class="css-pulse" cx="100" cy="100" r="30" fill="var(--primary)" />
                </svg>
              </div>
              <div class="code-block">
                <code
                  >@keyframes pulse { 0%, 100% { r: 30; opacity: 1; } 50% { r: 40; opacity: 0.6; } } .pulse { animation:
                  pulse 2s infinite; }</code
                >
              </div>
            </div>

            <!-- CSS åŠ¨ç”» - æ—‹è½¬ -->
            <div class="animation-demo">
              <h3>CSS åŠ¨ç”» - æ—‹è½¬</h3>
              <div class="svg-container">
                <svg width="200" height="200" viewBox="0 0 200 200">
                  <rect class="css-rotate" x="75" y="75" width="50" height="50" fill="var(--primary)" rx="5" />
                </svg>
              </div>
              <div class="code-block">
                <code
                  >@keyframes rotate { from { transform: rotate(0deg); } to { transform: rotate(360deg); } } .rotate {
                  animation: rotate 3s linear infinite; transform-origin: center; }</code
                >
              </div>
            </div>

            <!-- CSS åŠ¨ç”» - æ»‘åŠ¨ -->
            <div class="animation-demo">
              <h3>CSS åŠ¨ç”» - æ»‘åŠ¨</h3>
              <div class="svg-container">
                <svg width="200" height="200" viewBox="0 0 200 200">
                  <circle class="css-slide" cx="50" cy="100" r="20" fill="var(--primary)" />
                </svg>
              </div>
              <div class="code-block">
                <code
                  >@keyframes slide { 0%, 100% { transform: translateX(0); } 50% { transform: translateX(100px); } }
                  .slide { animation: slide 2s infinite; }</code
                >
              </div>
            </div>
          </div>

          <!-- JavaScript åŠ¨ç”» -->
          <div class="animation-demo" style="margin-top: var(--spacing-xl)">
            <h3>ğŸ® JavaScript åŠ¨ç”»æ§åˆ¶</h3>
            <div class="svg-container">
              <svg id="js-svg" width="100%" height="250" viewBox="0 0 500 250">
                <circle id="js-circle" cx="50" cy="125" r="25" fill="var(--primary)" />
              </svg>
            </div>
            <div class="btn-group">
              <button class="btn" onclick="startAnimation()">å¼€å§‹åŠ¨ç”»</button>
              <button class="btn" onclick="pauseAnimation()">æš‚åœåŠ¨ç”»</button>
              <button class="btn" onclick="resetAnimation()">é‡ç½®</button>
            </div>
            <div class="code-block" style="margin-top: var(--spacing-md)">
              <code
                >let position = 0; let animationId; function animate() { position += 2; if (position > 450) position =
                50; circle.setAttribute('cx', position); animationId = requestAnimationFrame(animate); } function
                start() { animate(); } function pause() { cancelAnimationFrame(animationId); }</code
              >
            </div>
          </div>

          <!-- äº¤äº’å¼åŠ¨ç”»ç¼–è¾‘å™¨ -->
          <div class="animation-demo" style="margin-top: var(--spacing-xl)">
            <h3>ğŸ® äº¤äº’å¼åŠ¨ç”»ç¼–è¾‘å™¨</h3>
            <div class="svg-container">
              <svg width="100%" height="250" viewBox="0 0 500 250">
                <circle id="custom-circle" cx="250" cy="125" r="30" fill="var(--primary)">
                  <animate id="custom-animate" attributeName="r" values="30;50;30" dur="2s" repeatCount="indefinite" />
                </circle>
              </svg>
            </div>

            <div style="display: flex; flex-direction: column; gap: var(--spacing-sm); margin-top: var(--spacing-md)">
              <div style="display: flex; align-items: center; gap: var(--spacing-sm)">
                <label style="min-width: 100px">å±æ€§:</label>
                <select id="attr-select" class="btn" style="flex: 1">
                  <option value="r">åŠå¾„ (r)</option>
                  <option value="opacity">é€æ˜åº¦ (opacity)</option>
                  <option value="cx">X ä½ç½® (cx)</option>
                </select>
              </div>
              <div style="display: flex; align-items: center; gap: var(--spacing-sm)">
                <label style="min-width: 100px">èµ·å§‹å€¼:</label>
                <input id="from-value" class="btn" type="text" value="30" style="flex: 1" />
              </div>
              <div style="display: flex; align-items: center; gap: var(--spacing-sm)">
                <label style="min-width: 100px">ä¸­é—´å€¼:</label>
                <input id="mid-value" class="btn" type="text" value="50" style="flex: 1" />
              </div>
              <div style="display: flex; align-items: center; gap: var(--spacing-sm)">
                <label style="min-width: 100px">ç»“æŸå€¼:</label>
                <input id="to-value" class="btn" type="text" value="30" style="flex: 1" />
              </div>
              <div style="display: flex; align-items: center; gap: var(--spacing-sm)">
                <label style="min-width: 100px">æŒç»­æ—¶é—´:</label>
                <input id="duration" type="range" value="2" min="0.5" max="5" step="0.5" style="flex: 1" />
                <span id="duration-value" style="min-width: 40px; font-weight: 600; color: var(--primary)">2s</span>
              </div>
            </div>

            <button class="btn" onclick="updateCustomAnimation()" style="margin-top: var(--spacing-md)">
              åº”ç”¨åŠ¨ç”»
            </button>

            <div class="code-block" style="margin-top: var(--spacing-md)">
              <code id="custom-code"
                >&lt;animate attributeName="r" values="30;50;30" dur="2s" repeatCount="indefinite"/&gt;</code
              >
            </div>
          </div>

          <div
            class="info-section"
            style="
              margin-top: var(--spacing-xl);
              padding: var(--spacing-md);
              background: var(--bg-secondary);
              border-radius: var(--radius-md);
            "
          >
            <h2>ğŸ’¡ å…³é”®çŸ¥è¯†ç‚¹</h2>
            <ul>
              <li>
                <strong>SMIL åŠ¨ç”»</strong>: ä½¿ç”¨ &lt;animate&gt;, &lt;animateTransform&gt;, &lt;animateMotion&gt; ç­‰å…ƒç´ 
              </li>
              <li><strong>CSS åŠ¨ç”»</strong>: ä½¿ç”¨ @keyframes å’Œ animation å±æ€§ï¼Œæ€§èƒ½æ›´å¥½</li>
              <li><strong>JavaScript åŠ¨ç”»</strong>: ä½¿ç”¨ requestAnimationFrame å®ç°ç²¾ç¡®æ§åˆ¶</li>
              <li><strong>dur</strong>: åŠ¨ç”»æŒç»­æ—¶é—´ï¼ˆå¦‚ "2s", "500ms"ï¼‰</li>
              <li><strong>repeatCount</strong>: é‡å¤æ¬¡æ•°ï¼ˆ"indefinite" è¡¨ç¤ºæ— é™å¾ªç¯ï¼‰</li>
              <li><strong>values</strong>: å…³é”®å¸§å€¼åˆ—è¡¨ï¼Œç”¨åˆ†å·åˆ†éš”</li>
              <li><strong>from/to</strong>: ç®€å•çš„èµ·å§‹å’Œç»“æŸå€¼</li>
            </ul>
          </div>
        </div>

        <script type="module">
          import { showToast } from '/src/utils.js';

          (() => {
            'use strict';

            // JavaScript åŠ¨ç”»æ§åˆ¶
            const jsCircle = document.getElementById('js-circle');
            let position = 50;
            let animationId = null;

            function animate() {
              position += 2;
              if (position > 450) {
                position = 50;
              }
              jsCircle.setAttribute('cx', position);
              animationId = requestAnimationFrame(animate);
            }

            window.startAnimation = function () {
              if (!animationId) {
                animate();
                showToast('åŠ¨ç”»å·²å¼€å§‹', 'success');
              }
            };

            window.pauseAnimation = function () {
              if (animationId) {
                cancelAnimationFrame(animationId);
                animationId = null;
                showToast('åŠ¨ç”»å·²æš‚åœ', 'info');
              }
            };

            window.resetAnimation = function () {
              if (animationId) {
                cancelAnimationFrame(animationId);
                animationId = null;
              }
              position = 50;
              jsCircle.setAttribute('cx', position);
              showToast('åŠ¨ç”»å·²é‡ç½®', 'success');
            };

            // è‡ªå®šä¹‰åŠ¨ç”»ç¼–è¾‘å™¨
            const customAnimate = document.getElementById('custom-animate');
            const attrSelect = document.getElementById('attr-select');
            const fromValue = document.getElementById('from-value');
            const midValue = document.getElementById('mid-value');
            const toValue = document.getElementById('to-value');
            const duration = document.getElementById('duration');
            const durationValue = document.getElementById('duration-value');
            const customCode = document.getElementById('custom-code');

            duration.addEventListener('input', () => {
              durationValue.textContent = duration.value + 's';
            });

            window.updateCustomAnimation = function () {
              const attr = attrSelect.value;
              const from = fromValue.value;
              const mid = midValue.value;
              const to = toValue.value;
              const dur = duration.value + 's';

              customAnimate.setAttribute('attributeName', attr);
              customAnimate.setAttribute('values', `${from};${mid};${to}`);
              customAnimate.setAttribute('dur', dur);

              // é‡å¯åŠ¨ç”»
              customAnimate.beginElement();

              customCode.textContent = `<animate attributeName="${attr}" values="${from};${mid};${to}" dur="${dur}" repeatCount="indefinite"/>`;

              showToast('åŠ¨ç”»å·²æ›´æ–°', 'success');
            };
          })();
        </script>
      </div>
    </main>
  </body>
</html>
